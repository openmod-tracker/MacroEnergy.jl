<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Locations · Macro</title><meta name="title" content="Locations · Macro"/><meta property="og:title" content="Locations · Macro"/><meta property="twitter:title" content="Locations · Macro"/><meta name="description" content="Documentation for Macro."/><meta property="og:description" content="Documentation for Macro."/><meta property="twitter:description" content="Documentation for Macro."/><meta property="og:url" content="https://macroenergy.github.io/Macro/stable/Manual/Locations/"/><meta property="twitter:url" content="https://macroenergy.github.io/Macro/stable/Manual/Locations/"/><link rel="canonical" href="https://macroenergy.github.io/Macro/stable/Manual/Locations/"/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">Macro</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><input class="collapse-toggle" id="menuitem-1" type="checkbox"/><label class="tocitem" for="menuitem-1"><span class="docs-label">Welcome to Macro</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../">Introduction</a></li><li><a class="tocitem" href="../../table_of_contents/">Table of contents</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2" type="checkbox"/><label class="tocitem" for="menuitem-2"><span class="docs-label">Getting Started</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Getting Started/1_overview/">Overview</a></li><li><a class="tocitem" href="../../Getting Started/2_installation/">Installation</a></li><li><a class="tocitem" href="../../Getting Started/4_macro_repo_contents/">What&#39;s Included With Macro</a></li><li><a class="tocitem" href="../../Getting Started/3_first_run/">First Run</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3" type="checkbox"/><label class="tocitem" for="menuitem-3"><span class="docs-label">Tutorials</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Tutorials/tutorials_introduction/">Introduction</a></li><li><a class="tocitem" href="../../Tutorials/0_getting_started/">Getting Started</a></li><li><a class="tocitem" href="../../Tutorials/1_running_macro/">Running Macro</a></li><li><a class="tocitem" href="../../Tutorials/2_multisector_modelling/">Multisector Modelling</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4" type="checkbox"/><label class="tocitem" for="menuitem-4"><span class="docs-label">Guides</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Guides/guides_introduction/">Introduction</a></li><li><input class="collapse-toggle" id="menuitem-4-2" type="checkbox"/><label class="tocitem" for="menuitem-4-2"><span class="docs-label">User Guide</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Guides/User Guide/user_build_system/">Create a System</a></li><li><a class="tocitem" href="../../Guides/User Guide/user_add_commodity/">Adding Commodities</a></li><li><a class="tocitem" href="../../Guides/User Guide/user_add_node/">Adding Nodes</a></li><li><a class="tocitem" href="../../Guides/User Guide/user_add_location/">Adding Locations</a></li><li><a class="tocitem" href="../../Guides/User Guide/user_add_asset/">Adding Assets</a></li><li><a class="tocitem" href="../../Guides/User Guide/user_policy_constraints/">Adding Policy constraints</a></li><li><a class="tocitem" href="../../Guides/User Guide/user_asset_constraints/">Adding Assets constraints</a></li><li><a class="tocitem" href="../../Guides/User Guide/user_settings/">Configuring Settings</a></li><li><a class="tocitem" href="../../Guides/User Guide/user_run_model/">Running Models</a></li><li><a class="tocitem" href="../../Guides/User Guide/user_write_results/">Writing Results</a></li><li><a class="tocitem" href="../../Guides/User Guide/user_multiperiod/">Using Multi-Period Models</a></li><li><a class="tocitem" href="../../Guides/User Guide/user_using_asset_libary/">Exploring the Asset library</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4-3" type="checkbox"/><label class="tocitem" for="menuitem-4-3"><span class="docs-label">Modeler Guide</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Guides/Modeler Guide/modeler_introduction/">Introduction</a></li><li><a class="tocitem" href="../../Guides/Modeler Guide/modeler_es_graph/">Energy System Graph-Based Representation</a></li><li><a class="tocitem" href="../../Guides/Modeler Guide/modeler_build_sectors/">Creating a New Sector</a></li><li><a class="tocitem" href="../../Guides/Modeler Guide/modeler_build_asset/">Creating a New Asset</a></li><li><a class="tocitem" href="../../Guides/Modeler Guide/modeler_add_docs_to_asset/">Documenting an Asset</a></li><li><a class="tocitem" href="../../Guides/Modeler Guide/modeler_create_example_case/">Creating a New Example Case</a></li><li><a class="tocitem" href="../../Guides/Modeler Guide/modeler_workflow/">Suggested Development Workflow</a></li><li><a class="tocitem" href="../../Guides/Modeler Guide/modeler_debugging_testing/">Debugging and Testing Tips</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4-4" type="checkbox"/><label class="tocitem" for="menuitem-4-4"><span class="docs-label">Developer Guide</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Guides/Developer Guide/dev_create_constraint/">Creating a Constraint</a></li><li><a class="tocitem" href="../../Guides/Developer Guide/2_type_hierarchy/">Type Hierarchy</a></li></ul></li></ul></li><li><a class="tocitem" href="../../Assets/assets_guide/">Assets</a></li><li><input class="collapse-toggle" id="menuitem-6" type="checkbox" checked/><label class="tocitem" for="menuitem-6"><span class="docs-label">Manual</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../manual_introduction/">Introduction</a></li><li><a class="tocitem" href="../Inputs/">Inputs</a></li><li><a class="tocitem" href="../Outputs/">Outputs</a></li><li><a class="tocitem" href="../System/">System</a></li><li><a class="tocitem" href="../Model/">Model</a></li><li><a class="tocitem" href="../Sectors/">Sectors</a></li><li><a class="tocitem" href="../Edges/">Edges</a></li><li><a class="tocitem" href="../Nodes/">Nodes</a></li><li><a class="tocitem" href="../Storage/">Storage</a></li><li><a class="tocitem" href="../Transformations/">Transformations</a></li><li class="is-active"><a class="tocitem" href>Locations</a><ul class="internal"><li><a class="tocitem" href="#Contents"><span>Contents</span></a></li><li><a class="tocitem" href="#manual-locations-overview"><span>Overview</span></a></li><li><a class="tocitem" href="#Location-Fields"><span>Location Fields</span></a></li><li><a class="tocitem" href="#manual-locations-types"><span>Types</span></a></li><li><a class="tocitem" href="#manual-locations-constructors"><span>Constructors</span></a></li><li><a class="tocitem" href="#manual-locations-methods"><span>Methods</span></a></li><li><a class="tocitem" href="#manual-locations-examples"><span>Examples</span></a></li><li><a class="tocitem" href="#See-Also"><span>See Also</span></a></li></ul></li><li><a class="tocitem" href="../Constraints/">Constraints</a></li><li><a class="tocitem" href="../Commodities/">Commodities</a></li><li><a class="tocitem" href="../Assets/">Assets</a></li><li><input class="collapse-toggle" id="menuitem-6-15" type="checkbox"/><label class="tocitem" for="menuitem-6-15"><span class="docs-label">Asset Library</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../assets/battery/">Battery</a></li><li><a class="tocitem" href="../assets/beccselectricity/">BECCS Electricity</a></li><li><a class="tocitem" href="../assets/beccshydrogen/">BECCS Hydrogen</a></li><li><a class="tocitem" href="../assets/electricdac/">Electric DAC</a></li><li><a class="tocitem" href="../assets/electrolyzer/">Electrolyzer</a></li><li><a class="tocitem" href="../assets/fuelcell/">Fuel Cell</a></li><li><a class="tocitem" href="../assets/gasstorage/">Gas Storage</a></li><li><a class="tocitem" href="../assets/hydropower/">Hydro Reservoir</a></li><li><a class="tocitem" href="../assets/mustrun/">Must Run</a></li><li><a class="tocitem" href="../assets/natgasdaq/">Natural Gas DAC</a></li><li><a class="tocitem" href="../assets/thermalhydrogen/">Thermal Hydrogen Plant (with and without CCS)</a></li><li><a class="tocitem" href="../assets/thermalpower/">Thermal Power Plant (with and without CCS)</a></li><li><a class="tocitem" href="../assets/transmissionlink/">Transmission Link</a></li><li><a class="tocitem" href="../assets/vre/">Variable Renewable Energy Resources (VRE)</a></li></ul></li><li><a class="tocitem" href="../Financial_assumptions/">Financial Assumptions</a></li><li><a class="tocitem" href="../Multi_period_accounting/">Multi-Period Accounting</a></li></ul></li><li><a class="tocitem" href="../../how_to_contribute/">How to contribute</a></li><li><input class="collapse-toggle" id="menuitem-8" type="checkbox"/><label class="tocitem" for="menuitem-8"><span class="docs-label">References</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../References/1_introduction/">Introduction</a></li><li><a class="tocitem" href="../../References/2_reading_input/">Reading input data</a></li><li><a class="tocitem" href="../../References/3_macro_objects/">Macro Objects</a></li><li><a class="tocitem" href="../../References/4_writing_output/">Writing output data</a></li><li><a class="tocitem" href="../../References/5_utilities/">Utilities</a></li><li><a class="tocitem" href="../../References/ref_download_examples/">Downloading examples</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-9" type="checkbox"/><label class="tocitem" for="menuitem-9"><span class="docs-label">Appendix</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Appendix/TEA/">TEA</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Manual</a></li><li class="is-active"><a href>Locations</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Locations</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/macroenergy/MacroEnergy.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/macroenergy/MacroEnergy.jl/blob/main/docs/src/Manual/Locations.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Locations"><a class="docs-heading-anchor" href="#Locations">Locations</a><a id="Locations-1"></a><a class="docs-heading-anchor-permalink" href="#Locations" title="Permalink"></a></h1><h2 id="Contents"><a class="docs-heading-anchor" href="#Contents">Contents</a><a id="Contents-1"></a><a class="docs-heading-anchor-permalink" href="#Contents" title="Permalink"></a></h2><p><a href="#manual-locations-overview">Overview</a> | <a href="#Location-Fields">Fields</a> | <a href="#manual-locations-types">Types</a> | <a href="#manual-locations-constructors">Constructors</a> | <a href="#manual-locations-methods">Methods</a> | <a href="#manual-locations-examples">Examples</a></p><h2 id="manual-locations-overview"><a class="docs-heading-anchor" href="#manual-locations-overview">Overview</a><a id="manual-locations-overview-1"></a><a class="docs-heading-anchor-permalink" href="#manual-locations-overview" title="Permalink"></a></h2><p><code>Locations</code> are compound components in Macro that represent geographic or conceptual places in an energy system. They serve as containers for collections of <code>Nodes</code>, where each <code>Node</code> has a different <code>Commodity</code> or sub-<code>Commodity</code> type. Locations are one of the core organizational concepts in Macro, alongside <code>Assets</code>.</p><p>The primary purpose of Locations is to simplify the construction and management of complex energy system models. Rather than requiring users to manually connect individual <code>Edges</code> of <code>Assets</code> to specific <code>Nodes</code> for each commodity type, the <code>Asset</code> as a whole can be connected to a <code>Location</code> and Macro will automatically handle the routing and connection of the appropriate <code>Edges</code> and <code>Nodes</code> within that Location. This abstraction makes model building more intuitive and less error-prone.</p><h3 id="Location-Structure-and-Node-Management"><a class="docs-heading-anchor" href="#Location-Structure-and-Node-Management">Location Structure and Node Management</a><a id="Location-Structure-and-Node-Management-1"></a><a class="docs-heading-anchor-permalink" href="#Location-Structure-and-Node-Management" title="Permalink"></a></h3><p>Each Location maintains a collection of <code>Nodes</code> organized by commodity type, with each <code>Node</code> handling flows of a specific <code>Commodity</code>. The Location uses a <code>Set</code> to track the commodity types of all <code>Nodes</code> it contains, ensuring that only one <code>Node</code> per commodity type exists within any given Location. This constraint maintains clarity about which <code>Node</code> handles each commodity type and how <code>Edges</code> should be routed.</p><p>When a user attempts to add a <code>Node</code> to a Location that already contains a <code>Node</code> of the same commodity type, the system will throw an error unless explicitly instructed to replace the existing <code>Node</code>. This safeguard helps maintain model consistency and prevents accidental overwrites of important network components. Macro can also be configured to automatically create new <code>Nodes</code> for commodity types that do not already exist in the Location, streamlining the process of adding new components to the model.</p><h3 id="Simplified-Model-Construction"><a class="docs-heading-anchor" href="#Simplified-Model-Construction">Simplified Model Construction</a><a id="Simplified-Model-Construction-1"></a><a class="docs-heading-anchor-permalink" href="#Simplified-Model-Construction" title="Permalink"></a></h3><p>The Location abstraction makes building energy systems much more intuitive because it mirrors how people naturally think about energy infrastructure. Physical equipment like power plants, storage facilities, and transmission lines are typically associated with specific geographic locations. By organizing the model around Locations, users can construct systems that directly correspond to real-world geography and infrastructure layout.</p><p>When Assets are connected to Locations rather than individual Nodes, Macro automatically determines the appropriate connections based on the commodity types involved in the Asset&#39;s operation. For example, a natural gas power plant Asset connected to a Location will automatically have its gas input connected to the Location&#39;s natural gas <code>Node</code> and its electricity output connected to the Location&#39;s electricity <code>Node</code>. This automatic routing eliminates much of the manual wiring that would otherwise be required.</p><h3 id="Physical-and-Logical-Modeling"><a class="docs-heading-anchor" href="#Physical-and-Logical-Modeling">Physical and Logical Modeling</a><a id="Physical-and-Logical-Modeling-1"></a><a class="docs-heading-anchor-permalink" href="#Physical-and-Logical-Modeling" title="Permalink"></a></h3><p>Locations can represent both physical geographic areas (such as cities, regions, or specific sites) and logical groupings (such as market zones or administrative areas). This flexibility allows users to organize their models at the appropriate level of detail for their analysis needs. A national energy system model might use Locations to represent states or provinces, while a local energy system model might use Locations to represent individual buildings or districts.</p><p>The Location concept also supports hierarchical thinking about energy systems, where larger geographic areas contain multiple smaller areas, each with their own local energy infrastructure and commodity flows. While Macro doesn&#39;t enforce hierarchical relationships between Locations, users can organize their models to reflect these real-world structures.</p><h3 id="Key-Concepts"><a class="docs-heading-anchor" href="#Key-Concepts">Key Concepts</a><a id="Key-Concepts-1"></a><a class="docs-heading-anchor-permalink" href="#Key-Concepts" title="Permalink"></a></h3><ul><li><strong>Node Collection</strong>: Locations contain multiple <code>Nodes</code>, each handling a specific commodity type at that location</li><li><strong>Automatic Routing</strong>: Assets connected to Locations automatically route to appropriate <code>Nodes</code> based on commodity types</li><li><strong>Commodity Uniqueness</strong>: Each Location enforces one <code>Node</code> per commodity or sub-commodity type using a tracking <code>Set</code></li><li><strong>Simplified Modeling</strong>: Locations make model construction intuitive by mirroring real-world geographic organization</li><li><strong>Flexible Abstraction</strong>: Can represent physical locations or logical groupings depending on modeling needs</li><li><strong>Error Prevention</strong>: Automatic checking prevents duplicate commodity <code>Nodes</code> within the same Location</li></ul><h2 id="Location-Fields"><a class="docs-heading-anchor" href="#Location-Fields">Location Fields</a><a id="Location-Fields-1"></a><a class="docs-heading-anchor-permalink" href="#Location-Fields" title="Permalink"></a></h2><p><code>Locations</code> have the following fields. When running a model, the fields are set by the input files or programmatically when building the system.</p><div class="admonition is-info" id="Units-in-Macro-fa43ee5504ac88cc"><header class="admonition-header">Units in Macro<a class="admonition-anchor" href="#Units-in-Macro-fa43ee5504ac88cc" title="Permalink"></a></header><div class="admonition-body"><p>We have assumed that your System is using units of MWh for energy, tonnes for mass, and hour-long time steps. You can use any set of units as long as they are consistent across your operations and investment inputs.</p></div></div><h3 id="Identification-and-System-Reference"><a class="docs-heading-anchor" href="#Identification-and-System-Reference">Identification and System Reference</a><a id="Identification-and-System-Reference-1"></a><a class="docs-heading-anchor-permalink" href="#Identification-and-System-Reference" title="Permalink"></a></h3><table><tr><th style="text-align: right">Field</th><th style="text-align: right">Type</th><th style="text-align: right">Description</th><th style="text-align: right">Default</th></tr><tr><td style="text-align: right"><code>id</code></td><td style="text-align: right">Symbol</td><td style="text-align: right">Unique identifier for the location</td><td style="text-align: right">-</td></tr><tr><td style="text-align: right"><code>system</code></td><td style="text-align: right">AbstractSystem</td><td style="text-align: right">Reference to the system containing this location</td><td style="text-align: right">-</td></tr></table><h3 id="Node-Management"><a class="docs-heading-anchor" href="#Node-Management">Node Management</a><a id="Node-Management-1"></a><a class="docs-heading-anchor-permalink" href="#Node-Management" title="Permalink"></a></h3><table><tr><th style="text-align: right">Field</th><th style="text-align: right">Type</th><th style="text-align: right">Description</th><th style="text-align: right">Default</th></tr><tr><td style="text-align: right"><code>nodes</code></td><td style="text-align: right">Dict{Symbol,Node}</td><td style="text-align: right">Dictionary mapping commodity symbols to nodes</td><td style="text-align: right">Dict{Symbol,Node}()</td></tr><tr><td style="text-align: right"><code>commodities</code></td><td style="text-align: right">Set{Symbol}</td><td style="text-align: right">Set of commodity symbols for nodes in this location</td><td style="text-align: right">Set{Symbol}()</td></tr></table><h2 id="manual-locations-types"><a class="docs-heading-anchor" href="#manual-locations-types">Types</a><a id="manual-locations-types-1"></a><a class="docs-heading-anchor-permalink" href="#manual-locations-types" title="Permalink"></a></h2><h3 id="Type-Hierarchy"><a class="docs-heading-anchor" href="#Type-Hierarchy">Type Hierarchy</a><a id="Type-Hierarchy-1"></a><a class="docs-heading-anchor-permalink" href="#Type-Hierarchy" title="Permalink"></a></h3><p><code>Location</code> is a subtype ofthe abstract <code>MacroObject</code> type:</p><pre><code class="language-julia hljs">MacroObject
├── Location
├── AbstractAsset
├── AbstractVertex
└── AbstractEdge</code></pre><h3 id="Location"><a class="docs-heading-anchor" href="#Location">Location</a><a id="Location-1"></a><a class="docs-heading-anchor-permalink" href="#Location" title="Permalink"></a></h3><p>The <code>Location</code> type represents a geographic or conceptual place in an energy system that contains multiple nodes for different commodities.</p><h2 id="manual-locations-constructors"><a class="docs-heading-anchor" href="#manual-locations-constructors">Constructors</a><a id="manual-locations-constructors-1"></a><a class="docs-heading-anchor-permalink" href="#manual-locations-constructors" title="Permalink"></a></h2><h3 id="Keyword-Constructors"><a class="docs-heading-anchor" href="#Keyword-Constructors">Keyword Constructors</a><a id="Keyword-Constructors-1"></a><a class="docs-heading-anchor-permalink" href="#Keyword-Constructors" title="Permalink"></a></h3><pre><code class="language-julia hljs">Location(; id::Symbol, system::AbstractSystem, nodes::Dict{Symbol,Node}=Dict{Symbol,Node}(), 
         commodities::Set{Symbol}=Set{Symbol}())</code></pre><p>Direct constructor using keyword arguments for all fields.</p><table><tr><th style="text-align: right">Parameter</th><th style="text-align: right">Type</th><th style="text-align: right">Description</th><th style="text-align: right">Required</th></tr><tr><td style="text-align: right"><code>id</code></td><td style="text-align: right">Symbol</td><td style="text-align: right">Unique identifier for the location</td><td style="text-align: right">Yes</td></tr><tr><td style="text-align: right"><code>system</code></td><td style="text-align: right">AbstractSystem</td><td style="text-align: right">Reference to the containing system</td><td style="text-align: right">Yes</td></tr><tr><td style="text-align: right"><code>nodes</code></td><td style="text-align: right">Dict{Symbol,Node}</td><td style="text-align: right">Dictionary mapping commodity symbols to nodes</td><td style="text-align: right">No</td></tr><tr><td style="text-align: right"><code>commodities</code></td><td style="text-align: right">Set{Symbol}</td><td style="text-align: right">Set of commodity symbols for contained nodes</td><td style="text-align: right">No</td></tr></table><h3 id="Factory-Constructors"><a class="docs-heading-anchor" href="#Factory-Constructors">Factory Constructors</a><a id="Factory-Constructors-1"></a><a class="docs-heading-anchor-permalink" href="#Factory-Constructors" title="Permalink"></a></h3><pre><code class="language-julia hljs">load_locations!(system::AbstractSystem, rel_or_abs_path::String, data::AbstractString)
load_locations!(system::AbstractSystem, rel_or_abs_path::String, data::Vector{&lt;:AbstractString})
load_locations!(system::AbstractSystem, rel_or_abs_path::String, data::AbstractDict{Symbol, Any})</code></pre><p>Factory methods for loading locations from input data and adding them to a system.</p><table><tr><th style="text-align: right">Parameter</th><th style="text-align: right">Type</th><th style="text-align: right">Description</th></tr><tr><td style="text-align: right"><code>system</code></td><td style="text-align: right">AbstractSystem</td><td style="text-align: right">System to add the locations to</td></tr><tr><td style="text-align: right"><code>rel_or_abs_path</code></td><td style="text-align: right">String</td><td style="text-align: right">Relative or absolute path for data files</td></tr><tr><td style="text-align: right"><code>data</code></td><td style="text-align: right">String/Vector/Dict</td><td style="text-align: right">Location data (ID strings, vector, or dictionary)</td></tr></table><h2 id="manual-locations-methods"><a class="docs-heading-anchor" href="#manual-locations-methods">Methods</a><a id="manual-locations-methods-1"></a><a class="docs-heading-anchor-permalink" href="#manual-locations-methods" title="Permalink"></a></h2><h3 id="Accessor-Methods"><a class="docs-heading-anchor" href="#Accessor-Methods">Accessor Methods</a><a id="Accessor-Methods-1"></a><a class="docs-heading-anchor-permalink" href="#Accessor-Methods" title="Permalink"></a></h3><p>Methods for accessing location data and properties.</p><table><tr><th style="text-align: right">Method</th><th style="text-align: right">Description</th><th style="text-align: right">Return Type</th></tr><tr><td style="text-align: right"><code>id(location)</code></td><td style="text-align: right">Get location identifier</td><td style="text-align: right"><code>Symbol</code></td></tr></table><h3 id="Node-Management-Methods"><a class="docs-heading-anchor" href="#Node-Management-Methods">Node Management Methods</a><a id="Node-Management-Methods-1"></a><a class="docs-heading-anchor-permalink" href="#Node-Management-Methods" title="Permalink"></a></h3><p>Methods for managing nodes within locations.</p><table><tr><th style="text-align: right">Method</th><th style="text-align: right">Description</th><th style="text-align: right">Return Type</th></tr><tr><td style="text-align: right"><code>add_node!(location, node, replace=false)</code></td><td style="text-align: right">Add a node to the location for its commodity type</td><td style="text-align: right"><code>Nothing</code></td></tr><tr><td style="text-align: right"><code>refresh_commodities_list!(location)</code></td><td style="text-align: right">Update the commodities set based on current nodes</td><td style="text-align: right"><code>Nothing</code></td></tr></table><h3 id="System-Loading-Methods"><a class="docs-heading-anchor" href="#System-Loading-Methods">System Loading Methods</a><a id="System-Loading-Methods-1"></a><a class="docs-heading-anchor-permalink" href="#System-Loading-Methods" title="Permalink"></a></h3><p>Methods for loading locations into systems from input data.</p><table><tr><th style="text-align: right">Method</th><th style="text-align: right">Description</th><th style="text-align: right">Return Type</th></tr><tr><td style="text-align: right"><code>load_locations!(system, path, data::AbstractString)</code></td><td style="text-align: right">Load single location from a Location ID</td><td style="text-align: right"><code>Nothing</code></td></tr><tr><td style="text-align: right"><code>load_locations!(system, path, data::Vector{&lt;:AbstractString})</code></td><td style="text-align: right">Load multiple locations from vector of IDs</td><td style="text-align: right"><code>Nothing</code></td></tr><tr><td style="text-align: right"><code>load_locations!(system, path, data::AbstractDict{Symbol,Any})</code></td><td style="text-align: right">Load locations from dictionary data</td><td style="text-align: right"><code>Nothing</code></td></tr></table><h3 id="Model-Building-Methods-(Inherited-from-MacroObject)"><a class="docs-heading-anchor" href="#Model-Building-Methods-(Inherited-from-MacroObject)">Model Building Methods (Inherited from MacroObject)</a><a id="Model-Building-Methods-(Inherited-from-MacroObject)-1"></a><a class="docs-heading-anchor-permalink" href="#Model-Building-Methods-(Inherited-from-MacroObject)" title="Permalink"></a></h3><p>Methods used internally during model construction.</p><table><tr><th style="text-align: right">Method</th><th style="text-align: right">Description</th><th style="text-align: right">Return Type</th></tr><tr><td style="text-align: right"><code>add_linking_variables!(location, model)</code></td><td style="text-align: right">Add linking variables to JuMP model</td><td style="text-align: right"><code>Nothing</code></td></tr><tr><td style="text-align: right"><code>define_available_capacity!(location, model)</code></td><td style="text-align: right">Define available capacity constraints</td><td style="text-align: right"><code>Nothing</code></td></tr><tr><td style="text-align: right"><code>planning_model!(location, model)</code></td><td style="text-align: right">Add planning model constraints</td><td style="text-align: right"><code>Nothing</code></td></tr><tr><td style="text-align: right"><code>operation_model!(location, model)</code></td><td style="text-align: right">Add operational model constraints</td><td style="text-align: right"><code>Nothing</code></td></tr></table><h2 id="manual-locations-examples"><a class="docs-heading-anchor" href="#manual-locations-examples">Examples</a><a id="manual-locations-examples-1"></a><a class="docs-heading-anchor-permalink" href="#manual-locations-examples" title="Permalink"></a></h2><p>Currently, <code>Locations</code> are configured by creating and configuring <code>Nodes</code> and then adding them to a <code>Location</code>. The <code>load_locations!</code> function is used to load a list of <code>Location</code> IDs from a file. These are then populated with <code>Nodes</code> as needed. If the <code>AutoCreateLocations</code> setting is set to <code>true</code>, Macro can also automatically create <code>Locations</code> if a Node has a <code>location</code> field which does not match an existing <code>Location</code> ID. If the <code>AutoCreateNodes</code> setting is set to <code>true</code>, Macro can also automatically create <code>Nodes</code> for commodity types that do not already exist in the Location.</p><h3 id="Location-File"><a class="docs-heading-anchor" href="#Location-File">Location File</a><a id="Location-File-1"></a><a class="docs-heading-anchor-permalink" href="#Location-File" title="Permalink"></a></h3><p>The <code>Location</code> file is a JSON file that contains a list of <code>Location</code> IDs. Its default location is <code>system/locations.json</code>. The file can be structured as follows:</p><pre><code class="language-json hljs">{
  &quot;locations&quot;: [
    &quot;boston&quot;,
    &quot;princeton&quot;,
    &quot;new york&quot;
  ]
}</code></pre><p>This is not a required file, but it is a convenient way to define the <code>Location</code> IDs. In the future, we will add more functionality to this file, such as defining the <code>Nodes</code> and their commodity types.</p><h3 id="Adding-a-Node-to-a-Location"><a class="docs-heading-anchor" href="#Adding-a-Node-to-a-Location">Adding a Node to a Location</a><a id="Adding-a-Node-to-a-Location-1"></a><a class="docs-heading-anchor-permalink" href="#Adding-a-Node-to-a-Location" title="Permalink"></a></h3><p><code>Nodes</code> are added to a <code>Location</code> by including the <code>location</code> field in the <code>Node</code> input file. For example, to add <code>Node{Electricity}</code> to Boston and Princeton, you would define it as follows:</p><pre><code class="language-json hljs">{
    &quot;nodes&quot;: [
        {
            &quot;type&quot;: &quot;Electricity&quot;,
            &quot;global_data&quot;: {
                &quot;global_data&quot;: {
                    &quot;time_interval&quot;: &quot;Electricity&quot;,
                    &quot;max_nsd&quot;: [1.0],
                    &quot;price_nsd&quot;: [5000.0],
                    &quot;constraints&quot;: {
                        &quot;BalanceConstraint&quot;: true,
                        &quot;MaxNonServedDemandConstraint&quot;: true,
                        &quot;MaxNonServedDemandPerSegmentConstraint&quot;: true
                    }
                }
            },
            &quot;instance_data&quot;: [
                {
                    &quot;id&quot;: &quot;boston_electricity&quot;,
                    &quot;location&quot;: &quot;boston&quot;,
                    &quot;demand&quot;: {
                        &quot;timeseries&quot;: {
                            &quot;path&quot;: &quot;system/demand.csv&quot;,
                            &quot;header&quot;: &quot;Demand_Boston&quot;
                        }
                    }
                },
                {
                    &quot;id&quot;: &quot;princeton_electricity&quot;,
                    &quot;location&quot;: &quot;princeton&quot;,
                    &quot;demand&quot;: {
                        &quot;timeseries&quot;: {
                            &quot;path&quot;: &quot;system/demand.csv&quot;,
                            &quot;header&quot;: &quot;Demand_Princeton&quot;
                        }
                    }
                }
            ]
        }
    ]
}</code></pre><p>During the <code>System</code> generation process, Macro will add these <code>Nodes</code> to the <code>Locations</code> specified in the <code>location</code> field using the <code>add_node!</code> method. If both Boston and Princeton already have <code>Node{Electricity}</code> defined, Macro will throw an error unless the <code>replace</code> parameter of the <code>add_node!</code> is set to <code>true</code>.</p><h3 id="Automatically-Creating-Locations-and-Nodes"><a class="docs-heading-anchor" href="#Automatically-Creating-Locations-and-Nodes">Automatically Creating Locations and Nodes</a><a id="Automatically-Creating-Locations-and-Nodes-1"></a><a class="docs-heading-anchor-permalink" href="#Automatically-Creating-Locations-and-Nodes" title="Permalink"></a></h3><p>Automatic creating of <code>Locations</code> and <code>Nodes</code> can be enabled by setting the <code>AutoCreateLocations</code> and <code>AutoCreateNodes</code> flags in the system configuration (<code>settings/macro_settings</code> by default).</p><pre><code class="language-json hljs">{
  &quot;AutoCreateNodes&quot;:false,
  &quot;AutoCreateLocations&quot;:true,
  // ...
}</code></pre><h4 id="AutoCreateLocations"><a class="docs-heading-anchor" href="#AutoCreateLocations">AutoCreateLocations</a><a id="AutoCreateLocations-1"></a><a class="docs-heading-anchor-permalink" href="#AutoCreateLocations" title="Permalink"></a></h4><p>Using the example input from the previous section, if we did not have a <code>locations.json</code> input file but <code>AutoCreateLocations</code> is set to <code>true</code>, then Macro will create the <code>Location</code> IDs &quot;boston&quot; and &quot;princeton&quot; automatically when the corresponding <code>Node</code> instances are created.</p><h4 id="AutoCreateNodes"><a class="docs-heading-anchor" href="#AutoCreateNodes">AutoCreateNodes</a><a id="AutoCreateNodes-1"></a><a class="docs-heading-anchor-permalink" href="#AutoCreateNodes" title="Permalink"></a></h4><p>Let&#39;s consider a second example where a <code>ThermalPower{NaturalGas}</code> Asset has a <code>location</code> field set to &quot;boston&quot; and that <code>Location</code> exists in the <code>locations.json</code> file. Macro will attempt to automatically connect the <code>Edge{NaturalGas}</code> and <code>Edge{Electricity}</code> of the <code>ThermalPower{NaturalGas}</code> Asset to the corresponding <code>Node</code> instances in the &quot;boston&quot; location. If one or both of these <code>Node</code> instances do not exist, and the <code>AutoCreateNodes</code> setting is set to <code>true</code>, Macro will automatically create the necessary <code>Node</code> instances for the missing commodity types.</p><p>Note that these <code>Nodes</code> will not have any exogeneous demand, supply, constraints or other properties defined. They are simply created to allow the <code>Asset</code> to connect to the <code>Location</code> without errors.</p><h2 id="See-Also"><a class="docs-heading-anchor" href="#See-Also">See Also</a><a id="See-Also-1"></a><a class="docs-heading-anchor-permalink" href="#See-Also" title="Permalink"></a></h2><ul><li><strong><a href="../Nodes/#Nodes">Nodes</a></strong>: Individual commodity balance points that Locations contain and manage</li><li><strong><a href="../Edges/#Edges">Edges</a></strong>: Transmission and distribution infrastructure that connects nodes across locations</li><li><strong><a href="../System/#System">System</a></strong>: The overall system container that holds locations, assets, and other components</li><li><strong><a href="../Assets/#Assets">Assets</a></strong>: Energy technologies and infrastructure that connect to locations for simplified modeling</li></ul><script type="module">import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.esm.min.mjs';
mermaid.initialize({
    startOnLoad: true,
    theme: "neutral"
});
</script></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../Transformations/">« Transformations</a><a class="docs-footer-nextpage" href="../Constraints/">Constraints »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.14.1 on <span class="colophon-date" title="Tuesday 16 September 2025 19:09">Tuesday 16 September 2025</span>. Using Julia version 1.11.7.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
