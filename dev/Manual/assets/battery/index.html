<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Battery · Macro</title><meta name="title" content="Battery · Macro"/><meta property="og:title" content="Battery · Macro"/><meta property="twitter:title" content="Battery · Macro"/><meta name="description" content="Documentation for Macro."/><meta property="og:description" content="Documentation for Macro."/><meta property="twitter:description" content="Documentation for Macro."/><meta property="og:url" content="https://macroenergy.github.io/Macro/stable/Manual/assets/battery/"/><meta property="twitter:url" content="https://macroenergy.github.io/Macro/stable/Manual/assets/battery/"/><link rel="canonical" href="https://macroenergy.github.io/Macro/stable/Manual/assets/battery/"/><script data-outdated-warner src="../../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../../assets/documenter.js"></script><script src="../../../search_index.js"></script><script src="../../../siteinfo.js"></script><script src="../../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../../">Macro</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><input class="collapse-toggle" id="menuitem-1" type="checkbox"/><label class="tocitem" for="menuitem-1"><span class="docs-label">Welcome to Macro</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../">Introduction</a></li><li><a class="tocitem" href="../../../table_of_contents/">Table of contents</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2" type="checkbox"/><label class="tocitem" for="menuitem-2"><span class="docs-label">Getting Started</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../Getting Started/1_overview/">Overview</a></li><li><a class="tocitem" href="../../../Getting Started/2_installation/">Installation</a></li><li><a class="tocitem" href="../../../Getting Started/4_macro_repo_contents/">What&#39;s Included With Macro</a></li><li><a class="tocitem" href="../../../Getting Started/3_first_run/">First Run</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3" type="checkbox"/><label class="tocitem" for="menuitem-3"><span class="docs-label">Tutorials</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../Tutorials/tutorials_introduction/">Introduction</a></li><li><a class="tocitem" href="../../../Tutorials/0_getting_started/">Getting Started</a></li><li><a class="tocitem" href="../../../Tutorials/1_running_macro/">Running Macro</a></li><li><a class="tocitem" href="../../../Tutorials/2_multisector_modelling/">Multisector Modelling</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4" type="checkbox"/><label class="tocitem" for="menuitem-4"><span class="docs-label">Guides</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../Guides/guides_introduction/">Introduction</a></li><li><input class="collapse-toggle" id="menuitem-4-2" type="checkbox"/><label class="tocitem" for="menuitem-4-2"><span class="docs-label">User Guide</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../Guides/User Guide/user_build_system/">Create a System</a></li><li><a class="tocitem" href="../../../Guides/User Guide/user_add_commodity/">Adding Commodities</a></li><li><a class="tocitem" href="../../../Guides/User Guide/user_add_node/">Adding Nodes</a></li><li><a class="tocitem" href="../../../Guides/User Guide/user_add_location/">Adding Locations</a></li><li><a class="tocitem" href="../../../Guides/User Guide/user_add_asset/">Adding Assets</a></li><li><a class="tocitem" href="../../../Guides/User Guide/user_policy_constraints/">Adding Policy constraints</a></li><li><a class="tocitem" href="../../../Guides/User Guide/user_asset_constraints/">Adding Assets constraints</a></li><li><a class="tocitem" href="../../../Guides/User Guide/user_settings/">Configuring Settings</a></li><li><a class="tocitem" href="../../../Guides/User Guide/user_run_model/">Running Models</a></li><li><a class="tocitem" href="../../../Guides/User Guide/user_write_results/">Writing Results</a></li><li><a class="tocitem" href="../../../Guides/User Guide/user_multiperiod/">Using Multi-Period Models</a></li><li><a class="tocitem" href="../../../Guides/User Guide/user_using_asset_libary/">Exploring the Asset library</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4-3" type="checkbox"/><label class="tocitem" for="menuitem-4-3"><span class="docs-label">Modeler Guide</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../Guides/Modeler Guide/modeler_introduction/">Introduction</a></li><li><a class="tocitem" href="../../../Guides/Modeler Guide/modeler_es_graph/">Energy System Graph-Based Representation</a></li><li><a class="tocitem" href="../../../Guides/Modeler Guide/modeler_build_sectors/">Creating a New Sector</a></li><li><a class="tocitem" href="../../../Guides/Modeler Guide/modeler_build_asset/">Creating a New Asset</a></li><li><a class="tocitem" href="../../../Guides/Modeler Guide/modeler_add_docs_to_asset/">Documenting an Asset</a></li><li><a class="tocitem" href="../../../Guides/Modeler Guide/modeler_create_example_case/">Creating a New Example Case</a></li><li><a class="tocitem" href="../../../Guides/Modeler Guide/modeler_workflow/">Suggested Development Workflow</a></li><li><a class="tocitem" href="../../../Guides/Modeler Guide/modeler_debugging_testing/">Debugging and Testing Tips</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4-4" type="checkbox"/><label class="tocitem" for="menuitem-4-4"><span class="docs-label">Developer Guide</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../Guides/Developer Guide/dev_create_constraint/">Creating a Constraint</a></li><li><a class="tocitem" href="../../../Guides/Developer Guide/2_type_hierarchy/">Type Hierarchy</a></li></ul></li></ul></li><li><a class="tocitem" href="../../../Assets/assets_guide/">Assets</a></li><li><input class="collapse-toggle" id="menuitem-6" type="checkbox" checked/><label class="tocitem" for="menuitem-6"><span class="docs-label">Manual</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../manual_introduction/">Introduction</a></li><li><a class="tocitem" href="../../Inputs/">Inputs</a></li><li><a class="tocitem" href="../../Outputs/">Outputs</a></li><li><a class="tocitem" href="../../System/">System</a></li><li><a class="tocitem" href="../../Model/">Model</a></li><li><a class="tocitem" href="../../Sectors/">Sectors</a></li><li><a class="tocitem" href="../../Edges/">Edges</a></li><li><a class="tocitem" href="../../Nodes/">Nodes</a></li><li><a class="tocitem" href="../../Storage/">Storage</a></li><li><a class="tocitem" href="../../Transformations/">Transformations</a></li><li><a class="tocitem" href="../../Locations/">Locations</a></li><li><a class="tocitem" href="../../Constraints/">Constraints</a></li><li><a class="tocitem" href="../../Commodities/">Commodities</a></li><li><a class="tocitem" href="../../Assets/">Assets</a></li><li><input class="collapse-toggle" id="menuitem-6-15" type="checkbox" checked/><label class="tocitem" for="menuitem-6-15"><span class="docs-label">Asset Library</span><i class="docs-chevron"></i></label><ul class="collapsed"><li class="is-active"><a class="tocitem" href>Battery</a><ul class="internal"><li><a class="tocitem" href="#Contents"><span>Contents</span></a></li><li><a class="tocitem" href="#battery_overview"><span>Overview</span></a></li><li><a class="tocitem" href="#battery_asset_structure"><span>Asset Structure</span></a></li><li><a class="tocitem" href="#battery_symmetric_and_asymmetric"><span>Symmetric and Asymmetric Battery</span></a></li><li><a class="tocitem" href="#battery_input_file"><span>Input File (Standard Format)</span></a></li><li><a class="tocitem" href="#battery_type_definition"><span>Types - Asset Structure</span></a></li><li><a class="tocitem" href="#battery_constructors"><span>Constructors</span></a></li><li><a class="tocitem" href="#battery_examples"><span>Examples</span></a></li><li><a class="tocitem" href="#battery_best_practices"><span>Best Practices</span></a></li><li><a class="tocitem" href="#battery_advanced_json_csv_input_format"><span>Input File (Advanced Format)</span></a></li></ul></li><li><a class="tocitem" href="../beccselectricity/">BECCS Electricity</a></li><li><a class="tocitem" href="../beccshydrogen/">BECCS Hydrogen</a></li><li><a class="tocitem" href="../electricdac/">Electric DAC</a></li><li><a class="tocitem" href="../electrolyzer/">Electrolyzer</a></li><li><a class="tocitem" href="../fuelcell/">Fuel Cell</a></li><li><a class="tocitem" href="../gasstorage/">Gas Storage</a></li><li><a class="tocitem" href="../hydropower/">Hydro Reservoir</a></li><li><a class="tocitem" href="../mustrun/">Must Run</a></li><li><a class="tocitem" href="../natgasdaq/">Natural Gas DAC</a></li><li><a class="tocitem" href="../thermalhydrogen/">Thermal Hydrogen Plant (with and without CCS)</a></li><li><a class="tocitem" href="../thermalpower/">Thermal Power Plant (with and without CCS)</a></li><li><a class="tocitem" href="../transmissionlink/">Transmission Link</a></li><li><a class="tocitem" href="../vre/">Variable Renewable Energy Resources (VRE)</a></li></ul></li><li><a class="tocitem" href="../../Financial_assumptions/">Financial Assumptions</a></li><li><a class="tocitem" href="../../Multi_period_accounting/">Multi-Period Accounting</a></li></ul></li><li><a class="tocitem" href="../../../how_to_contribute/">How to contribute</a></li><li><input class="collapse-toggle" id="menuitem-8" type="checkbox"/><label class="tocitem" for="menuitem-8"><span class="docs-label">References</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../References/1_introduction/">Introduction</a></li><li><a class="tocitem" href="../../../References/2_reading_input/">Reading input data</a></li><li><a class="tocitem" href="../../../References/3_macro_objects/">Macro Objects</a></li><li><a class="tocitem" href="../../../References/4_writing_output/">Writing output data</a></li><li><a class="tocitem" href="../../../References/5_utilities/">Utilities</a></li><li><a class="tocitem" href="../../../References/ref_download_examples/">Downloading examples</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-9" type="checkbox"/><label class="tocitem" for="menuitem-9"><span class="docs-label">Appendix</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../Appendix/TEA/">TEA</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Manual</a></li><li><a class="is-disabled">Asset Library</a></li><li class="is-active"><a href>Battery</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Battery</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/macroenergy/MacroEnergy.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/macroenergy/MacroEnergy.jl/blob/main/docs/src/Manual/assets/battery.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Battery"><a class="docs-heading-anchor" href="#Battery">Battery</a><a id="Battery-1"></a><a class="docs-heading-anchor-permalink" href="#Battery" title="Permalink"></a></h1><h2 id="Contents"><a class="docs-heading-anchor" href="#Contents">Contents</a><a id="Contents-1"></a><a class="docs-heading-anchor-permalink" href="#Contents" title="Permalink"></a></h2><p><a href="#battery_overview">Overview</a> | <a href="#battery_asset_structure">Asset Structure</a> | <a href="#battery_symmetric_and_asymmetric">Symmetric and Asymmetric Battery</a> | <a href="#battery_input_file">Input File (Standard Format)</a> | <a href="#battery_type_definition">Types - Asset Structure</a> | <a href="#battery_constructors">Constructors</a> | <a href="#battery_examples">Examples</a> | <a href="#battery_best_practices">Best Practices</a> | <a href="#battery_advanced_json_csv_input_format">Input File (Advanced Format)</a></p><h2 id="battery_overview"><a class="docs-heading-anchor" href="#battery_overview">Overview</a><a id="battery_overview-1"></a><a class="docs-heading-anchor-permalink" href="#battery_overview" title="Permalink"></a></h2><p>Battery assets in Macro represent electricity storage technologies that can charge from and discharge to the electricity network. These assets are defined using either JSON or CSV input files placed in the <code>assets</code> directory, typically named <code>electricity_stor.json</code> or <code>electricity_stor.csv</code>.</p><h2 id="battery_asset_structure"><a class="docs-heading-anchor" href="#battery_asset_structure">Asset Structure</a><a id="battery_asset_structure-1"></a><a class="docs-heading-anchor-permalink" href="#battery_asset_structure" title="Permalink"></a></h2><p>A battery storage asset consists of three main components:</p><ol><li><strong>Storage Component</strong>: Tracks the energy level in the battery over time</li><li><strong>Charge Edge</strong>: Represents electricity flow from the grid to the battery</li><li><strong>Discharge Edge</strong>: Represents electricity flow from the battery to the grid</li></ol><p>Here is a graphical representation of the battery asset:</p><div class="mermaid">%%{init: {&#39;theme&#39;: &#39;base&#39;, &#39;themeVariables&#39;: { &#39;background&#39;: &#39;#D1EBDE&#39; }}}%%
flowchart LR
  subgraph Battery
  direction BT
    A((Electricity)) e1@--&gt;|Charge| B[Storage]
    B e2@--&gt;|Discharge| A
    e1@{ animate: true }
    e2@{ animate: true }
 end
    style A font-size:19px,r:55px,fill:#FFD700,stroke:black,color:black,stroke-dasharray: 3,5;
    style B fill:#FFD700,stroke:black,color:black;
    linkStyle 0,1 stroke:#FFD700, stroke-width: 2px;</div><h2 id="battery_symmetric_and_asymmetric"><a class="docs-heading-anchor" href="#battery_symmetric_and_asymmetric">Symmetric and Asymmetric Battery</a><a id="battery_symmetric_and_asymmetric-1"></a><a class="docs-heading-anchor-permalink" href="#battery_symmetric_and_asymmetric" title="Permalink"></a></h2><p>Macro supports a variety of battery technologies, both with symmetric and asymmetric charge/discharge capacities. Examples of symmetric batteries are lithium-ion batteries, while asymmetric batteries are thermal storage systems.</p><p>The user can configure the battery asset to be symmetric or asymmetric simply by using the input file as described in the following section. By default, the battery asset is configured to be symmetric.</p><h2 id="battery_input_file"><a class="docs-heading-anchor" href="#battery_input_file">Input File (Standard Format)</a><a id="battery_input_file-1"></a><a class="docs-heading-anchor-permalink" href="#battery_input_file" title="Permalink"></a></h2><p>The easiest way to include a battery asset in a model is to create a new file (either JSON or CSV) and place it in the <code>assets</code> directory together with the other assets. </p><pre><code class="nohighlight hljs">your_case/
├── assets/
│   ├── electricity_stor.json    # or electricity_stor.csv
│   ├── other_assets.json
│   └── ...
├── system/
├── settings/
└── ...</code></pre><p>This file can either be created manually, or using the <code>template_asset</code> function, as shown in the <a href="../../../Guides/User Guide/user_add_asset/#Adding-an-Asset-to-a-System">Adding an Asset to a System</a> section of the User Guide. The file will be automatically loaded when you run your Macro model. </p><p>The following is an example of a battery asset input file:</p><pre><code class="language-json hljs">{
    &quot;elec_stor&quot;: [
        {
            &quot;type&quot;: &quot;Battery&quot;,
            &quot;global_data&quot;: {
                &quot;storage_constraints&quot;: {
                    &quot;StorageMinDurationConstraint&quot;: true,
                    &quot;StorageMaxDurationConstraint&quot;: true,
                }
            },
            &quot;instance_data&quot;: [
                {
                    &quot;id&quot;: &quot;battery_1_SE&quot;,
                    &quot;location&quot;: &quot;SE&quot;,
                    &quot;storage_investment_cost&quot;: 10000,
                    &quot;storage_fixed_om_cost&quot;: 500,
                    &quot;storage_max_duration&quot;: 10,
                    &quot;storage_min_duration&quot;: 1,
                    &quot;discharge_investment_cost&quot;: 20000,
                    &quot;discharge_fixed_om_cost&quot;: 1000,
                    &quot;discharge_variable_om_cost&quot;: 1,
                    &quot;charge_variable_om_cost&quot;: 1,
                    &quot;discharge_efficiency&quot;: 0.95,
                    &quot;charge_efficiency&quot;: 0.95
                }
            ]
        }
    ]
}</code></pre><div class="admonition is-success" id="Global-Data-vs-Instance-Data-5ba887fd7a0395d1"><header class="admonition-header">Global Data vs Instance Data<a class="admonition-anchor" href="#Global-Data-vs-Instance-Data-5ba887fd7a0395d1" title="Permalink"></a></header><div class="admonition-body"><p>When working with JSON input files, the <code>global_data</code> field can be used to group data that is common to all instances of the same asset type. This is useful for setting constraints that are common to all instances of the same asset type and avoid repeating the same data for each instance. See the <a href="#battery_examples">Examples</a> section below for an example.</p></div></div><p>The following tables outlines the attributes that can be set for a battery asset.</p><h3 id="Essential-Attributes"><a class="docs-heading-anchor" href="#Essential-Attributes">Essential Attributes</a><a id="Essential-Attributes-1"></a><a class="docs-heading-anchor-permalink" href="#Essential-Attributes" title="Permalink"></a></h3><table><tr><th style="text-align: right">Field</th><th style="text-align: right">Type</th><th style="text-align: right">Description</th></tr><tr><td style="text-align: right"><code>Type</code></td><td style="text-align: right">String</td><td style="text-align: right">Asset type identifier: &quot;Battery&quot;</td></tr><tr><td style="text-align: right"><code>id</code></td><td style="text-align: right">String</td><td style="text-align: right">Unique identifier for the battery instance</td></tr><tr><td style="text-align: right"><code>location</code></td><td style="text-align: right">String</td><td style="text-align: right">Geographic location/node identifier</td></tr></table><h3 id="&quot;battery_constraints&quot;"><a class="docs-heading-anchor" href="#&quot;battery_constraints&quot;">Constraints configuration</a><a id="&quot;battery_constraints&quot;-1"></a><a class="docs-heading-anchor-permalink" href="#&quot;battery_constraints&quot;" title="Permalink"></a></h3><p>Battery assets can have different constraints applied to them, and the user can configure them using the following fields:</p><table><tr><th style="text-align: right">Field</th><th style="text-align: right">Type</th><th style="text-align: right">Description</th></tr><tr><td style="text-align: right"><code>storage_constraints</code></td><td style="text-align: right">Dict{String,Bool}</td><td style="text-align: right">List of constraints applied to the storage component.</td></tr><tr><td style="text-align: right"><code>discharge_constraints</code></td><td style="text-align: right">Dict{String,Bool}</td><td style="text-align: right">List of constraints applied to the discharge edge.</td></tr><tr><td style="text-align: right"><code>charge_constraints</code></td><td style="text-align: right">Dict{String,Bool}</td><td style="text-align: right">List of constraints applied to the charge edge.</td></tr></table><p>For example, if the user wants to apply the <a href="../../../Guides/User Guide/4_constraints/#storage_min_duration_constraint_ref"><code>StorageMinDurationConstraint</code></a> to the storage component and the <a href="../../../Guides/User Guide/4_constraints/#min_flow_constraint_ref"><code>MinFlowConstraint</code></a> to the discharge edge, the <code>storage_constraints</code> and <code>discharge_constraints</code> fields should be set to <code>{&quot;StorageMinDurationConstraint&quot;: true}</code> and <code>{&quot;MinFlowConstraint&quot;: true}</code>, respectively:</p><pre><code class="language-json hljs">{
    &quot;storage_constraints&quot;: {
        &quot;StorageMinDurationConstraint&quot;: true
    },
    &quot;discharge_constraints&quot;: {
        &quot;MinFlowConstraint&quot;: true
    }
}</code></pre><p>Users can refer to the <a href="../../../Guides/User Guide/user_asset_constraints/#Adding-Asset-Constraints-to-a-System">Adding Asset Constraints to a System</a> section of the User Guide for a list of all the constraints that can be applied to a battery asset.</p><h4 id="Default-constraints"><a class="docs-heading-anchor" href="#Default-constraints">Default constraints</a><a id="Default-constraints-1"></a><a class="docs-heading-anchor-permalink" href="#Default-constraints" title="Permalink"></a></h4><p>To simplify the input file and the asset configuration, the following constraints are applied to the battery asset by default:</p><ul><li><a href="../../../Guides/User Guide/4_constraints/#balance_constraint_ref">Balance constraint</a> (applied to the storage component)</li><li><a href="../../../Guides/User Guide/4_constraints/#storage_capacity_constraint_ref">Storage capacity constraint</a> (applied to the storage component)</li><li><a href="../../../Guides/User Guide/4_constraints/#storage_symmetric_capacity_constraint_ref">Storage symmetric capacity constraint</a> (applied to the storage component)</li><li><a href="../../../Guides/User Guide/4_constraints/#capacity_constraint_ref">Capacity constraint</a> (applied to the discharge edge)</li><li><a href="../../../Guides/User Guide/4_constraints/#storage_discharge_limit_constraint_ref">Storage discharge limit constraint</a> (applied to the discharge edge)</li></ul><p>If the storage is a long-duration storage, the following additional constraints are applied:</p><ul><li><a href="../../../Guides/User Guide/4_constraints/#long_duration_storage_constraints_ref">Long-duration storage constraints</a> (applied to the storage component)</li></ul><h3 id="Investment-Parameters"><a class="docs-heading-anchor" href="#Investment-Parameters">Investment Parameters</a><a id="Investment-Parameters-1"></a><a class="docs-heading-anchor-permalink" href="#Investment-Parameters" title="Permalink"></a></h3><table><tr><th style="text-align: right">Field</th><th style="text-align: right">Type</th><th style="text-align: right">Description</th><th style="text-align: right">Units</th><th style="text-align: right">Default</th></tr><tr><td style="text-align: right"><code>storage_can_retire</code></td><td style="text-align: right">Boolean</td><td style="text-align: right">Whether storage capacity can be retired</td><td style="text-align: right">-</td><td style="text-align: right">true</td></tr><tr><td style="text-align: right"><code>storage_can_expand</code></td><td style="text-align: right">Boolean</td><td style="text-align: right">Whether storage capacity can be expanded</td><td style="text-align: right">-</td><td style="text-align: right">true</td></tr><tr><td style="text-align: right"><code>storage_existing_capacity</code></td><td style="text-align: right">Float64</td><td style="text-align: right">Initial installed storage capacity</td><td style="text-align: right">MWh</td><td style="text-align: right">0.0</td></tr><tr><td style="text-align: right"><code>storage_capacity_size</code></td><td style="text-align: right">Float64</td><td style="text-align: right">Unit size for capacity decisions</td><td style="text-align: right">-</td><td style="text-align: right">1.0</td></tr><tr><td style="text-align: right"><code>discharge_can_retire</code></td><td style="text-align: right">Boolean</td><td style="text-align: right">Whether discharge capacity can be retired</td><td style="text-align: right">-</td><td style="text-align: right">true</td></tr><tr><td style="text-align: right"><code>discharge_can_expand</code></td><td style="text-align: right">Boolean</td><td style="text-align: right">Whether discharge capacity can be expanded</td><td style="text-align: right">-</td><td style="text-align: right">true</td></tr><tr><td style="text-align: right"><code>discharge_existing_capacity</code></td><td style="text-align: right">Float64</td><td style="text-align: right">Initial installed discharge capacity</td><td style="text-align: right">MWh/hr</td><td style="text-align: right">0.0</td></tr><tr><td style="text-align: right"><code>discharge_capacity_size</code></td><td style="text-align: right">Float64</td><td style="text-align: right">Unit size for capacity decisions</td><td style="text-align: right">-</td><td style="text-align: right">1.0</td></tr></table><h5 id="Asymmetric-battery"><a class="docs-heading-anchor" href="#Asymmetric-battery">Asymmetric battery</a><a id="Asymmetric-battery-1"></a><a class="docs-heading-anchor-permalink" href="#Asymmetric-battery" title="Permalink"></a></h5><p>If the battery is asymmetric, the following investment parameters are also used:</p><table><tr><th style="text-align: right">Field</th><th style="text-align: right">Type</th><th style="text-align: right">Description</th><th style="text-align: right">Units</th><th style="text-align: right">Default</th></tr><tr><td style="text-align: right"><code>charge_has_capacity</code></td><td style="text-align: right">Boolean</td><td style="text-align: right">Whether the charge edge has capacity variables and limits</td><td style="text-align: right">-</td><td style="text-align: right">false</td></tr><tr><td style="text-align: right"><code>charge_can_retire</code></td><td style="text-align: right">Boolean</td><td style="text-align: right">Whether charge capacity can be retired</td><td style="text-align: right">-</td><td style="text-align: right">false</td></tr><tr><td style="text-align: right"><code>charge_can_expand</code></td><td style="text-align: right">Boolean</td><td style="text-align: right">Whether charge capacity can be expanded</td><td style="text-align: right">-</td><td style="text-align: right">false</td></tr><tr><td style="text-align: right"><code>charge_existing_capacity</code></td><td style="text-align: right">Float64</td><td style="text-align: right">Initial installed charge capacity</td><td style="text-align: right">MWh/hr</td><td style="text-align: right">0.0</td></tr><tr><td style="text-align: right"><code>charge_capacity_size</code></td><td style="text-align: right">Float64</td><td style="text-align: right">Unit size for capacity decisions</td><td style="text-align: right">-</td><td style="text-align: right">1.0</td></tr></table><h4 id="Additional-Investment-Parameters"><a class="docs-heading-anchor" href="#Additional-Investment-Parameters">Additional Investment Parameters</a><a id="Additional-Investment-Parameters-1"></a><a class="docs-heading-anchor-permalink" href="#Additional-Investment-Parameters" title="Permalink"></a></h4><p><strong>Maximum and minimum capacity constraints</strong></p><p>If <a href="../../../Guides/User Guide/4_constraints/#max_capacity_constraint_ref"><code>MaxCapacityConstraint</code></a> or <a href="../../../Guides/User Guide/4_constraints/#min_capacity_constraint_ref"><code>MinCapacityConstraint</code></a> are added to the constraints dictionary for any of the three components, the following parameters are used by Macro:</p><table><tr><th style="text-align: right">Field</th><th style="text-align: right">Type</th><th style="text-align: right">Description</th><th style="text-align: right">Units</th><th style="text-align: right">Default</th></tr><tr><td style="text-align: right"><code>storage_max_capacity</code></td><td style="text-align: right">Float64</td><td style="text-align: right">Maximum allowed storage capacity</td><td style="text-align: right">MWh</td><td style="text-align: right">Inf</td></tr><tr><td style="text-align: right"><code>storage_min_capacity</code></td><td style="text-align: right">Float64</td><td style="text-align: right">Minimum allowed storage capacity</td><td style="text-align: right">MWh</td><td style="text-align: right">0.0</td></tr><tr><td style="text-align: right"><code>discharge_max_capacity</code></td><td style="text-align: right">Float64</td><td style="text-align: right">Maximum allowed discharge capacity</td><td style="text-align: right">MWh/hr</td><td style="text-align: right">Inf</td></tr><tr><td style="text-align: right"><code>discharge_min_capacity</code></td><td style="text-align: right">Float64</td><td style="text-align: right">Minimum allowed discharge capacity</td><td style="text-align: right">MWh/hr</td><td style="text-align: right">0.0</td></tr><tr><td style="text-align: right"><code>charge_max_capacity</code></td><td style="text-align: right">Float64</td><td style="text-align: right">Maximum allowed charge capacity</td><td style="text-align: right">MWh/hr</td><td style="text-align: right">Inf</td></tr><tr><td style="text-align: right"><code>charge_min_capacity</code></td><td style="text-align: right">Float64</td><td style="text-align: right">Minimum allowed charge capacity</td><td style="text-align: right">MWh/hr</td><td style="text-align: right">0.0</td></tr></table><h3 id="Economic-Parameters"><a class="docs-heading-anchor" href="#Economic-Parameters">Economic Parameters</a><a id="Economic-Parameters-1"></a><a class="docs-heading-anchor-permalink" href="#Economic-Parameters" title="Permalink"></a></h3><table><tr><th style="text-align: right">Field</th><th style="text-align: right">Type</th><th style="text-align: right">Description</th><th style="text-align: right">Units</th><th style="text-align: right">Default</th></tr><tr><td style="text-align: right"><code>storage_investment_cost</code></td><td style="text-align: right">Float64</td><td style="text-align: right">CAPEX per unit storage capacity</td><td style="text-align: right"><span>$</span>/MWh</td><td style="text-align: right">0.0</td></tr><tr><td style="text-align: right"><code>storage_annualized_investment_cost</code></td><td style="text-align: right">Union{Nothing,Float64}</td><td style="text-align: right">Annualized CAPEX</td><td style="text-align: right"><span>$</span>/MWh/yr</td><td style="text-align: right">calculated</td></tr><tr><td style="text-align: right"><code>storage_fixed_om_cost</code></td><td style="text-align: right">Float64</td><td style="text-align: right">Fixed O&amp;M costs of the storage component</td><td style="text-align: right"><span>$</span>/MWh/yr</td><td style="text-align: right">0.0</td></tr><tr><td style="text-align: right"><code>storage_variable_om_cost</code></td><td style="text-align: right">Float64</td><td style="text-align: right">Variable O&amp;M costs of the storage component</td><td style="text-align: right"><span>$</span>/MWh</td><td style="text-align: right">0.0</td></tr><tr><td style="text-align: right"><code>storage_wacc</code></td><td style="text-align: right">Float64</td><td style="text-align: right">Weighted average cost of capital</td><td style="text-align: right">fraction</td><td style="text-align: right">0.0</td></tr><tr><td style="text-align: right"><code>storage_lifetime</code></td><td style="text-align: right">Int</td><td style="text-align: right">Asset lifetime in years</td><td style="text-align: right">years</td><td style="text-align: right">1</td></tr><tr><td style="text-align: right"><code>storage_capital_recovery_period</code></td><td style="text-align: right">Int</td><td style="text-align: right">Investment recovery period</td><td style="text-align: right">years</td><td style="text-align: right">1</td></tr><tr><td style="text-align: right"><code>storage_retirement_period</code></td><td style="text-align: right">Int</td><td style="text-align: right">Retirement period</td><td style="text-align: right">years</td><td style="text-align: right">0</td></tr><tr><td style="text-align: right"><code>discharge_investment_cost</code></td><td style="text-align: right">Float64</td><td style="text-align: right">CAPEX per unit discharge capacity</td><td style="text-align: right"><span>$</span>/MW</td><td style="text-align: right">0.0</td></tr><tr><td style="text-align: right"><code>discharge_annualized_investment_cost</code></td><td style="text-align: right">Union{Nothing,Float64}</td><td style="text-align: right">Annualized CAPEX</td><td style="text-align: right"><span>$</span>/MW/yr</td><td style="text-align: right">calculated</td></tr><tr><td style="text-align: right"><code>discharge_fixed_om_cost</code></td><td style="text-align: right">Float64</td><td style="text-align: right">Fixed O&amp;M costs of the discharge edge</td><td style="text-align: right"><span>$</span>/MW/yr</td><td style="text-align: right">0.0</td></tr><tr><td style="text-align: right"><code>discharge_variable_om_cost</code></td><td style="text-align: right">Float64</td><td style="text-align: right">Variable O&amp;M costs of the discharge edge</td><td style="text-align: right"><span>$</span>/MWh</td><td style="text-align: right">0.0</td></tr><tr><td style="text-align: right"><code>discharge_wacc</code></td><td style="text-align: right">Float64</td><td style="text-align: right">Weighted average cost of capital</td><td style="text-align: right">fraction</td><td style="text-align: right">0.0</td></tr><tr><td style="text-align: right"><code>discharge_lifetime</code></td><td style="text-align: right">Int</td><td style="text-align: right">Asset lifetime in years</td><td style="text-align: right">years</td><td style="text-align: right">1</td></tr><tr><td style="text-align: right"><code>discharge_capital_recovery_period</code></td><td style="text-align: right">Int</td><td style="text-align: right">Investment recovery period</td><td style="text-align: right">years</td><td style="text-align: right">1</td></tr><tr><td style="text-align: right"><code>discharge_retirement_period</code></td><td style="text-align: right">Int</td><td style="text-align: right">Retirement period</td><td style="text-align: right">years</td><td style="text-align: right">0</td></tr><tr><td style="text-align: right"><code>charge_variable_om_cost</code></td><td style="text-align: right">Float64</td><td style="text-align: right">Variable O&amp;M costs of the charge edge</td><td style="text-align: right"><span>$</span>/MWh</td><td style="text-align: right">0.0</td></tr></table><h5 id="Asymmetric-battery-2"><a class="docs-heading-anchor" href="#Asymmetric-battery-2">Asymmetric battery</a><a class="docs-heading-anchor-permalink" href="#Asymmetric-battery-2" title="Permalink"></a></h5><p>If the battery is asymmetric, the following economic parameters are also used:</p><table><tr><th style="text-align: right">Field</th><th style="text-align: right">Type</th><th style="text-align: right">Description</th><th style="text-align: right">Units</th><th style="text-align: right">Default</th></tr><tr><td style="text-align: right"><code>charge_investment_cost</code></td><td style="text-align: right">Float64</td><td style="text-align: right">CAPEX per unit charge capacity</td><td style="text-align: right"><span>$</span>/MW</td><td style="text-align: right">0.0</td></tr><tr><td style="text-align: right"><code>charge_annualized_investment_cost</code></td><td style="text-align: right">Union{Nothing,Float64}</td><td style="text-align: right">Annualized CAPEX</td><td style="text-align: right"><span>$</span>/MW/yr</td><td style="text-align: right">calculated</td></tr><tr><td style="text-align: right"><code>charge_fixed_om_cost</code></td><td style="text-align: right">Float64</td><td style="text-align: right">Fixed O&amp;M costs of the charge edge</td><td style="text-align: right"><span>$</span>/MW/yr</td><td style="text-align: right">0.0</td></tr></table><h3 id="Charge-and-Discharge-Efficiency"><a class="docs-heading-anchor" href="#Charge-and-Discharge-Efficiency">Charge and Discharge Efficiency</a><a id="Charge-and-Discharge-Efficiency-1"></a><a class="docs-heading-anchor-permalink" href="#Charge-and-Discharge-Efficiency" title="Permalink"></a></h3><table><tr><th style="text-align: right">Field</th><th style="text-align: right">Type</th><th style="text-align: right">Description</th><th style="text-align: right">Default</th></tr><tr><td style="text-align: right"><code>discharge_efficiency</code></td><td style="text-align: right">Float64</td><td style="text-align: right">Efficiency of discharging process</td><td style="text-align: right">1.0</td></tr><tr><td style="text-align: right"><code>charge_efficiency</code></td><td style="text-align: right">Float64</td><td style="text-align: right">Efficiency of charging process</td><td style="text-align: right">1.0</td></tr></table><h3 id="Operational-Parameters"><a class="docs-heading-anchor" href="#Operational-Parameters">Operational Parameters</a><a id="Operational-Parameters-1"></a><a class="docs-heading-anchor-permalink" href="#Operational-Parameters" title="Permalink"></a></h3><table><tr><th style="text-align: right">Field</th><th style="text-align: right">Type</th><th style="text-align: right">Description</th><th style="text-align: right">Units</th><th style="text-align: right">Default</th></tr><tr><td style="text-align: right"><code>storage_loss_fraction</code></td><td style="text-align: right">Float64</td><td style="text-align: right">Fraction of stored energy lost per timestep</td><td style="text-align: right">fraction</td><td style="text-align: right">0.0</td></tr></table><h4 id="Additional-Operational-Parameters"><a class="docs-heading-anchor" href="#Additional-Operational-Parameters">Additional Operational Parameters</a><a id="Additional-Operational-Parameters-1"></a><a class="docs-heading-anchor-permalink" href="#Additional-Operational-Parameters" title="Permalink"></a></h4><p><strong>Storage duration constraints</strong></p><p>If <a href="../../../Guides/User Guide/4_constraints/#storage_max_duration_constraint_ref"><code>StorageMaxDurationConstraint</code></a> or <a href="../../../Guides/User Guide/4_constraints/#storage_min_duration_constraint_ref"><code>StorageMinDurationConstraint</code></a> are added to the constraints dictionary for the storage component, the following parameters are used:</p><table><tr><th style="text-align: right">Field</th><th style="text-align: right">Type</th><th style="text-align: right">Description</th><th style="text-align: right">Units</th><th style="text-align: right">Default</th></tr><tr><td style="text-align: right"><code>storage_max_duration</code></td><td style="text-align: right">Float64</td><td style="text-align: right">Maximum storage duration</td><td style="text-align: right">hours</td><td style="text-align: right">0.0</td></tr><tr><td style="text-align: right"><code>storage_min_duration</code></td><td style="text-align: right">Float64</td><td style="text-align: right">Minimum storage duration</td><td style="text-align: right">hours</td><td style="text-align: right">0.0</td></tr></table><p><strong>Maximum and minimum storage level constraints</strong></p><p>If <a href="../../../Guides/User Guide/4_constraints/#max_storage_level_constraint_ref"><code>MaxStorageLevelConstraint</code></a> or <a href="../../../Guides/User Guide/4_constraints/#min_storage_level_constraint_ref"><code>MinStorageLevelConstraint</code></a> are added to the constraints dictionary for the storage component, the following parameters are used:</p><table><tr><th style="text-align: right">Field</th><th style="text-align: right">Type</th><th style="text-align: right">Description</th><th style="text-align: right">Units</th><th style="text-align: right">Default</th></tr><tr><td style="text-align: right"><code>storage_max_storage_level</code></td><td style="text-align: right">Float64</td><td style="text-align: right">Maximum storage level as fraction of capacity</td><td style="text-align: right">fraction</td><td style="text-align: right">0.0</td></tr><tr><td style="text-align: right"><code>storage_min_storage_level</code></td><td style="text-align: right">Float64</td><td style="text-align: right">Minimum storage level as fraction of capacity</td><td style="text-align: right">fraction</td><td style="text-align: right">0.0</td></tr></table><p><strong>Storage charge/discharge ratio constraint</strong></p><p>If <a href="../../../Guides/User Guide/4_constraints/#storage_charge_discharge_ratio_constraint_ref"><code>StorageChargeDischargeRatioConstraint</code></a> is added to the constraints dictionary for the storage component, the following parameter is used:</p><table><tr><th style="text-align: right">Field</th><th style="text-align: right">Type</th><th style="text-align: right">Description</th><th style="text-align: right">Units</th><th style="text-align: right">Default</th></tr><tr><td style="text-align: right"><code>storage_charge_discharge_ratio</code></td><td style="text-align: right">Float64</td><td style="text-align: right">Ratio between charging and discharging rates</td><td style="text-align: right">fraction</td><td style="text-align: right">1.0</td></tr></table><p><strong>Long-duration storage constraint</strong></p><p>If <a href="../../../Guides/User Guide/4_constraints/#long_duration_storage_constraints_ref"><code>LongDurationStorageImplicitMinMaxConstraint</code></a> is added to the constraints dictionary for the storage component, the following parameter is used:</p><table><tr><th style="text-align: right">Field</th><th style="text-align: right">Type</th><th style="text-align: right">Description</th><th style="text-align: right">Default</th></tr><tr><td style="text-align: right"><code>storage_long_duration</code></td><td style="text-align: right">Boolean</td><td style="text-align: right">Whether this is long-duration storage</td><td style="text-align: right">false</td></tr></table><p><strong>Minimum flow constraint</strong></p><p>If <a href="../../../Guides/User Guide/4_constraints/#min_flow_constraint_ref"><code>MinFlowConstraint</code></a> is added to the constraints dictionary for the discharge edge, the following parameter is used:</p><table><tr><th style="text-align: right">Field</th><th style="text-align: right">Type</th><th style="text-align: right">Description</th><th style="text-align: right">Units</th><th style="text-align: right">Default</th></tr><tr><td style="text-align: right"><code>discharge_min_flow_fraction</code></td><td style="text-align: right">Float64</td><td style="text-align: right">Minimum discharge as fraction of capacity</td><td style="text-align: right">fraction</td><td style="text-align: right">0.0</td></tr><tr><td style="text-align: right"><code>charge_min_flow_fraction</code></td><td style="text-align: right">Float64</td><td style="text-align: right">Minimum charge as fraction of capacity</td><td style="text-align: right">fraction</td><td style="text-align: right">0.0</td></tr></table><p><strong>Ramping limit constraint</strong></p><p>If <a href="../../../Guides/User Guide/4_constraints/#ramping_limits_constraint_ref"><code>RampingLimitConstraint</code></a> is added to the constraints dictionary for the discharge edge, the following parameter is used:</p><table><tr><th style="text-align: right">Field</th><th style="text-align: right">Type</th><th style="text-align: right">Description</th><th style="text-align: right">Units</th><th style="text-align: right">Default</th></tr><tr><td style="text-align: right"><code>discharge_ramp_up_fraction</code></td><td style="text-align: right">Float64</td><td style="text-align: right">Maximum increase in discharge between timesteps</td><td style="text-align: right">fraction</td><td style="text-align: right">1.0</td></tr><tr><td style="text-align: right"><code>discharge_ramp_down_fraction</code></td><td style="text-align: right">Float64</td><td style="text-align: right">Maximum decrease in discharge between timesteps</td><td style="text-align: right">fraction</td><td style="text-align: right">1.0</td></tr><tr><td style="text-align: right"><code>charge_ramp_up_fraction</code></td><td style="text-align: right">Float64</td><td style="text-align: right">Maximum increase in charge between timesteps</td><td style="text-align: right">fraction</td><td style="text-align: right">1.0</td></tr><tr><td style="text-align: right"><code>charge_ramp_down_fraction</code></td><td style="text-align: right">Float64</td><td style="text-align: right">Maximum decrease in charge between timesteps</td><td style="text-align: right">fraction</td><td style="text-align: right">1.0</td></tr></table><h2 id="battery_type_definition"><a class="docs-heading-anchor" href="#battery_type_definition">Types - Asset Structure</a><a id="battery_type_definition-1"></a><a class="docs-heading-anchor-permalink" href="#battery_type_definition" title="Permalink"></a></h2><p>The <code>Battery</code> asset is defined as follows:</p><pre><code class="language-julia hljs">struct Battery &lt;: AbstractAsset
    id::AssetId
    battery_storage::AbstractStorage{&lt;:Electricity}
    discharge_edge::Edge{&lt;:Electricity}
    charge_edge::Edge{&lt;:Electricity}
end</code></pre><h2 id="battery_constructors"><a class="docs-heading-anchor" href="#battery_constructors">Constructors</a><a id="battery_constructors-1"></a><a class="docs-heading-anchor-permalink" href="#battery_constructors" title="Permalink"></a></h2><h3 id="Default-constructor"><a class="docs-heading-anchor" href="#Default-constructor">Default constructor</a><a id="Default-constructor-1"></a><a class="docs-heading-anchor-permalink" href="#Default-constructor" title="Permalink"></a></h3><pre><code class="language-julia hljs">Battery(id::AssetId, storage::AbstractStorage{&lt;:Electricity}, discharge_edge::Edge{&lt;:Electricity}, charge_edge::Edge{&lt;:Electricity})</code></pre><h3 id="Factory-constructor"><a class="docs-heading-anchor" href="#Factory-constructor">Factory constructor</a><a id="Factory-constructor-1"></a><a class="docs-heading-anchor-permalink" href="#Factory-constructor" title="Permalink"></a></h3><pre><code class="language-julia hljs">make(asset_type::Type{Battery}, data::AbstractDict{Symbol,Any}, system::System)</code></pre><table><tr><th style="text-align: right">Field</th><th style="text-align: right">Type</th><th style="text-align: right">Description</th></tr><tr><td style="text-align: right"><code>asset_type</code></td><td style="text-align: right"><code>Type{Battery}</code></td><td style="text-align: right">Macro type of the asset</td></tr><tr><td style="text-align: right"><code>data</code></td><td style="text-align: right"><code>AbstractDict{Symbol,Any}</code></td><td style="text-align: right">Dictionary containing the input data for the asset</td></tr><tr><td style="text-align: right"><code>system</code></td><td style="text-align: right"><code>System</code></td><td style="text-align: right">System to which the asset belongs</td></tr></table><h2 id="battery_examples"><a class="docs-heading-anchor" href="#battery_examples">Examples</a><a id="battery_examples-1"></a><a class="docs-heading-anchor-permalink" href="#battery_examples" title="Permalink"></a></h2><p>This section contains examples of how to use the battery asset in a Macro model.</p><h3 id="Two-batteries-in-the-same-zone-&quot;SE&quot;"><a class="docs-heading-anchor" href="#Two-batteries-in-the-same-zone-&quot;SE&quot;">Two batteries in the same zone &quot;SE&quot;</a><a id="Two-batteries-in-the-same-zone-&quot;SE&quot;-1"></a><a class="docs-heading-anchor-permalink" href="#Two-batteries-in-the-same-zone-&quot;SE&quot;" title="Permalink"></a></h3><p>This example shows two batteries in the same zone &quot;SE&quot; with different investment costs and O&amp;M costs. The discharge efficiency and charge efficiency are set to 0.95 and 0.92, respectively. Both batteries have the <a href="../../../Guides/User Guide/4_constraints/#storage_min_duration_constraint_ref"><code>StorageMinDurationConstraint</code></a> and <a href="../../../Guides/User Guide/4_constraints/#storage_max_duration_constraint_ref"><code>StorageMaxDurationConstraint</code></a> constraints applied to the storage component.</p><p><strong>JSON Format:</strong></p><p>Note that the <code>global_data</code> field is used to set the fields and constraints that are common to all instances of the same asset type.</p><pre><code class="language-json hljs">{
    &quot;elec_stor&quot;: [
        {
            &quot;type&quot;: &quot;Battery&quot;,
            &quot;global_data&quot;: {
                &quot;storage_constraints&quot;: {
                    &quot;StorageMinDurationConstraint&quot;: true,
                    &quot;StorageMaxDurationConstraint&quot;: true,
                }
            },
            &quot;instance_data&quot;: [
                {
                    &quot;id&quot;: &quot;battery_1_SE&quot;,
                    &quot;location&quot;: &quot;SE&quot;,
                    &quot;storage_investment_cost&quot;: 10000,
                    &quot;storage_fixed_om_cost&quot;: 500,
                    &quot;storage_max_duration&quot;: 10,
                    &quot;storage_min_duration&quot;: 1,
                    &quot;discharge_investment_cost&quot;: 20000,
                    &quot;discharge_fixed_om_cost&quot;: 1000,
                    &quot;discharge_variable_om_cost&quot;: 1,
                    &quot;charge_variable_om_cost&quot;: 1,
                    &quot;discharge_efficiency&quot;: 0.95,
                    &quot;charge_efficiency&quot;: 0.95
                },
                {
                    &quot;id&quot;: &quot;battery_2_SE&quot;,
                    &quot;location&quot;: &quot;SE&quot;,
                    &quot;storage_investment_cost&quot;: 15000,
                    &quot;storage_fixed_om_cost&quot;: 800,
                    &quot;storage_max_duration&quot;: 4,
                    &quot;storage_min_duration&quot;: 1,
                    &quot;discharge_investment_cost&quot;: 25000,
                    &quot;discharge_fixed_om_cost&quot;: 1200,
                    &quot;discharge_variable_om_cost&quot;: 1.2,
                    &quot;charge_variable_om_cost&quot;: 1.2,
                    &quot;discharge_efficiency&quot;: 0.92,
                    &quot;charge_efficiency&quot;: 0.92
                }
            ]
        }
    ]
}</code></pre><p><strong>CSV Format:</strong></p><table><tr><th style="text-align: right">Type</th><th style="text-align: right">id</th><th style="text-align: right">location</th><th style="text-align: right">storage_constraints–StorageMinDurationConstraint</th><th style="text-align: right">storage_constraints–StorageMaxDurationConstraint</th><th style="text-align: right">storage_investment_cost</th><th style="text-align: right">storage_fixed_om_cost</th><th style="text-align: right">storage_max_duration</th><th style="text-align: right">storage_min_duration</th><th style="text-align: right">discharge_investment_cost</th><th style="text-align: right">discharge_fixed_om_cost</th><th style="text-align: right">discharge_variable_om_cost</th><th style="text-align: right">charge_variable_om_cost</th><th style="text-align: right">discharge_efficiency</th><th style="text-align: right">charge_efficiency</th></tr><tr><td style="text-align: right">Battery</td><td style="text-align: right">battery_1_SE</td><td style="text-align: right">SE</td><td style="text-align: right">true</td><td style="text-align: right">true</td><td style="text-align: right">10000</td><td style="text-align: right">500</td><td style="text-align: right">10</td><td style="text-align: right">1</td><td style="text-align: right">20000</td><td style="text-align: right">1000</td><td style="text-align: right">1</td><td style="text-align: right">1</td><td style="text-align: right">0.95</td><td style="text-align: right">0.95</td></tr><tr><td style="text-align: right">Battery</td><td style="text-align: right">battery_2_SE</td><td style="text-align: right">SE</td><td style="text-align: right">true</td><td style="text-align: right">true</td><td style="text-align: right">15000</td><td style="text-align: right">800</td><td style="text-align: right">4</td><td style="text-align: right">1</td><td style="text-align: right">25000</td><td style="text-align: right">1200</td><td style="text-align: right">1.2</td><td style="text-align: right">1.2</td><td style="text-align: right">0.92</td><td style="text-align: right">0.92</td></tr></table><h3 id="Pumped-Hydro-Storage"><a class="docs-heading-anchor" href="#Pumped-Hydro-Storage">Pumped Hydro Storage</a><a id="Pumped-Hydro-Storage-1"></a><a class="docs-heading-anchor-permalink" href="#Pumped-Hydro-Storage" title="Permalink"></a></h3><p>This example shows a pumped hydro storage asset with a fixed discharge and storage capacity (capacity cannot be expanded or retired) and a minimum discharge flow constraint of 0.5.</p><p><strong>JSON Format:</strong></p><pre><code class="language-json hljs">{
    &quot;elec_stor&quot;: [
        {
            &quot;type&quot;: &quot;Battery&quot;,
            &quot;global_data&quot;: {
                &quot;discharge_can_expand&quot;: false,
                &quot;discharge_can_retire&quot;: false,
                &quot;storage_can_expand&quot;: false,
                &quot;storage_can_retire&quot;: false,
                &quot;discharge_constraints&quot;: {
                    &quot;MinFlowConstraint&quot;: true
                }
            },
            &quot;instance_data&quot;: [
                {
                    &quot;id&quot;: &quot;pumpedhydro_SE&quot;,
                    &quot;location&quot;: &quot;SE&quot;,
                    &quot;discharge_capacity_size&quot;: 200,
                    &quot;discharge_existing_capacity&quot;: 5000,
                    &quot;discharge_fixed_om_cost&quot;: 40000,
                    &quot;discharge_min_flow_fraction&quot;: 0.5,
                    &quot;discharge_efficiency&quot;: 0.87,
                    &quot;charge_efficiency&quot;: 0.87
                }
            ]
        }
    ]
}</code></pre><p><strong>CSV Format:</strong></p><table><tr><th style="text-align: right">Type</th><th style="text-align: right">id</th><th style="text-align: right">location</th><th style="text-align: right">discharge_can_expand</th><th style="text-align: right">discharge_can_retire</th><th style="text-align: right">storage_can_expand</th><th style="text-align: right">storage_can_retire</th><th style="text-align: right">discharge_constraints–MinFlowConstraint</th><th style="text-align: right">discharge_capacity_size</th><th style="text-align: right">discharge_existing_capacity</th><th style="text-align: right">discharge_fixed_om_cost</th><th style="text-align: right">discharge_min_flow_fraction</th><th style="text-align: right">discharge_efficiency</th><th style="text-align: right">charge_efficiency</th></tr><tr><td style="text-align: right">Battery</td><td style="text-align: right">pumpedhydro_SE</td><td style="text-align: right">SE</td><td style="text-align: right">false</td><td style="text-align: right">false</td><td style="text-align: right">false</td><td style="text-align: right">false</td><td style="text-align: right">true</td><td style="text-align: right">200</td><td style="text-align: right">5000</td><td style="text-align: right">40000</td><td style="text-align: right">0.5</td><td style="text-align: right">0.87</td><td style="text-align: right">0.87</td></tr></table><h2 id="battery_best_practices"><a class="docs-heading-anchor" href="#battery_best_practices">Best Practices</a><a id="battery_best_practices-1"></a><a class="docs-heading-anchor-permalink" href="#battery_best_practices" title="Permalink"></a></h2><ol><li><strong>Use global data for common fields and constraints</strong>: Use the <code>global_data</code> field to set the fields and constraints that are common to all instances of the same asset type.</li><li><strong>Set realistic efficiencies</strong>: Make sure the efficiencies are realistic for the technology being modeled</li><li><strong>Use meaningful IDs</strong>: Choose descriptive identifiers that indicate location and technology type</li><li><strong>Consider duration constraints</strong>: Set appropriate min/max duration based on technology</li><li><strong>Use constraints selectively</strong>: Only enable constraints that are necessary for your modeling needs</li><li><strong>Validate costs</strong>: Ensure investment and O&amp;M costs are in appropriate units</li><li><strong>Test configurations</strong>: Start with simple configurations and gradually add complexity</li></ol><h2 id="battery_advanced_json_csv_input_format"><a class="docs-heading-anchor" href="#battery_advanced_json_csv_input_format">Input File (Advanced Format)</a><a id="battery_advanced_json_csv_input_format-1"></a><a class="docs-heading-anchor-permalink" href="#battery_advanced_json_csv_input_format" title="Permalink"></a></h2><p>Macro provides an advanced format for defining battery assets, offering users and modelers detailed control over asset specifications. This format builds upon the standard format and is ideal for those who need more comprehensive customization.</p><p>To understand the advanced format, consider the <a href="#battery_asset_structure">graph representation</a> and the <a href="#battery_type_definition">type definition</a> of a battery asset. The input file mirrors this hierarchical structure.</p><p>A battery asset in Macro is composed of a storage component, represented by a <code>Storage</code> object, and two edges (charge and discharge), each represented by an <code>Edge</code> object. The input file for a battery asset is therefore organized as follows:</p><pre><code class="language-json hljs">{
    &quot;storage&quot;:{
        // ... storage-specific attributes ...
    },
    &quot;edges&quot;:{
        &quot;charge_edge&quot;: {
            // ... charge_edge-specific attributes ...
        },
        &quot;discharge_edge&quot;: {
            // ... discharge_edge-specific attributes ...
        }
    }
}</code></pre><p>Each top-level key (e.g., &quot;storage&quot; or &quot;edges&quot;) denotes a component type. The second-level keys either specify the attributes of the component (when there is a single instance) or identify the instances of the component (e.g., &quot;discharge_edge&quot; or &quot;charge_edge&quot;) when there are multiple instances. For multiple instances, a third-level key details the attributes for each instance.</p><p>Below is an example of an input file for a battery asset that sets up three batteries, located in the SE, MIDAT, and NE regions.</p><pre><code class="language-json hljs">{
    &quot;elec_stor&quot;: [
        {
            &quot;type&quot;: &quot;Battery&quot;,
            &quot;global_data&quot;: {
                &quot;storage&quot;: {
                    &quot;commodity&quot;: &quot;Electricity&quot;,
                    &quot;can_expand&quot;: true,
                    &quot;can_retire&quot;: false,
                    &quot;constraints&quot;: {
                        &quot;StorageMinDurationConstraint&quot;: true,
                        &quot;StorageMaxDurationConstraint&quot;: true,
                    }
                },
                &quot;edges&quot;: {
                    &quot;discharge_edge&quot;: {
                        &quot;type&quot;: &quot;Electricity&quot;,
                        &quot;unidirectional&quot;: true,
                        &quot;has_capacity&quot;: true,
                        &quot;can_expand&quot;: true,
                        &quot;can_retire&quot;: false,
                        &quot;constraints&quot;: {
                            &quot;CapacityConstraint&quot;: true,
                            &quot;StorageDischargeLimitConstraint&quot;: true
                        }
                    },
                    &quot;charge_edge&quot;: {
                        &quot;type&quot;: &quot;Electricity&quot;,
                        &quot;unidirectional&quot;: true,
                        &quot;has_capacity&quot;: false
                    }
                }
            },
            &quot;instance_data&quot;: [
                {
                    &quot;id&quot;: &quot;battery_SE&quot;,
                    &quot;edges&quot;: {
                        &quot;discharge_edge&quot;: {
                            &quot;end_vertex&quot;: &quot;elec_SE&quot;,
                            &quot;capacity_size&quot;: 1.0,
                            &quot;existing_capacity&quot;: 0.0,
                            &quot;fixed_om_cost&quot;: 4536.98,
                            &quot;investment_cost&quot;: 17239.56121,
                            &quot;variable_om_cost&quot;: 0.15,
                            &quot;efficiency&quot;: 0.92
                        },
                        &quot;charge_edge&quot;: {
                            &quot;start_vertex&quot;: &quot;elec_SE&quot;,
                            &quot;efficiency&quot;: 0.92,
                            &quot;variable_om_cost&quot;: 0.15
                        }
                    },
                    &quot;storage&quot;: {
                        &quot;existing_capacity&quot;: 0.0,
                        &quot;fixed_om_cost&quot;: 2541.19,
                        &quot;investment_cost&quot;: 9656.002735,
                        &quot;max_duration&quot;: 10,
                        &quot;min_duration&quot;: 1
                    }
                },
                {
                    &quot;id&quot;: &quot;battery_MIDAT&quot;,
                    &quot;edges&quot;: {
                        &quot;discharge_edge&quot;: {
                            &quot;end_vertex&quot;: &quot;elec_SE&quot;,
                            &quot;capacity_size&quot;: 1.0,
                            &quot;existing_capacity&quot;: 0.0,
                            &quot;fixed_om_cost&quot;: 4536.98,
                            &quot;investment_cost&quot;: 17239.56121,
                            &quot;variable_om_cost&quot;: 0.15,
                            &quot;efficiency&quot;: 0.92
                        },
                        &quot;charge_edge&quot;: {
                            &quot;start_vertex&quot;: &quot;elec_SE&quot;,
                            &quot;efficiency&quot;: 0.92,
                            &quot;variable_om_cost&quot;: 0.15
                        }
                    },
                    &quot;storage&quot;: {
                        &quot;existing_capacity&quot;: 0.0,
                        &quot;fixed_om_cost&quot;: 2541.19,
                        &quot;investment_cost&quot;: 9656.002735,
                        &quot;max_duration&quot;: 10,
                        &quot;min_duration&quot;: 1
                    }
                },
                {
                    &quot;id&quot;: &quot;battery_NE&quot;,
                    &quot;edges&quot;: {
                        &quot;discharge_edge&quot;: {
                            &quot;end_vertex&quot;: &quot;elec_SE&quot;,
                            &quot;capacity_size&quot;: 1.0,
                            &quot;existing_capacity&quot;: 0.0,
                            &quot;fixed_om_cost&quot;: 4536.98,
                            &quot;investment_cost&quot;: 17239.56121,
                            &quot;variable_om_cost&quot;: 0.15,
                            &quot;efficiency&quot;: 0.92
                        },
                        &quot;charge_edge&quot;: {
                            &quot;start_vertex&quot;: &quot;elec_SE&quot;,
                            &quot;efficiency&quot;: 0.92,
                            &quot;variable_om_cost&quot;: 0.15
                        }
                    },
                    &quot;storage&quot;: {
                        &quot;existing_capacity&quot;: 0.0,
                        &quot;fixed_om_cost&quot;: 2541.19,
                        &quot;investment_cost&quot;: 9656.002735,
                        &quot;max_duration&quot;: 10,
                        &quot;min_duration&quot;: 1
                    }
                }
            ]
        }
    ]
}</code></pre><h3 id="Key-Points"><a class="docs-heading-anchor" href="#Key-Points">Key Points</a><a id="Key-Points-1"></a><a class="docs-heading-anchor-permalink" href="#Key-Points" title="Permalink"></a></h3><ul><li>The <code>global_data</code> field is utilized to define attributes and constraints that apply universally to all instances of a particular asset type.</li><li>The <code>start_vertex</code> and <code>end_vertex</code> fields indicate the nodes to which the charge and discharge edges are connected. These nodes must be defined in the <code>nodes.json</code> file.</li><li>For a comprehensive list of attributes that can be configured for the storage and edge components, refer to the <a href="../../Storage/#manual-storage-fields">storage</a> and <a href="../../Edges/#manual-edges-fields">edges</a> pages of the Macro manual.</li></ul><div class="admonition is-info" id="The-has_capacity-Edge-Attribute-fca94ab2bbc510b5"><header class="admonition-header">The `has_capacity` Edge Attribute<a class="admonition-anchor" href="#The-has_capacity-Edge-Attribute-fca94ab2bbc510b5" title="Permalink"></a></header><div class="admonition-body"><p>The <code>has_capacity</code> attribute is a flag that indicates whether a specific edge of an asset has a capacity variable, allowing it to be expanded or retired. Typically, users do not need to manually adjust this flag, as the asset creators in Macro have already configured it correctly for each edge. However, advanced users can use this flag to override the default settings for each edge if needed.</p></div></div><script type="module">import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.esm.min.mjs';
mermaid.initialize({
    startOnLoad: true,
    theme: "neutral"
});
</script></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../Assets/">« Assets</a><a class="docs-footer-nextpage" href="../beccselectricity/">BECCS Electricity »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.14.1 on <span class="colophon-date" title="Wednesday 20 August 2025 22:39">Wednesday 20 August 2025</span>. Using Julia version 1.11.6.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
