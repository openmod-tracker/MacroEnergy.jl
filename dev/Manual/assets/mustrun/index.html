<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Must Run · Macro</title><meta name="title" content="Must Run · Macro"/><meta property="og:title" content="Must Run · Macro"/><meta property="twitter:title" content="Must Run · Macro"/><meta name="description" content="Documentation for Macro."/><meta property="og:description" content="Documentation for Macro."/><meta property="twitter:description" content="Documentation for Macro."/><meta property="og:url" content="https://macroenergy.github.io/Macro/stable/Manual/assets/mustrun/"/><meta property="twitter:url" content="https://macroenergy.github.io/Macro/stable/Manual/assets/mustrun/"/><link rel="canonical" href="https://macroenergy.github.io/Macro/stable/Manual/assets/mustrun/"/><script data-outdated-warner src="../../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../../assets/documenter.js"></script><script src="../../../search_index.js"></script><script src="../../../siteinfo.js"></script><script src="../../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../../">Macro</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><input class="collapse-toggle" id="menuitem-1" type="checkbox"/><label class="tocitem" for="menuitem-1"><span class="docs-label">Welcome to Macro</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../">Introduction</a></li><li><a class="tocitem" href="../../../table_of_contents/">Table of contents</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2" type="checkbox"/><label class="tocitem" for="menuitem-2"><span class="docs-label">Getting Started</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../Getting Started/1_overview/">Overview</a></li><li><a class="tocitem" href="../../../Getting Started/2_installation/">Installation</a></li><li><a class="tocitem" href="../../../Getting Started/4_macro_repo_contents/">What&#39;s Included With Macro</a></li><li><a class="tocitem" href="../../../Getting Started/3_first_run/">First Run</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3" type="checkbox"/><label class="tocitem" for="menuitem-3"><span class="docs-label">Tutorials</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../Tutorials/tutorials_introduction/">Introduction</a></li><li><a class="tocitem" href="../../../Tutorials/0_getting_started/">Getting Started</a></li><li><a class="tocitem" href="../../../Tutorials/1_running_macro/">Running Macro</a></li><li><a class="tocitem" href="../../../Tutorials/2_multisector_modelling/">Multisector Modelling</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4" type="checkbox"/><label class="tocitem" for="menuitem-4"><span class="docs-label">Guides</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../Guides/guides_introduction/">Introduction</a></li><li><input class="collapse-toggle" id="menuitem-4-2" type="checkbox"/><label class="tocitem" for="menuitem-4-2"><span class="docs-label">User Guide</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../Guides/User Guide/user_build_system/">Create a System</a></li><li><a class="tocitem" href="../../../Guides/User Guide/user_add_commodity/">Adding Commodities</a></li><li><a class="tocitem" href="../../../Guides/User Guide/user_add_node/">Adding Nodes</a></li><li><a class="tocitem" href="../../../Guides/User Guide/user_add_location/">Adding Locations</a></li><li><a class="tocitem" href="../../../Guides/User Guide/user_add_asset/">Adding Assets</a></li><li><a class="tocitem" href="../../../Guides/User Guide/user_policy_constraints/">Adding Policy constraints</a></li><li><a class="tocitem" href="../../../Guides/User Guide/user_asset_constraints/">Adding Assets constraints</a></li><li><a class="tocitem" href="../../../Guides/User Guide/user_settings/">Configuring Settings</a></li><li><a class="tocitem" href="../../../Guides/User Guide/user_run_model/">Running Models</a></li><li><a class="tocitem" href="../../../Guides/User Guide/user_write_results/">Writing Results</a></li><li><a class="tocitem" href="../../../Guides/User Guide/user_multiperiod/">Using Multi-Period Models</a></li><li><a class="tocitem" href="../../../Guides/User Guide/user_using_asset_libary/">Exploring the Asset library</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4-3" type="checkbox"/><label class="tocitem" for="menuitem-4-3"><span class="docs-label">Modeler Guide</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../Guides/Modeler Guide/modeler_introduction/">Introduction</a></li><li><a class="tocitem" href="../../../Guides/Modeler Guide/modeler_es_graph/">Energy System Graph-Based Representation</a></li><li><a class="tocitem" href="../../../Guides/Modeler Guide/modeler_build_sectors/">Creating a New Sector</a></li><li><a class="tocitem" href="../../../Guides/Modeler Guide/modeler_build_asset/">Creating a New Asset</a></li><li><a class="tocitem" href="../../../Guides/Modeler Guide/modeler_add_docs_to_asset/">Documenting an Asset</a></li><li><a class="tocitem" href="../../../Guides/Modeler Guide/modeler_create_example_case/">Creating a New Example Case</a></li><li><a class="tocitem" href="../../../Guides/Modeler Guide/modeler_workflow/">Suggested Development Workflow</a></li><li><a class="tocitem" href="../../../Guides/Modeler Guide/modeler_debugging_testing/">Debugging and Testing Tips</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4-4" type="checkbox"/><label class="tocitem" for="menuitem-4-4"><span class="docs-label">Developer Guide</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../Guides/Developer Guide/dev_create_constraint/">Creating a Constraint</a></li><li><a class="tocitem" href="../../../Guides/Developer Guide/2_type_hierarchy/">Type Hierarchy</a></li></ul></li></ul></li><li><a class="tocitem" href="../../../Assets/assets_guide/">Assets</a></li><li><input class="collapse-toggle" id="menuitem-6" type="checkbox" checked/><label class="tocitem" for="menuitem-6"><span class="docs-label">Manual</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../manual_introduction/">Introduction</a></li><li><a class="tocitem" href="../../Inputs/">Inputs</a></li><li><a class="tocitem" href="../../Outputs/">Outputs</a></li><li><a class="tocitem" href="../../System/">System</a></li><li><a class="tocitem" href="../../Model/">Model</a></li><li><a class="tocitem" href="../../Sectors/">Sectors</a></li><li><a class="tocitem" href="../../Edges/">Edges</a></li><li><a class="tocitem" href="../../Nodes/">Nodes</a></li><li><a class="tocitem" href="../../Storage/">Storage</a></li><li><a class="tocitem" href="../../Transformations/">Transformations</a></li><li><a class="tocitem" href="../../Locations/">Locations</a></li><li><a class="tocitem" href="../../Constraints/">Constraints</a></li><li><a class="tocitem" href="../../Commodities/">Commodities</a></li><li><a class="tocitem" href="../../Assets/">Assets</a></li><li><input class="collapse-toggle" id="menuitem-6-15" type="checkbox" checked/><label class="tocitem" for="menuitem-6-15"><span class="docs-label">Asset Library</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../battery/">Battery</a></li><li><a class="tocitem" href="../beccselectricity/">BECCS Electricity</a></li><li><a class="tocitem" href="../beccshydrogen/">BECCS Hydrogen</a></li><li><a class="tocitem" href="../electricdac/">Electric DAC</a></li><li><a class="tocitem" href="../electrolyzer/">Electrolyzer</a></li><li><a class="tocitem" href="../fuelcell/">Fuel Cell</a></li><li><a class="tocitem" href="../gasstorage/">Gas Storage</a></li><li><a class="tocitem" href="../hydropower/">Hydro Reservoir</a></li><li class="is-active"><a class="tocitem" href>Must Run</a><ul class="internal"><li><a class="tocitem" href="#Contents"><span>Contents</span></a></li><li><a class="tocitem" href="#mustrun_overview"><span>Overview</span></a></li><li><a class="tocitem" href="#mustrun_asset_structure"><span>Asset Structure</span></a></li><li><a class="tocitem" href="#mustrun_input_file"><span>Input File (Standard Format)</span></a></li><li><a class="tocitem" href="#mustrun_type_definition"><span>Types - Asset Structure</span></a></li><li><a class="tocitem" href="#mustrun_constructors"><span>Constructors</span></a></li><li><a class="tocitem" href="#mustrun_examples"><span>Examples</span></a></li><li><a class="tocitem" href="#mustrun_best_practices"><span>Best Practices</span></a></li><li><a class="tocitem" href="#mustrun_advanced_json_csv_input_format"><span>Input File (Advanced Format)</span></a></li></ul></li><li><a class="tocitem" href="../natgasdaq/">Natural Gas DAC</a></li><li><a class="tocitem" href="../thermalhydrogen/">Thermal Hydrogen Plant (with and without CCS)</a></li><li><a class="tocitem" href="../thermalpower/">Thermal Power Plant (with and without CCS)</a></li><li><a class="tocitem" href="../transmissionlink/">Transmission Link</a></li><li><a class="tocitem" href="../vre/">Variable Renewable Energy Resources (VRE)</a></li></ul></li><li><a class="tocitem" href="../../Financial_assumptions/">Financial Assumptions</a></li><li><a class="tocitem" href="../../Multi_period_accounting/">Multi-Period Accounting</a></li></ul></li><li><a class="tocitem" href="../../../how_to_contribute/">How to contribute</a></li><li><input class="collapse-toggle" id="menuitem-8" type="checkbox"/><label class="tocitem" for="menuitem-8"><span class="docs-label">References</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../References/1_introduction/">Introduction</a></li><li><a class="tocitem" href="../../../References/2_reading_input/">Reading input data</a></li><li><a class="tocitem" href="../../../References/3_macro_objects/">Macro Objects</a></li><li><a class="tocitem" href="../../../References/4_writing_output/">Writing output data</a></li><li><a class="tocitem" href="../../../References/5_utilities/">Utilities</a></li><li><a class="tocitem" href="../../../References/ref_download_examples/">Downloading examples</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-9" type="checkbox"/><label class="tocitem" for="menuitem-9"><span class="docs-label">Appendix</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../Appendix/TEA/">TEA</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Manual</a></li><li><a class="is-disabled">Asset Library</a></li><li class="is-active"><a href>Must Run</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Must Run</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/macroenergy/MacroEnergy.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/macroenergy/MacroEnergy.jl/blob/main/docs/src/Manual/assets/mustrun.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Must-Run"><a class="docs-heading-anchor" href="#Must-Run">Must Run</a><a id="Must-Run-1"></a><a class="docs-heading-anchor-permalink" href="#Must-Run" title="Permalink"></a></h1><h2 id="Contents"><a class="docs-heading-anchor" href="#Contents">Contents</a><a id="Contents-1"></a><a class="docs-heading-anchor-permalink" href="#Contents" title="Permalink"></a></h2><p><a href="#mustrun_overview">Overview</a> | <a href="#mustrun_asset_structure">Asset Structure</a> | <a href="#mustrun_input_file">Input File (Standard Format)</a> | <a href="#mustrun_type_definition">Types - Asset Structure</a> | <a href="#mustrun_constructors">Constructors</a> | <a href="#mustrun_examples">Examples</a> | <a href="#mustrun_best_practices">Best Practices</a> | <a href="#mustrun_advanced_json_csv_input_format">Input File (Advanced Format)</a></p><h2 id="mustrun_overview"><a class="docs-heading-anchor" href="#mustrun_overview">Overview</a><a id="mustrun_overview-1"></a><a class="docs-heading-anchor-permalink" href="#mustrun_overview" title="Permalink"></a></h2><p>Must-run assets in Macro represent electricity generation technologies that must operate at their full available capacity when available. These assets are typically used for small hydroelectric plants, or other generation that has contractual or operational requirements to run when available. They are defined using either JSON or CSV input files placed in the <code>assets</code> directory, typically named with descriptive identifiers like <code>mustrun.json</code> or <code>mustrun.csv</code>.</p><h2 id="mustrun_asset_structure"><a class="docs-heading-anchor" href="#mustrun_asset_structure">Asset Structure</a><a id="mustrun_asset_structure-1"></a><a class="docs-heading-anchor-permalink" href="#mustrun_asset_structure" title="Permalink"></a></h2><p>A must-run asset consists of two main components:</p><ol><li><strong>Transformation Component</strong></li><li><strong>Electricity Edge</strong>: Represents the electricity production flow to the grid</li></ol><p>Here is a graphical representation of the must-run asset:</p><div class="mermaid">%%{init: {&#39;theme&#39;: &#39;base&#39;, &#39;themeVariables&#39;: { &#39;background&#39;: &#39;#D1EBDE&#39; }}}%%
flowchart LR
  subgraph MustRun
  direction LR
  A{{..}} e1@--&gt; B((Electricity))
  e1@{ animate: true }
 end
    style A fill:black,stroke:black,color:black;
    style B fill:#FFD700,stroke:black,color:black,stroke-dasharray: 3,5;
    
    linkStyle 0 stroke:#FFD700, stroke-width: 2px, stroke-dasharray: 5 5;</div><h2 id="mustrun_input_file"><a class="docs-heading-anchor" href="#mustrun_input_file">Input File (Standard Format)</a><a id="mustrun_input_file-1"></a><a class="docs-heading-anchor-permalink" href="#mustrun_input_file" title="Permalink"></a></h2><p>The easiest way to include a must-run asset in a model is to create a new file (either JSON or CSV) and place it in the <code>assets</code> directory together with the other assets. </p><pre><code class="nohighlight hljs">your_case/
├── assets/
│   ├── mustrun.json    # or mustrun.csv
│   ├── other_assets.json
│   └── ...
├── system/
├── settings/
└── ...</code></pre><p>This file can either be created manually, or using the <code>template_asset</code> function, as shown in the <a href="../../../Guides/User Guide/user_add_asset/#Adding-an-Asset-to-a-System">Adding an Asset to a System</a> section of the User Guide. The file will be automatically loaded when you run your Macro model. </p><p>The following is an example of a must-run asset input file:</p><pre><code class="language-json hljs">{
    &quot;mustrun&quot;: [
        {
            &quot;type&quot;: &quot;MustRun&quot;,
            &quot;instance_data&quot;: [
                {
                    &quot;id&quot;: &quot;SE_small_hydroelectric_1&quot;,
                    &quot;location&quot;: &quot;SE&quot;,
                    &quot;can_expand&quot;: false,
                    &quot;can_retire&quot;: false,
                    &quot;fixed_om_cost&quot;: 45648,
                    &quot;existing_capacity&quot;: 249.895,
                    &quot;capacity_size&quot;: 1.219,
                    &quot;availability&quot;: {
                        &quot;timeseries&quot;: {
                            &quot;path&quot;: &quot;system/availability.csv&quot;,
                            &quot;header&quot;: &quot;SE_small_hydroelectric_1&quot;
                        }
                    }
                }
            ]
        }
    ]
}</code></pre><div class="admonition is-success" id="Global-Data-vs-Instance-Data-f6940c83955c861e"><header class="admonition-header">Global Data vs Instance Data<a class="admonition-anchor" href="#Global-Data-vs-Instance-Data-f6940c83955c861e" title="Permalink"></a></header><div class="admonition-body"><p>When working with JSON input files, the <code>global_data</code> field can be used to group data that is common to all instances of the same asset type. This is useful for setting constraints that are common to all instances of the same asset type and avoid repeating the same data for each instance. See the <a href="#mustrun_examples">Examples</a> section below for an example.</p></div></div><p>The following tables outline the attributes that can be set for a must-run asset.</p><h3 id="Essential-Attributes"><a class="docs-heading-anchor" href="#Essential-Attributes">Essential Attributes</a><a id="Essential-Attributes-1"></a><a class="docs-heading-anchor-permalink" href="#Essential-Attributes" title="Permalink"></a></h3><table><tr><th style="text-align: right">Field</th><th style="text-align: right">Type</th><th style="text-align: right">Description</th></tr><tr><td style="text-align: right"><code>Type</code></td><td style="text-align: right">String</td><td style="text-align: right">Asset type identifier: &quot;MustRun&quot;</td></tr><tr><td style="text-align: right"><code>id</code></td><td style="text-align: right">String</td><td style="text-align: right">Unique identifier for the must-run instance</td></tr><tr><td style="text-align: right"><code>location</code></td><td style="text-align: right">String</td><td style="text-align: right">Geographic location/node identifier</td></tr></table><p>Users can refer to the <a href="../../../Guides/User Guide/user_asset_constraints/#Adding-Asset-Constraints-to-a-System">Adding Asset Constraints to a System</a> section of the User Guide for a list of all the constraints that can be applied to a must-run asset.</p><h3 id="&quot;mustrun_constraints&quot;"><a class="docs-heading-anchor" href="#&quot;mustrun_constraints&quot;">Constraints configuration</a><a id="&quot;mustrun_constraints&quot;-1"></a><a class="docs-heading-anchor-permalink" href="#&quot;mustrun_constraints&quot;" title="Permalink"></a></h3><p>Must-run assets can have different constraints applied to them, and the user can configure them using the following fields:</p><table><tr><th style="text-align: right">Field</th><th style="text-align: right">Type</th><th style="text-align: right">Description</th></tr><tr><td style="text-align: right"><code>transform_constraints</code></td><td style="text-align: right">Dict{String,Bool}</td><td style="text-align: right">List of constraints applied to the transformation component.</td></tr><tr><td style="text-align: right"><code>edge_constraints</code></td><td style="text-align: right">Dict{String,Bool}</td><td style="text-align: right">List of constraints applied to the electricity edge.</td></tr></table><h4 id="Default-constraints"><a class="docs-heading-anchor" href="#Default-constraints">Default constraints</a><a id="Default-constraints-1"></a><a class="docs-heading-anchor-permalink" href="#Default-constraints" title="Permalink"></a></h4><p>To simplify the input file and the asset configuration, the following constraints are applied to the must-run asset by default:</p><ul><li><a href="../../../Guides/User Guide/4_constraints/#balance_constraint_ref">Balance constraint</a> (applied to the transformation component)</li><li><a href="../../../Guides/User Guide/4_constraints/#must_run_constraint_ref">Must run constraint</a> (applied to the electricity edge)</li></ul><h3 id="Investment-Parameters"><a class="docs-heading-anchor" href="#Investment-Parameters">Investment Parameters</a><a id="Investment-Parameters-1"></a><a class="docs-heading-anchor-permalink" href="#Investment-Parameters" title="Permalink"></a></h3><table><tr><th style="text-align: right">Field</th><th style="text-align: right">Type</th><th style="text-align: right">Description</th><th style="text-align: right">Units</th><th style="text-align: right">Default</th></tr><tr><td style="text-align: right"><code>can_retire</code></td><td style="text-align: right">Boolean</td><td style="text-align: right">Whether must-run capacity can be retired</td><td style="text-align: right">-</td><td style="text-align: right">true</td></tr><tr><td style="text-align: right"><code>can_expand</code></td><td style="text-align: right">Boolean</td><td style="text-align: right">Whether must-run capacity can be expanded</td><td style="text-align: right">-</td><td style="text-align: right">true</td></tr><tr><td style="text-align: right"><code>existing_capacity</code></td><td style="text-align: right">Float64</td><td style="text-align: right">Initial installed capacity</td><td style="text-align: right">MW</td><td style="text-align: right">0.0</td></tr><tr><td style="text-align: right"><code>capacity_size</code></td><td style="text-align: right">Float64</td><td style="text-align: right">Unit size for capacity decisions</td><td style="text-align: right">-</td><td style="text-align: right">1.0</td></tr></table><h4 id="Additional-Investment-Parameters"><a class="docs-heading-anchor" href="#Additional-Investment-Parameters">Additional Investment Parameters</a><a id="Additional-Investment-Parameters-1"></a><a class="docs-heading-anchor-permalink" href="#Additional-Investment-Parameters" title="Permalink"></a></h4><p><strong>Maximum and minimum capacity constraints</strong></p><p>If <a href="../../../Guides/User Guide/4_constraints/#max_capacity_constraint_ref"><code>MaxCapacityConstraint</code></a> or <a href="../../../Guides/User Guide/4_constraints/#min_capacity_constraint_ref"><code>MinCapacityConstraint</code></a> are added to the constraints dictionary for the electricity edge, the following parameters are used by Macro:</p><table><tr><th style="text-align: right">Field</th><th style="text-align: right">Type</th><th style="text-align: right">Description</th><th style="text-align: right">Units</th><th style="text-align: right">Default</th></tr><tr><td style="text-align: right"><code>max_capacity</code></td><td style="text-align: right">Float64</td><td style="text-align: right">Maximum allowed must-run capacity</td><td style="text-align: right">MW</td><td style="text-align: right">Inf</td></tr><tr><td style="text-align: right"><code>min_capacity</code></td><td style="text-align: right">Float64</td><td style="text-align: right">Minimum allowed must-run capacity</td><td style="text-align: right">MW</td><td style="text-align: right">0.0</td></tr></table><h3 id="Economic-Parameters"><a class="docs-heading-anchor" href="#Economic-Parameters">Economic Parameters</a><a id="Economic-Parameters-1"></a><a class="docs-heading-anchor-permalink" href="#Economic-Parameters" title="Permalink"></a></h3><table><tr><th style="text-align: right">Field</th><th style="text-align: right">Type</th><th style="text-align: right">Description</th><th style="text-align: right">Units</th><th style="text-align: right">Default</th></tr><tr><td style="text-align: right"><code>investment_cost</code></td><td style="text-align: right">Float64</td><td style="text-align: right">CAPEX per unit capacity</td><td style="text-align: right"><span>$</span>/MW</td><td style="text-align: right">0.0</td></tr><tr><td style="text-align: right"><code>annualized_investment_cost</code></td><td style="text-align: right">Union{Nothing,Float64}</td><td style="text-align: right">Annualized CAPEX</td><td style="text-align: right"><span>$</span>/MW/yr</td><td style="text-align: right">calculated</td></tr><tr><td style="text-align: right"><code>fixed_om_cost</code></td><td style="text-align: right">Float64</td><td style="text-align: right">Fixed O&amp;M costs</td><td style="text-align: right"><span>$</span>/MW/yr</td><td style="text-align: right">0.0</td></tr><tr><td style="text-align: right"><code>variable_om_cost</code></td><td style="text-align: right">Float64</td><td style="text-align: right">Variable O&amp;M costs</td><td style="text-align: right"><span>$</span>/MWh</td><td style="text-align: right">0.0</td></tr><tr><td style="text-align: right"><code>wacc</code></td><td style="text-align: right">Float64</td><td style="text-align: right">Weighted average cost of capital</td><td style="text-align: right">fraction</td><td style="text-align: right">0.0</td></tr><tr><td style="text-align: right"><code>lifetime</code></td><td style="text-align: right">Int</td><td style="text-align: right">Asset lifetime in years</td><td style="text-align: right">years</td><td style="text-align: right">1</td></tr><tr><td style="text-align: right"><code>capital_recovery_period</code></td><td style="text-align: right">Int</td><td style="text-align: right">Investment recovery period</td><td style="text-align: right">years</td><td style="text-align: right">1</td></tr><tr><td style="text-align: right"><code>retirement_period</code></td><td style="text-align: right">Int</td><td style="text-align: right">Retirement period</td><td style="text-align: right">years</td><td style="text-align: right">0</td></tr></table><h3 id="Operational-Parameters"><a class="docs-heading-anchor" href="#Operational-Parameters">Operational Parameters</a><a id="Operational-Parameters-1"></a><a class="docs-heading-anchor-permalink" href="#Operational-Parameters" title="Permalink"></a></h3><table><tr><th style="text-align: right">Field</th><th style="text-align: right">Type</th><th style="text-align: right">Description</th><th style="text-align: right">Units</th><th style="text-align: right">Default</th></tr><tr><td style="text-align: right"><code>availability</code></td><td style="text-align: right">Dict</td><td style="text-align: right">Availability file path and header</td><td style="text-align: right">-</td><td style="text-align: right">Empty</td></tr></table><h2 id="mustrun_type_definition"><a class="docs-heading-anchor" href="#mustrun_type_definition">Types - Asset Structure</a><a id="mustrun_type_definition-1"></a><a class="docs-heading-anchor-permalink" href="#mustrun_type_definition" title="Permalink"></a></h2><p>The <code>MustRun</code> asset is defined as follows:</p><pre><code class="language-julia hljs">struct MustRun &lt;: AbstractAsset
    id::AssetId
    energy_transform::Transformation
    elec_edge::Edge{&lt;:Electricity}
end</code></pre><h2 id="mustrun_constructors"><a class="docs-heading-anchor" href="#mustrun_constructors">Constructors</a><a id="mustrun_constructors-1"></a><a class="docs-heading-anchor-permalink" href="#mustrun_constructors" title="Permalink"></a></h2><h3 id="Default-constructor"><a class="docs-heading-anchor" href="#Default-constructor">Default constructor</a><a id="Default-constructor-1"></a><a class="docs-heading-anchor-permalink" href="#Default-constructor" title="Permalink"></a></h3><pre><code class="language-julia hljs">MustRun(id::AssetId, energy_transform::Transformation, elec_edge::Edge{&lt;:Electricity})</code></pre><h3 id="Factory-constructor"><a class="docs-heading-anchor" href="#Factory-constructor">Factory constructor</a><a id="Factory-constructor-1"></a><a class="docs-heading-anchor-permalink" href="#Factory-constructor" title="Permalink"></a></h3><pre><code class="language-julia hljs">make(asset_type::Type{MustRun}, data::AbstractDict{Symbol,Any}, system::System)</code></pre><table><tr><th style="text-align: right">Field</th><th style="text-align: right">Type</th><th style="text-align: right">Description</th></tr><tr><td style="text-align: right"><code>asset_type</code></td><td style="text-align: right"><code>Type{MustRun}</code></td><td style="text-align: right">Macro type of the asset</td></tr><tr><td style="text-align: right"><code>data</code></td><td style="text-align: right"><code>AbstractDict{Symbol,Any}</code></td><td style="text-align: right">Dictionary containing the input data for the asset</td></tr><tr><td style="text-align: right"><code>system</code></td><td style="text-align: right"><code>System</code></td><td style="text-align: right">System to which the asset belongs</td></tr></table><h2 id="mustrun_examples"><a class="docs-heading-anchor" href="#mustrun_examples">Examples</a><a id="mustrun_examples-1"></a><a class="docs-heading-anchor-permalink" href="#mustrun_examples" title="Permalink"></a></h2><p>This section contains examples of how to use the must-run asset in a Macro model.</p><h3 id="Multiple-must-run-assets-in-different-zones"><a class="docs-heading-anchor" href="#Multiple-must-run-assets-in-different-zones">Multiple must-run assets in different zones</a><a id="Multiple-must-run-assets-in-different-zones-1"></a><a class="docs-heading-anchor-permalink" href="#Multiple-must-run-assets-in-different-zones" title="Permalink"></a></h3><p>This example shows three small hydroelectric plants in different regions, with existing and fixed capacity (capacity cannot be expanded or retired).</p><p><strong>JSON Format:</strong></p><p>Note that the <code>global_data</code> field is used to set the fields that are common to all instances of the same asset type.</p><pre><code class="language-json hljs">{
    &quot;mustrun&quot;: [
        {
            &quot;type&quot;: &quot;MustRun&quot;,
            &quot;global_data&quot;: {
                &quot;can_expand&quot;: false,
                &quot;can_retire&quot;: false,
                &quot;fixed_om_cost&quot;: 45648
            },
            &quot;instance_data&quot;: [
                {
                    &quot;id&quot;: &quot;SE_small_hydroelectric_1&quot;,
                    &quot;location&quot;: &quot;SE&quot;,
                    &quot;existing_capacity&quot;: 249.895,
                    &quot;capacity_size&quot;: 1.219,
                    &quot;availability&quot;: {
                        &quot;timeseries&quot;: {
                            &quot;path&quot;: &quot;system/availability.csv&quot;,
                            &quot;header&quot;: &quot;SE_small_hydroelectric_1&quot;
                        }
                    }
                },
                {
                    &quot;id&quot;: &quot;MIDAT_small_hydroelectric_1&quot;,
                    &quot;location&quot;: &quot;MIDAT&quot;,
                    &quot;existing_capacity&quot;: 263.268,
                    &quot;capacity_size&quot;: 1.236,
                    &quot;availability&quot;: {
                        &quot;timeseries&quot;: {
                            &quot;path&quot;: &quot;system/availability.csv&quot;,
                            &quot;header&quot;: &quot;MIDAT_small_hydroelectric_1&quot;
                        }
                    }
                },
                {
                    &quot;id&quot;: &quot;NE_small_hydroelectric_1&quot;,
                    &quot;location&quot;: &quot;NE&quot;,
                    &quot;existing_capacity&quot;: 834.494,
                    &quot;capacity_size&quot;: 1.051,
                    &quot;availability&quot;: {
                        &quot;timeseries&quot;: {
                            &quot;path&quot;: &quot;system/availability.csv&quot;,
                            &quot;header&quot;: &quot;NE_small_hydroelectric_1&quot;
                        }
                    }
                }
            ]
        }
    ]
}</code></pre><p><strong>CSV Format:</strong></p><table><tr><th style="text-align: right">Type</th><th style="text-align: right">id</th><th style="text-align: right">location</th><th style="text-align: right">can_expand</th><th style="text-align: right">can_retire</th><th style="text-align: right">fixed_om_cost</th><th style="text-align: right">existing_capacity</th><th style="text-align: right">capacity_size</th><th style="text-align: right">availability–timeseries–path</th><th style="text-align: right">availability–timeseries–header</th></tr><tr><td style="text-align: right">MustRun</td><td style="text-align: right">SE_small_hydroelectric_1</td><td style="text-align: right">SE</td><td style="text-align: right">false</td><td style="text-align: right">false</td><td style="text-align: right">45648</td><td style="text-align: right">249.895</td><td style="text-align: right">1.219</td><td style="text-align: right">system/availability.csv</td><td style="text-align: right">SE_small_hydroelectric_1</td></tr><tr><td style="text-align: right">MustRun</td><td style="text-align: right">MIDAT_small_hydroelectric_1</td><td style="text-align: right">MIDAT</td><td style="text-align: right">false</td><td style="text-align: right">false</td><td style="text-align: right">45648</td><td style="text-align: right">263.268</td><td style="text-align: right">1.236</td><td style="text-align: right">system/availability.csv</td><td style="text-align: right">MIDAT_small_hydroelectric_1</td></tr><tr><td style="text-align: right">MustRun</td><td style="text-align: right">NE_small_hydroelectric_1</td><td style="text-align: right">NE</td><td style="text-align: right">false</td><td style="text-align: right">false</td><td style="text-align: right">45648</td><td style="text-align: right">834.494</td><td style="text-align: right">1.051</td><td style="text-align: right">system/availability.csv</td><td style="text-align: right">NE_small_hydroelectric_1</td></tr></table><h2 id="mustrun_best_practices"><a class="docs-heading-anchor" href="#mustrun_best_practices">Best Practices</a><a id="mustrun_best_practices-1"></a><a class="docs-heading-anchor-permalink" href="#mustrun_best_practices" title="Permalink"></a></h2><ol><li><strong>Use global data for common fields</strong>: Use the <code>global_data</code> field to set the fields that are common to all instances of the same asset type.</li><li><strong>Set realistic availability profiles</strong>: Ensure availability profiles reflect actual operational constraints</li><li><strong>Use meaningful IDs</strong>: Choose descriptive identifiers that indicate location and technology type</li><li><strong>Consider capacity constraints</strong>: Set appropriate capacity limits based on technology and location</li><li><strong>Use constraints selectively</strong>: Only enable constraints that are necessary for your modeling needs</li><li><strong>Validate costs</strong>: Ensure investment and O&amp;M costs are in appropriate units</li><li><strong>Test configurations</strong>: Start with simple configurations and gradually add complexity</li></ol><h2 id="mustrun_advanced_json_csv_input_format"><a class="docs-heading-anchor" href="#mustrun_advanced_json_csv_input_format">Input File (Advanced Format)</a><a id="mustrun_advanced_json_csv_input_format-1"></a><a class="docs-heading-anchor-permalink" href="#mustrun_advanced_json_csv_input_format" title="Permalink"></a></h2><p>Macro provides an advanced format for defining must-run assets, offering users and modelers detailed control over asset specifications. This format builds upon the standard format and is ideal for those who need more comprehensive customization.</p><p>To understand the advanced format, consider the <a href="#mustrun_asset_structure">graph representation</a> and the <a href="#mustrun_type_definition">type definition</a> of a must-run asset. The input file mirrors this hierarchical structure.</p><p>A must-run asset in Macro is composed of a transformation component, represented by a <code>Transformation</code> object, and an electricity edge, represented by an <code>Edge</code> object. The input file for a must-run asset is therefore organized as follows:</p><pre><code class="language-json hljs">{
    &quot;transforms&quot;: {
        // ... transformation-specific attributes ...
    },
    &quot;edges&quot;: {
        &quot;elec_edge&quot;: {
            // ... electricity_edge-specific attributes ...
        }
    }
}</code></pre><p>Each top-level key (such as &quot;transforms&quot; or &quot;edges&quot;) represents a type of component. The second-level keys either define the attributes of the component (for storage and transformation components) or specify the instances of the component (for edges). For edges, a third-level key provides the attributes for each specific instance.</p><p>Below is an example of an input file for a must-run asset that sets up three small hydroelectric plants in different regions.</p><pre><code class="language-json hljs">{
    &quot;mustrun&quot;: [
        {
            &quot;type&quot;: &quot;MustRun&quot;,
            &quot;global_data&quot;: {
                &quot;nodes&quot;: {},
                &quot;transforms&quot;: {
                    &quot;timedata&quot;: &quot;Electricity&quot;
                },
                &quot;edges&quot;: {
                    &quot;elec_edge&quot;: {
                        &quot;unidirectional&quot;: true,
                        &quot;can_expand&quot;: false,
                        &quot;can_retire&quot;: false,
                        &quot;has_capacity&quot;: true,
                        &quot;constraints&quot;: {
                            &quot;MustRunConstraint&quot;: true
                        }
                    }
                }
            },
            &quot;instance_data&quot;: [
                {
                    &quot;id&quot;: &quot;SE_small_hydroelectric_1&quot;,
                    &quot;edges&quot;: {
                        &quot;elec_edge&quot;: {
                            &quot;end_vertex&quot;: &quot;elec_SE&quot;,
                            &quot;existing_capacity&quot;: 249.895,
                            &quot;capacity_size&quot;: 1.219,
                            &quot;fixed_om_cost&quot;: 45648,
                            &quot;availability&quot;: {
                                &quot;timeseries&quot;: {
                                    &quot;path&quot;: &quot;system/availability.csv&quot;,
                                    &quot;header&quot;: &quot;SE_small_hydroelectric_1&quot;
                                }
                            }
                        }
                    }
                },
                {
                    &quot;id&quot;: &quot;MIDAT_small_hydroelectric_1&quot;,
                    &quot;edges&quot;: {
                        &quot;elec_edge&quot;: {
                            &quot;end_vertex&quot;: &quot;elec_MIDAT&quot;,
                            &quot;existing_capacity&quot;: 263.268,
                            &quot;capacity_size&quot;: 1.236,
                            &quot;fixed_om_cost&quot;: 45648,
                            &quot;availability&quot;: {
                                &quot;timeseries&quot;: {
                                    &quot;path&quot;: &quot;system/availability.csv&quot;,
                                    &quot;header&quot;: &quot;MIDAT_small_hydroelectric_1&quot;
                                }
                            }
                        }
                    }
                },
                {
                    &quot;id&quot;: &quot;NE_small_hydroelectric_1&quot;,
                    &quot;edges&quot;: {
                        &quot;elec_edge&quot;: {
                            &quot;end_vertex&quot;: &quot;elec_NE&quot;,
                            &quot;existing_capacity&quot;: 834.494,
                            &quot;capacity_size&quot;: 1.051,
                            &quot;fixed_om_cost&quot;: 45648,
                            &quot;availability&quot;: {
                                &quot;timeseries&quot;: {
                                    &quot;path&quot;: &quot;system/availability.csv&quot;,
                                    &quot;header&quot;: &quot;NE_small_hydroelectric_1&quot;
                                }
                            }
                        }
                    }
                }
            ]
        }
    ]
}</code></pre><h3 id="Key-Points"><a class="docs-heading-anchor" href="#Key-Points">Key Points</a><a id="Key-Points-1"></a><a class="docs-heading-anchor-permalink" href="#Key-Points" title="Permalink"></a></h3><ul><li>The <code>global_data</code> field is utilized to define attributes and constraints that apply universally to all instances of a particular asset type.</li><li>The <code>end_vertex</code> field indicates the node to which the electricity edge is connected. This node must be defined in the <code>nodes.json</code> file.</li><li>For a comprehensive list of attributes that can be configured for the transformation and edge components, refer to the <a href="../../Transformations/#manual-transformation-fields">transformations</a> and <a href="../../Edges/#manual-edges-fields">edges</a> pages of the Macro manual.</li></ul><script type="module">import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.esm.min.mjs';
mermaid.initialize({
    startOnLoad: true,
    theme: "neutral"
});
</script></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../hydropower/">« Hydro Reservoir</a><a class="docs-footer-nextpage" href="../natgasdaq/">Natural Gas DAC »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.14.1 on <span class="colophon-date" title="Tuesday 16 September 2025 19:09">Tuesday 16 September 2025</span>. Using Julia version 1.11.7.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
