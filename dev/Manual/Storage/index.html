<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Storage · Macro</title><meta name="title" content="Storage · Macro"/><meta property="og:title" content="Storage · Macro"/><meta property="twitter:title" content="Storage · Macro"/><meta name="description" content="Documentation for Macro."/><meta property="og:description" content="Documentation for Macro."/><meta property="twitter:description" content="Documentation for Macro."/><meta property="og:url" content="https://macroenergy.github.io/Macro/stable/Manual/Storage/"/><meta property="twitter:url" content="https://macroenergy.github.io/Macro/stable/Manual/Storage/"/><link rel="canonical" href="https://macroenergy.github.io/Macro/stable/Manual/Storage/"/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">Macro</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><input class="collapse-toggle" id="menuitem-1" type="checkbox"/><label class="tocitem" for="menuitem-1"><span class="docs-label">Welcome to Macro</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../">Introduction</a></li><li><a class="tocitem" href="../../table_of_contents/">Table of contents</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2" type="checkbox"/><label class="tocitem" for="menuitem-2"><span class="docs-label">Getting Started</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Getting Started/1_overview/">Overview</a></li><li><a class="tocitem" href="../../Getting Started/2_installation/">Installation</a></li><li><a class="tocitem" href="../../Getting Started/4_macro_repo_contents/">What&#39;s Included With Macro</a></li><li><a class="tocitem" href="../../Getting Started/3_first_run/">First Run</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3" type="checkbox"/><label class="tocitem" for="menuitem-3"><span class="docs-label">Tutorials</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Tutorials/tutorials_introduction/">Introduction</a></li><li><a class="tocitem" href="../../Tutorials/0_getting_started/">Getting Started</a></li><li><a class="tocitem" href="../../Tutorials/1_running_macro/">Running Macro</a></li><li><a class="tocitem" href="../../Tutorials/2_multisector_modelling/">Multisector Modelling</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4" type="checkbox"/><label class="tocitem" for="menuitem-4"><span class="docs-label">Guides</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Guides/guides_introduction/">Introduction</a></li><li><input class="collapse-toggle" id="menuitem-4-2" type="checkbox"/><label class="tocitem" for="menuitem-4-2"><span class="docs-label">User Guide</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Guides/User Guide/user_build_system/">Create a System</a></li><li><a class="tocitem" href="../../Guides/User Guide/user_add_commodity/">Adding Commodities</a></li><li><a class="tocitem" href="../../Guides/User Guide/user_add_node/">Adding Nodes</a></li><li><a class="tocitem" href="../../Guides/User Guide/user_add_location/">Adding Locations</a></li><li><a class="tocitem" href="../../Guides/User Guide/user_add_asset/">Adding Assets</a></li><li><a class="tocitem" href="../../Guides/User Guide/user_policy_constraints/">Adding Policy constraints</a></li><li><a class="tocitem" href="../../Guides/User Guide/user_asset_constraints/">Adding Assets constraints</a></li><li><a class="tocitem" href="../../Guides/User Guide/user_settings/">Configuring Settings</a></li><li><a class="tocitem" href="../../Guides/User Guide/user_run_model/">Running Models</a></li><li><a class="tocitem" href="../../Guides/User Guide/user_write_results/">Writing Results</a></li><li><a class="tocitem" href="../../Guides/User Guide/user_multiperiod/">Using Multi-Period Models</a></li><li><a class="tocitem" href="../../Guides/User Guide/user_using_asset_libary/">Exploring the Asset library</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4-3" type="checkbox"/><label class="tocitem" for="menuitem-4-3"><span class="docs-label">Modeler Guide</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Guides/Modeler Guide/modeler_introduction/">Introduction</a></li><li><a class="tocitem" href="../../Guides/Modeler Guide/modeler_es_graph/">Energy System Graph-Based Representation</a></li><li><a class="tocitem" href="../../Guides/Modeler Guide/modeler_build_sectors/">Creating a New Sector</a></li><li><a class="tocitem" href="../../Guides/Modeler Guide/modeler_build_asset/">Creating a New Asset</a></li><li><a class="tocitem" href="../../Guides/Modeler Guide/modeler_add_docs_to_asset/">Documenting an Asset</a></li><li><a class="tocitem" href="../../Guides/Modeler Guide/modeler_create_example_case/">Creating a New Example Case</a></li><li><a class="tocitem" href="../../Guides/Modeler Guide/modeler_workflow/">Suggested Development Workflow</a></li><li><a class="tocitem" href="../../Guides/Modeler Guide/modeler_debugging_testing/">Debugging and Testing Tips</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4-4" type="checkbox"/><label class="tocitem" for="menuitem-4-4"><span class="docs-label">Developer Guide</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Guides/Developer Guide/dev_create_constraint/">Creating a Constraint</a></li><li><a class="tocitem" href="../../Guides/Developer Guide/2_type_hierarchy/">Type Hierarchy</a></li></ul></li></ul></li><li><a class="tocitem" href="../../Assets/assets_guide/">Assets</a></li><li><input class="collapse-toggle" id="menuitem-6" type="checkbox" checked/><label class="tocitem" for="menuitem-6"><span class="docs-label">Manual</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../manual_introduction/">Introduction</a></li><li><a class="tocitem" href="../Inputs/">Inputs</a></li><li><a class="tocitem" href="../Outputs/">Outputs</a></li><li><a class="tocitem" href="../System/">System</a></li><li><a class="tocitem" href="../Model/">Model</a></li><li><a class="tocitem" href="../Sectors/">Sectors</a></li><li><a class="tocitem" href="../Edges/">Edges</a></li><li><a class="tocitem" href="../Nodes/">Nodes</a></li><li class="is-active"><a class="tocitem" href>Storage</a><ul class="internal"><li><a class="tocitem" href="#Contents"><span>Contents</span></a></li><li><a class="tocitem" href="#manual-storage-overview"><span>Overview</span></a></li><li><a class="tocitem" href="#manual-storage-fields"><span>Storage Fields</span></a></li><li><a class="tocitem" href="#manual-storage-types"><span>Types</span></a></li><li><a class="tocitem" href="#manual-storage-constructors"><span>Constructors</span></a></li><li><a class="tocitem" href="#manual-storage-methods"><span>Methods</span></a></li><li><a class="tocitem" href="#manual-storage-examples"><span>Examples</span></a></li><li><a class="tocitem" href="#See-Also"><span>See Also</span></a></li></ul></li><li><a class="tocitem" href="../Transformations/">Transformations</a></li><li><a class="tocitem" href="../Locations/">Locations</a></li><li><a class="tocitem" href="../Constraints/">Constraints</a></li><li><a class="tocitem" href="../Commodities/">Commodities</a></li><li><a class="tocitem" href="../Assets/">Assets</a></li><li><input class="collapse-toggle" id="menuitem-6-15" type="checkbox"/><label class="tocitem" for="menuitem-6-15"><span class="docs-label">Asset Library</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../assets/battery/">Battery</a></li><li><a class="tocitem" href="../assets/beccselectricity/">BECCS Electricity</a></li><li><a class="tocitem" href="../assets/beccshydrogen/">BECCS Hydrogen</a></li><li><a class="tocitem" href="../assets/electricdac/">Electric DAC</a></li><li><a class="tocitem" href="../assets/electrolyzer/">Electrolyzer</a></li><li><a class="tocitem" href="../assets/fuelcell/">Fuel Cell</a></li><li><a class="tocitem" href="../assets/gasstorage/">Gas Storage</a></li><li><a class="tocitem" href="../assets/hydropower/">Hydro Reservoir</a></li><li><a class="tocitem" href="../assets/mustrun/">Must Run</a></li><li><a class="tocitem" href="../assets/natgasdaq/">Natural Gas DAC</a></li><li><a class="tocitem" href="../assets/thermalhydrogen/">Thermal Hydrogen Plant (with and without CCS)</a></li><li><a class="tocitem" href="../assets/thermalpower/">Thermal Power Plant (with and without CCS)</a></li><li><a class="tocitem" href="../assets/transmissionlink/">Transmission Link</a></li><li><a class="tocitem" href="../assets/vre/">Variable Renewable Energy Resources (VRE)</a></li></ul></li><li><a class="tocitem" href="../Financial_assumptions/">Financial Assumptions</a></li><li><a class="tocitem" href="../Multi_period_accounting/">Multi-Period Accounting</a></li></ul></li><li><a class="tocitem" href="../../how_to_contribute/">How to contribute</a></li><li><input class="collapse-toggle" id="menuitem-8" type="checkbox"/><label class="tocitem" for="menuitem-8"><span class="docs-label">References</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../References/1_introduction/">Introduction</a></li><li><a class="tocitem" href="../../References/2_reading_input/">Reading input data</a></li><li><a class="tocitem" href="../../References/3_macro_objects/">Macro Objects</a></li><li><a class="tocitem" href="../../References/4_writing_output/">Writing output data</a></li><li><a class="tocitem" href="../../References/5_utilities/">Utilities</a></li><li><a class="tocitem" href="../../References/ref_download_examples/">Downloading examples</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-9" type="checkbox"/><label class="tocitem" for="menuitem-9"><span class="docs-label">Appendix</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Appendix/TEA/">TEA</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Manual</a></li><li class="is-active"><a href>Storage</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Storage</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/macroenergy/MacroEnergy.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/macroenergy/MacroEnergy.jl/blob/main/docs/src/Manual/Storage.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Storage"><a class="docs-heading-anchor" href="#Storage">Storage</a><a id="Storage-1"></a><a class="docs-heading-anchor-permalink" href="#Storage" title="Permalink"></a></h1><h2 id="Contents"><a class="docs-heading-anchor" href="#Contents">Contents</a><a id="Contents-1"></a><a class="docs-heading-anchor-permalink" href="#Contents" title="Permalink"></a></h2><p><a href="#manual-storage-overview">Overview</a> | <a href="#manual-storage-fields">Fields</a> | <a href="#manual-storage-types">Types</a> | <a href="#manual-storage-constructors">Constructors</a> | <a href="#manual-storage-methods">Methods</a> | <a href="#manual-storage-examples">Examples</a></p><h2 id="manual-storage-overview"><a class="docs-heading-anchor" href="#manual-storage-overview">Overview</a><a id="manual-storage-overview-1"></a><a class="docs-heading-anchor-permalink" href="#manual-storage-overview" title="Permalink"></a></h2><p><code>Storage</code> components store commodities over time, allowing for intertemporal energy management and system flexibility. They are one of the four primary components in Macro, alongside <code>Nodes</code>, <code>Edges</code>, and <code>Transformations</code>. They are sub-types of the <code>Vertex</code> type.</p><p>Each <code>Storage</code> can only handle flows of one Commodity so they are usually described with reference to that Commodity, e.g. as <code>Storage{Electricity}</code>, <code>Storage{Hydrogen}</code>, or <code>Storage{Heat}</code>. The general description is a <code>Storage{T}</code>, where <code>T</code> can be any Commodity or sub-Commodity.</p><h3 id="Storage-in-Assets"><a class="docs-heading-anchor" href="#Storage-in-Assets">Storage in Assets</a><a id="Storage-in-Assets-1"></a><a class="docs-heading-anchor-permalink" href="#Storage-in-Assets" title="Permalink"></a></h3><p><code>Storage{T}</code> components are incorporated into Assets, representing the ability of those Assets to store and release Commodities over time. This is particularly important for modeling :</p><ul><li><strong>Battery Storage</strong>: Electricity storage with charging and discharging capabilities</li><li><strong>Pumped Hydro</strong>: Large-scale electricity storage using water reservoirs</li><li><strong>Compressed Air Energy Storage (CAES)</strong>: Mechanical energy storage systems</li><li><strong>Hydrogen Storage</strong>: Chemical energy storage for fuel cells and industrial processes</li><li><strong>Heat Storage</strong>: Thermal energy storage for district heating systems</li></ul><h4 id="Battery-Storage-Asset"><a class="docs-heading-anchor" href="#Battery-Storage-Asset">Battery Storage Asset</a><a id="Battery-Storage-Asset-1"></a><a class="docs-heading-anchor-permalink" href="#Battery-Storage-Asset" title="Permalink"></a></h4><p>A battery storage Asset can be modeled as a <code>Storage{Electricity}</code> component connected to the other Electricity components through charging and discharging <code>Edges</code>. The <code>Storage</code> component tracks the state of charge of the system, including losses, while the <code>Edges</code> handle the power flows in and out of the battery, each potentially with different efficiencies and capacity limits.</p><h4 id="Hydrogen-Storage-Asset"><a class="docs-heading-anchor" href="#Hydrogen-Storage-Asset">Hydrogen Storage Asset</a><a id="Hydrogen-Storage-Asset-1"></a><a class="docs-heading-anchor-permalink" href="#Hydrogen-Storage-Asset" title="Permalink"></a></h4><p>A hydrogen storage Asset is a more complex Asset, as it requires <code>Electricity</code> flows to run the pumps and compressors necessary to charge and discharge the <code>Storage{Hydrogen}</code>.  This is achieved by connecting the <code>Storage{Hydrogen}</code> to <code>Electricity</code> and <code>Hydrogen</code> flows via <code>Transformation</code> components that convert between the two commodities. The <code>Storage{Hydrogen}</code> component itself manages the state of charge, losses, and capacity limits for hydrogen storage.</p><h4 id="Long-Duration-Storage"><a class="docs-heading-anchor" href="#Long-Duration-Storage">Long Duration Storage</a><a id="Long-Duration-Storage-1"></a><a class="docs-heading-anchor-permalink" href="#Long-Duration-Storage" title="Permalink"></a></h4><p>Many Macro models make use of representative periods to reduce the computational burden of modeling long time horizons. Under their ordinary balance Constraints, the state of charge of <code>Storage</code> components will be cyclic across each representative period, i.e. there will be zero net change in the state of charge. This ensures that the System does not have access to &quot;free&quot; mass or energy by preventing situations where the initial state of charge is greater than zero and the final state of charge is allowed to be zero.</p><p>While single period cycles are fine for storage which usually discharge within those periods, for example grid-scale Li-ion batteries with one week representative periods, they are not suitable for long duration storage systems that may discharge over multiple representative periods, such as seasonal storage systems. <code>LongDurationStorage</code> components are used to represent storage systems that operate across these representative periods, allowing for seasonal energy storage and inter-period coordination. The state of charge of <code>LongDurationStorage</code> components is tracked across the representative periods, ensuring that the energy balance is maintained over the entire modeling horizon.</p><h3 id="Storage-Outside-of-Assets"><a class="docs-heading-anchor" href="#Storage-Outside-of-Assets">Storage Outside of Assets</a><a id="Storage-Outside-of-Assets-1"></a><a class="docs-heading-anchor-permalink" href="#Storage-Outside-of-Assets" title="Permalink"></a></h3><p><code>Storage</code> components can be used outside of Assets but there is no standard inputs file to do so currently. Most Users will be better served by using <code>Storage</code> components within Assets, as this allows for more complex interactions and configurations. However, it is possible to define <code>Storages</code> directly in the Julia script you use to build and solve your model. Please feel free to reach out to the developemnt team via a GitHub issue if you have a use case for this.</p><h3 id="Key-Concepts"><a class="docs-heading-anchor" href="#Key-Concepts">Key Concepts</a><a id="Key-Concepts-1"></a><a class="docs-heading-anchor-permalink" href="#Key-Concepts" title="Permalink"></a></h3><ul><li><strong>Single Commodity Storage</strong>: Each Storage component handles one Commodity type</li><li><strong>Temporal Energy Management</strong>: Storage enables shifting energy demand and supply across time</li><li><strong>State of Charge Tracking</strong>: Storage track their time-dependent state of charge</li><li><strong>Capacity Limits</strong>: Unlike Nodes and Transformations, Storage have capacity limits on the energy and mass they can hold. They do not have charge and discharge limits. Those are handled by the Edges that connect to the Storage.</li><li><strong>Capacity Investment</strong>: Storage capacity can be fixed or expandable through investment</li><li><strong>Loss Modeling</strong>: Storage losses are typically modelled as a percentage of the energy or mass stored, impacting the state of charge over time</li><li><strong>Cyclic Operation</strong>: Storage state loops across modeling periods to ensure conservation of energy and mass</li><li><strong>Long Duration Storage</strong>: Storage can be configured to track state of charge across multiple representative periods, enabling seasonal storage within Systems using representative periods</li></ul><h2 id="manual-storage-fields"><a class="docs-heading-anchor" href="#manual-storage-fields">Storage Fields</a><a id="manual-storage-fields-1"></a><a class="docs-heading-anchor-permalink" href="#manual-storage-fields" title="Permalink"></a></h2><p><code>Storage</code> components have the following fields. When running a model, the fields are set by the input files. When creating an Asset, the defaults below can be altered using the <code>@storage_data</code> macro. The internal fields are used by Macro and are not intended to be set by users in most circumstances.</p><div class="admonition is-info" id="Units-in-Macro-c65f2c55f5df0dca"><header class="admonition-header">Units in Macro<a class="admonition-anchor" href="#Units-in-Macro-c65f2c55f5df0dca" title="Permalink"></a></header><div class="admonition-body"><p>In the tables below, we have assumed that the Storage component compoent in question is storing energy, such as electricity or heat. Therefore the unit of storage is MWh. Please swap these for tonnes or other units as appropriate for your use case. We have also assumed that your System is using hour-long time steps. You can use any set of units as long as they are consistent across your operations and investment inputs.</p></div></div><h3 id="Network-Structure"><a class="docs-heading-anchor" href="#Network-Structure">Network Structure</a><a id="Network-Structure-1"></a><a class="docs-heading-anchor-permalink" href="#Network-Structure" title="Permalink"></a></h3><table><tr><th style="text-align: right">Field</th><th style="text-align: right">Type</th><th style="text-align: right">Description</th><th style="text-align: right">Default</th></tr><tr><td style="text-align: right"><code>id</code></td><td style="text-align: right">Symbol</td><td style="text-align: right">Unique identifier</td><td style="text-align: right">-</td></tr><tr><td style="text-align: right"><code>location</code></td><td style="text-align: right">Union{Missing,Symbol}</td><td style="text-align: right">Location where storage is placed</td><td style="text-align: right">missing</td></tr><tr><td style="text-align: right"><code>commodity</code></td><td style="text-align: right">Type</td><td style="text-align: right">Commodity type being stored</td><td style="text-align: right">-</td></tr></table><h3 id="Storage-Configuration"><a class="docs-heading-anchor" href="#Storage-Configuration">Storage Configuration</a><a id="Storage-Configuration-1"></a><a class="docs-heading-anchor-permalink" href="#Storage-Configuration" title="Permalink"></a></h3><table><tr><th style="text-align: right">Field</th><th style="text-align: right">Type</th><th style="text-align: right">Description</th><th style="text-align: right">Units</th><th style="text-align: right">Default</th></tr><tr><td style="text-align: right"><code>charge_edge</code></td><td style="text-align: right">Union{Nothing,AbstractEdge}</td><td style="text-align: right">Edge representing charging flow</td><td style="text-align: right">-</td><td style="text-align: right">missing</td></tr><tr><td style="text-align: right"><code>discharge_edge</code></td><td style="text-align: right">Union{Nothing,AbstractEdge}</td><td style="text-align: right">Edge representing discharging flow</td><td style="text-align: right">-</td><td style="text-align: right">missing</td></tr><tr><td style="text-align: right"><code>spillage_edge</code></td><td style="text-align: right">Union{Nothing,AbstractEdge}</td><td style="text-align: right">Edge for spillage/waste flows</td><td style="text-align: right">-</td><td style="text-align: right">missing</td></tr><tr><td style="text-align: right"><code>charge_discharge_ratio</code></td><td style="text-align: right">Float64</td><td style="text-align: right">Ratio between charge and discharge rates</td><td style="text-align: right">-</td><td style="text-align: right">1.0</td></tr><tr><td style="text-align: right"><code>long_duration</code></td><td style="text-align: right">Bool</td><td style="text-align: right">Whether to use long duration storage</td><td style="text-align: right">-</td><td style="text-align: right">false</td></tr></table><h3 id="Investment-Parameters"><a class="docs-heading-anchor" href="#Investment-Parameters">Investment Parameters</a><a id="Investment-Parameters-1"></a><a class="docs-heading-anchor-permalink" href="#Investment-Parameters" title="Permalink"></a></h3><table><tr><th style="text-align: right">Field</th><th style="text-align: right">Type</th><th style="text-align: right">Description</th><th style="text-align: right">Units</th><th style="text-align: right">Default</th></tr><tr><td style="text-align: right"><code>can_expand</code></td><td style="text-align: right">Bool</td><td style="text-align: right">Whether capacity can be expanded</td><td style="text-align: right">-</td><td style="text-align: right">true</td></tr><tr><td style="text-align: right"><code>can_retire</code></td><td style="text-align: right">Bool</td><td style="text-align: right">Whether capacity can be retired</td><td style="text-align: right">-</td><td style="text-align: right">true</td></tr><tr><td style="text-align: right"><code>existing_capacity</code></td><td style="text-align: right">Float64</td><td style="text-align: right">Initial installed capacity</td><td style="text-align: right">MWh</td><td style="text-align: right">0.0</td></tr><tr><td style="text-align: right"><code>max_capacity</code></td><td style="text-align: right">Float64</td><td style="text-align: right">Maximum total capacity</td><td style="text-align: right">MWh</td><td style="text-align: right">Inf</td></tr><tr><td style="text-align: right"><code>min_capacity</code></td><td style="text-align: right">Float64</td><td style="text-align: right">Minimum total capacity</td><td style="text-align: right">MWh</td><td style="text-align: right">0.0</td></tr><tr><td style="text-align: right"><code>max_new_capacity</code></td><td style="text-align: right">Float64</td><td style="text-align: right">Maximum new capacity additions</td><td style="text-align: right">MWh</td><td style="text-align: right">Inf</td></tr><tr><td style="text-align: right"><code>capacity_size</code></td><td style="text-align: right">Float64</td><td style="text-align: right">Unit size for capacity decisions</td><td style="text-align: right">MWh</td><td style="text-align: right">1.0</td></tr></table><h3 id="Economic-Parameters"><a class="docs-heading-anchor" href="#Economic-Parameters">Economic Parameters</a><a id="Economic-Parameters-1"></a><a class="docs-heading-anchor-permalink" href="#Economic-Parameters" title="Permalink"></a></h3><table><tr><th style="text-align: right">Field</th><th style="text-align: right">Type</th><th style="text-align: right">Description</th><th style="text-align: right">Units</th><th style="text-align: right">Default</th></tr><tr><td style="text-align: right"><code>investment_cost</code></td><td style="text-align: right">Float64</td><td style="text-align: right">CAPEX per unit capacity</td><td style="text-align: right"><span>$</span>/MWh</td><td style="text-align: right">0.0</td></tr><tr><td style="text-align: right"><code>annualized_investment_cost</code></td><td style="text-align: right">Union{Nothing,Float64}</td><td style="text-align: right">Annualized CAPEX</td><td style="text-align: right"><span>$</span>/MWh/yr</td><td style="text-align: right">calculated</td></tr><tr><td style="text-align: right"><code>fixed_om_cost</code></td><td style="text-align: right">Float64</td><td style="text-align: right">Fixed O&amp;M costs</td><td style="text-align: right"><span>$</span>/MWh/yr</td><td style="text-align: right">0.0</td></tr><tr><td style="text-align: right"><code>variable_om_cost</code></td><td style="text-align: right">Float64</td><td style="text-align: right">Variable O&amp;M costs</td><td style="text-align: right"><span>$</span>/MWh</td><td style="text-align: right">0.0</td></tr><tr><td style="text-align: right"><code>wacc</code></td><td style="text-align: right">Float64</td><td style="text-align: right">Weighted average cost of capital</td><td style="text-align: right">fraction</td><td style="text-align: right">0.0</td></tr><tr><td style="text-align: right"><code>lifetime</code></td><td style="text-align: right">Int</td><td style="text-align: right">Asset lifetime in years</td><td style="text-align: right">years</td><td style="text-align: right">1</td></tr><tr><td style="text-align: right"><code>capital_recovery_period</code></td><td style="text-align: right">Int</td><td style="text-align: right">Investment recovery period</td><td style="text-align: right">years</td><td style="text-align: right">1</td></tr><tr><td style="text-align: right"><code>retirement_period</code></td><td style="text-align: right">Int</td><td style="text-align: right">Retirement period</td><td style="text-align: right">years</td><td style="text-align: right">0</td></tr></table><h3 id="Operational-Parameters"><a class="docs-heading-anchor" href="#Operational-Parameters">Operational Parameters</a><a id="Operational-Parameters-1"></a><a class="docs-heading-anchor-permalink" href="#Operational-Parameters" title="Permalink"></a></h3><table><tr><th style="text-align: right">Field</th><th style="text-align: right">Type</th><th style="text-align: right">Description</th><th style="text-align: right">Units</th><th style="text-align: right">Default</th></tr><tr><td style="text-align: right"><code>min_duration</code></td><td style="text-align: right">Float64</td><td style="text-align: right">Minimum storage duration</td><td style="text-align: right">hours</td><td style="text-align: right">0.0</td></tr><tr><td style="text-align: right"><code>max_duration</code></td><td style="text-align: right">Float64</td><td style="text-align: right">Maximum storage duration</td><td style="text-align: right">hours</td><td style="text-align: right">0.0</td></tr><tr><td style="text-align: right"><code>min_storage_level</code></td><td style="text-align: right">Float64</td><td style="text-align: right">Minimum storage level (fraction)</td><td style="text-align: right">fraction</td><td style="text-align: right">0.0</td></tr><tr><td style="text-align: right"><code>max_storage_level</code></td><td style="text-align: right">Float64</td><td style="text-align: right">Maximum storage level (fraction)</td><td style="text-align: right">fraction</td><td style="text-align: right">0.0</td></tr><tr><td style="text-align: right"><code>min_outflow_fraction</code></td><td style="text-align: right">Float64</td><td style="text-align: right">Minimum discharge rate (fraction)</td><td style="text-align: right">fraction</td><td style="text-align: right">0.0</td></tr><tr><td style="text-align: right"><code>loss_fraction</code></td><td style="text-align: right">Vector{Float64}</td><td style="text-align: right">Storage losses per timestep</td><td style="text-align: right">fraction</td><td style="text-align: right">Float64[]</td></tr></table><h3 id="Balance-and-Constraint-Tracking-(Internal)"><a class="docs-heading-anchor" href="#Balance-and-Constraint-Tracking-(Internal)">Balance and Constraint Tracking (Internal)</a><a id="Balance-and-Constraint-Tracking-(Internal)-1"></a><a class="docs-heading-anchor-permalink" href="#Balance-and-Constraint-Tracking-(Internal)" title="Permalink"></a></h3><table><tr><th style="text-align: right">Field</th><th style="text-align: right">Type</th><th style="text-align: right">Description</th><th style="text-align: right">Units</th><th style="text-align: right">Default</th></tr><tr><td style="text-align: right"><code>balance_data</code></td><td style="text-align: right">Dict{Symbol,Dict{Symbol,Float64}}</td><td style="text-align: right">Balance equation coefficients</td><td style="text-align: right">-</td><td style="text-align: right">Dict{Symbol,Dict{Symbol,Float64}}()</td></tr><tr><td style="text-align: right"><code>constraints</code></td><td style="text-align: right">Vector{AbstractTypeConstraint}</td><td style="text-align: right">Additional constraints</td><td style="text-align: right">-</td><td style="text-align: right">Vector{AbstractTypeConstraint}()</td></tr><tr><td style="text-align: right"><code>operation_expr</code></td><td style="text-align: right">Dict</td><td style="text-align: right">Operational JuMP expressions</td><td style="text-align: right">-</td><td style="text-align: right">Dict()</td></tr></table><h3 id="Investment-and-Operations-Tracking-(Internal)"><a class="docs-heading-anchor" href="#Investment-and-Operations-Tracking-(Internal)">Investment and Operations Tracking (Internal)</a><a id="Investment-and-Operations-Tracking-(Internal)-1"></a><a class="docs-heading-anchor-permalink" href="#Investment-and-Operations-Tracking-(Internal)" title="Permalink"></a></h3><table><tr><th style="text-align: right">Field</th><th style="text-align: right">Type</th><th style="text-align: right">Description</th><th style="text-align: right">Units</th><th style="text-align: right">Default</th></tr><tr><td style="text-align: right"><code>capacity</code></td><td style="text-align: right">Union{AffExpr,Float64}</td><td style="text-align: right">Total available capacity</td><td style="text-align: right">MWh</td><td style="text-align: right">-</td></tr><tr><td style="text-align: right"><code>new_capacity</code></td><td style="text-align: right">JuMPVariable</td><td style="text-align: right">New capacity investments</td><td style="text-align: right">MWh</td><td style="text-align: right">-</td></tr><tr><td style="text-align: right"><code>new_capacity_track</code></td><td style="text-align: right">Dict{Int,Float64}</td><td style="text-align: right">Capacity additions by period</td><td style="text-align: right">MWh</td><td style="text-align: right">-</td></tr><tr><td style="text-align: right"><code>retired_capacity</code></td><td style="text-align: right">JuMPVariable</td><td style="text-align: right">Capacity retirements</td><td style="text-align: right">MWh</td><td style="text-align: right">-</td></tr><tr><td style="text-align: right"><code>retired_capacity_track</code></td><td style="text-align: right">Dict{Int,Float64}</td><td style="text-align: right">Retirements by period</td><td style="text-align: right">MWh</td><td style="text-align: right">-</td></tr><tr><td style="text-align: right"><code>new_units</code></td><td style="text-align: right">Union{Missing,JuMPVariable}</td><td style="text-align: right">New unit installations</td><td style="text-align: right">units</td><td style="text-align: right">-</td></tr><tr><td style="text-align: right"><code>retired_units</code></td><td style="text-align: right">Union{Missing,JuMPVariable}</td><td style="text-align: right">Unit retirements</td><td style="text-align: right">units</td><td style="text-align: right">-</td></tr><tr><td style="text-align: right"><code>storage_level</code></td><td style="text-align: right">Vector{VariableRef}</td><td style="text-align: right">Storage level at each timestep</td><td style="text-align: right">MWh</td><td style="text-align: right">-</td></tr></table><h3 id="Long-Duration-Storage-Tracking-(LongDurationStorage-only,-Internal)"><a class="docs-heading-anchor" href="#Long-Duration-Storage-Tracking-(LongDurationStorage-only,-Internal)">Long Duration Storage Tracking (LongDurationStorage only, Internal)</a><a id="Long-Duration-Storage-Tracking-(LongDurationStorage-only,-Internal)-1"></a><a class="docs-heading-anchor-permalink" href="#Long-Duration-Storage-Tracking-(LongDurationStorage-only,-Internal)" title="Permalink"></a></h3><table><tr><th style="text-align: right">Field</th><th style="text-align: right">Type</th><th style="text-align: right">Description</th><th style="text-align: right">Units</th><th style="text-align: right">Default</th></tr><tr><td style="text-align: right"><code>storage_initial</code></td><td style="text-align: right">Union{JuMPVariable,Dict{Int64,Float64}}</td><td style="text-align: right">Initial storage level by period</td><td style="text-align: right">MWh</td><td style="text-align: right">Vector{VariableRef}()</td></tr><tr><td style="text-align: right"><code>storage_change</code></td><td style="text-align: right">Union{JuMPVariable,Dict{Int64,Float64}}</td><td style="text-align: right">Storage change by period</td><td style="text-align: right">MWh</td><td style="text-align: right">Vector{VariableRef}()</td></tr></table><h2 id="manual-storage-types"><a class="docs-heading-anchor" href="#manual-storage-types">Types</a><a id="manual-storage-types-1"></a><a class="docs-heading-anchor-permalink" href="#manual-storage-types" title="Permalink"></a></h2><h3 id="Type-Hierarchy"><a class="docs-heading-anchor" href="#Type-Hierarchy">Type Hierarchy</a><a id="Type-Hierarchy-1"></a><a class="docs-heading-anchor-permalink" href="#Type-Hierarchy" title="Permalink"></a></h3><p><code>Storage</code> types follow a hierarchical structure rooted in the abstract <code>AbstractVertex</code> type:</p><pre><code class="language-julia hljs">AbstractVertex
├── Node{T}
├── AbstractStorage{T}
│   ├── Storage{T}
│   └── LongDurationStorage{T}
└── Transformation{T}</code></pre><p>Where <code>T</code> is a Commodity type parameter that specifies which commodity the Storage handles.</p><h3 id="AbstractStorage{T}"><a class="docs-heading-anchor" href="#AbstractStorage{T}">AbstractStorage{T}</a><a id="AbstractStorage{T}-1"></a><a class="docs-heading-anchor-permalink" href="#AbstractStorage{T}" title="Permalink"></a></h3><p>Abstract supertype for all storage types, parameterized by commodity type <code>T</code>. Provides common functionality for:</p><ul><li>Unique identification (<code>id</code>)</li><li>Time-based data management (<code>timedata</code>)</li><li>Balance equation handling (<code>balance_data</code>)</li><li>Constraint management (<code>constraints</code>)</li><li>Operational expressions (<code>operation_expr</code>)</li><li>Storage-specific operations (charging, discharging, capacity management)</li></ul><h3 id="Storage{T}"><a class="docs-heading-anchor" href="#Storage{T}">Storage{T}</a><a id="Storage{T}-1"></a><a class="docs-heading-anchor-permalink" href="#Storage{T}" title="Permalink"></a></h3><p>Standard storage implementation for short-term storage that operates within representative periods.</p><h3 id="LongDurationStorage{T}"><a class="docs-heading-anchor" href="#LongDurationStorage{T}">LongDurationStorage{T}</a><a id="LongDurationStorage{T}-1"></a><a class="docs-heading-anchor-permalink" href="#LongDurationStorage{T}" title="Permalink"></a></h3><p>Extended storage implementation for long-term storage that operates across multiple representative periods.</p><h2 id="manual-storage-constructors"><a class="docs-heading-anchor" href="#manual-storage-constructors">Constructors</a><a id="manual-storage-constructors-1"></a><a class="docs-heading-anchor-permalink" href="#manual-storage-constructors" title="Permalink"></a></h2><h3 id="Keyword-Constructors"><a class="docs-heading-anchor" href="#Keyword-Constructors">Keyword Constructors</a><a id="Keyword-Constructors-1"></a><a class="docs-heading-anchor-permalink" href="#Keyword-Constructors" title="Permalink"></a></h3><pre><code class="language-julia hljs">Storage{T}(; id::Symbol, timedata::TimeData, [additional_fields...])

LongDurationStorage{T}(; id::Symbol, timedata::TimeData, [additional_fields...])</code></pre><p>Direct constructors using keyword arguments for all fields.</p><table><tr><th style="text-align: right">Parameter</th><th style="text-align: right">Type</th><th style="text-align: right">Description</th><th style="text-align: right">Required</th></tr><tr><td style="text-align: right"><code>id</code></td><td style="text-align: right">Symbol</td><td style="text-align: right">Unique identifier</td><td style="text-align: right">Yes</td></tr><tr><td style="text-align: right"><code>timedata</code></td><td style="text-align: right">TimeData</td><td style="text-align: right">Time-related data structure</td><td style="text-align: right">Yes</td></tr><tr><td style="text-align: right"><code>charge_edge</code></td><td style="text-align: right">Union{Nothing,AbstractEdge}</td><td style="text-align: right">Edge for charging flows</td><td style="text-align: right">No</td></tr><tr><td style="text-align: right"><code>discharge_edge</code></td><td style="text-align: right">Union{Nothing,AbstractEdge}</td><td style="text-align: right">Edge for discharging flows</td><td style="text-align: right">No</td></tr><tr><td style="text-align: right"><code>existing_capacity</code></td><td style="text-align: right">Float64</td><td style="text-align: right">Initial installed capacity</td><td style="text-align: right">No</td></tr><tr><td style="text-align: right"><code>max_capacity</code></td><td style="text-align: right">Float64</td><td style="text-align: right">Maximum storage capacity</td><td style="text-align: right">No</td></tr><tr><td style="text-align: right"><code>loss_fraction</code></td><td style="text-align: right">Vector{Float64}</td><td style="text-align: right">Storage loss rates</td><td style="text-align: right">No</td></tr><tr><td style="text-align: right"><code>...</code></td><td style="text-align: right">Various</td><td style="text-align: right">Additional storage-specific fields</td><td style="text-align: right">No</td></tr></table><h3 id="Primary-Constructors"><a class="docs-heading-anchor" href="#Primary-Constructors">Primary Constructors</a><a id="Primary-Constructors-1"></a><a class="docs-heading-anchor-permalink" href="#Primary-Constructors" title="Permalink"></a></h3><pre><code class="language-julia hljs">Storage(id::Symbol, data::Dict{Symbol,Any}, time_data::TimeData, commodity::DataType)

LongDurationStorage(id::Symbol, data::Dict{Symbol,Any}, time_data::TimeData, commodity::DataType)</code></pre><p>Creates Storage components from input data dictionary, time data, and commodity type.</p><table><tr><th style="text-align: right">Parameter</th><th style="text-align: right">Type</th><th style="text-align: right">Description</th></tr><tr><td style="text-align: right"><code>id</code></td><td style="text-align: right">Symbol</td><td style="text-align: right">Unique identifier for the storage</td></tr><tr><td style="text-align: right"><code>data</code></td><td style="text-align: right">Dict{Symbol,Any}</td><td style="text-align: right">Dictionary of storage configuration data</td></tr><tr><td style="text-align: right"><code>time_data</code></td><td style="text-align: right">TimeData</td><td style="text-align: right">Time-related data structure</td></tr><tr><td style="text-align: right"><code>commodity</code></td><td style="text-align: right">DataType</td><td style="text-align: right">Commodity type for the storage</td></tr></table><h3 id="Factory-Constructors"><a class="docs-heading-anchor" href="#Factory-Constructors">Factory Constructors</a><a id="Factory-Constructors-1"></a><a class="docs-heading-anchor-permalink" href="#Factory-Constructors" title="Permalink"></a></h3><pre><code class="language-julia hljs">make_storage(id::Symbol, data::Dict{Symbol,Any}, time_data::TimeData, commodity::DataType)

make_long_duration_storage(id::Symbol, data::Dict{Symbol,Any}, time_data::TimeData, commodity::DataType)</code></pre><p>Internal factory methods for creating Storage components with data processing.</p><table><tr><th style="text-align: right">Parameter</th><th style="text-align: right">Type</th><th style="text-align: right">Description</th></tr><tr><td style="text-align: right"><code>id</code></td><td style="text-align: right">Symbol</td><td style="text-align: right">Unique identifier for the storage</td></tr><tr><td style="text-align: right"><code>data</code></td><td style="text-align: right">Dict{Symbol,Any}</td><td style="text-align: right">Configuration data for the storage</td></tr><tr><td style="text-align: right"><code>time_data</code></td><td style="text-align: right">TimeData</td><td style="text-align: right">Time-related data structure</td></tr><tr><td style="text-align: right"><code>commodity</code></td><td style="text-align: right">DataType</td><td style="text-align: right">Commodity type for the storage</td></tr></table><h2 id="manual-storage-methods"><a class="docs-heading-anchor" href="#manual-storage-methods">Methods</a><a id="manual-storage-methods-1"></a><a class="docs-heading-anchor-permalink" href="#manual-storage-methods" title="Permalink"></a></h2><h3 id="Accessor-Methods"><a class="docs-heading-anchor" href="#Accessor-Methods">Accessor Methods</a><a id="Accessor-Methods-1"></a><a class="docs-heading-anchor-permalink" href="#Accessor-Methods" title="Permalink"></a></h3><p>Methods for accessing storage data and properties.</p><table><tr><th style="text-align: right">Method</th><th style="text-align: right">Description</th><th style="text-align: right">Return Type</th></tr><tr><td style="text-align: right"><code>id(storage)</code></td><td style="text-align: right">Get storage identifier</td><td style="text-align: right"><code>Symbol</code></td></tr><tr><td style="text-align: right"><code>commodity_type(storage)</code></td><td style="text-align: right">Get commodity type parameter</td><td style="text-align: right"><code>DataType</code></td></tr><tr><td style="text-align: right"><code>charge_edge(storage)</code></td><td style="text-align: right">Get charging edge</td><td style="text-align: right"><code>Union{Nothing,AbstractEdge}</code></td></tr><tr><td style="text-align: right"><code>discharge_edge(storage)</code></td><td style="text-align: right">Get discharging edge</td><td style="text-align: right"><code>Union{Nothing,AbstractEdge}</code></td></tr><tr><td style="text-align: right"><code>spillage_edge(storage)</code></td><td style="text-align: right">Get spillage edge</td><td style="text-align: right"><code>Union{Nothing,AbstractEdge}</code></td></tr><tr><td style="text-align: right"><code>storage_level(storage)</code></td><td style="text-align: right">Get storage level variables</td><td style="text-align: right"><code>Vector{VariableRef}</code></td></tr><tr><td style="text-align: right"><code>storage_level(storage, t)</code></td><td style="text-align: right">Get storage level at timestep t</td><td style="text-align: right"><code>VariableRef</code></td></tr></table><h3 id="Capacity-and-Investment-Methods"><a class="docs-heading-anchor" href="#Capacity-and-Investment-Methods">Capacity and Investment Methods</a><a id="Capacity-and-Investment-Methods-1"></a><a class="docs-heading-anchor-permalink" href="#Capacity-and-Investment-Methods" title="Permalink"></a></h3><p>Methods for managing storage capacity and investment decisions.</p><table><tr><th style="text-align: right">Method</th><th style="text-align: right">Description</th><th style="text-align: right">Return Type</th></tr><tr><td style="text-align: right"><code>can_expand(storage)</code></td><td style="text-align: right">Check if storage can be expanded</td><td style="text-align: right"><code>Bool</code></td></tr><tr><td style="text-align: right"><code>can_retire(storage)</code></td><td style="text-align: right">Check if storage can be retired</td><td style="text-align: right"><code>Bool</code></td></tr><tr><td style="text-align: right"><code>has_capacity(storage)</code></td><td style="text-align: right">Check if storage has capacity constraints</td><td style="text-align: right"><code>Bool</code></td></tr><tr><td style="text-align: right"><code>capacity(storage)</code></td><td style="text-align: right">Get total available capacity</td><td style="text-align: right"><code>Union{AffExpr,Float64}</code></td></tr><tr><td style="text-align: right"><code>existing_capacity(storage)</code></td><td style="text-align: right">Get existing capacity</td><td style="text-align: right"><code>Float64</code></td></tr><tr><td style="text-align: right"><code>new_capacity(storage)</code></td><td style="text-align: right">Get new capacity variable</td><td style="text-align: right"><code>Union{AffExpr,Float64}</code></td></tr><tr><td style="text-align: right"><code>retired_capacity(storage)</code></td><td style="text-align: right">Get retired capacity variable</td><td style="text-align: right"><code>Union{AffExpr,Float64}</code></td></tr><tr><td style="text-align: right"><code>max_capacity(storage)</code></td><td style="text-align: right">Get maximum capacity</td><td style="text-align: right"><code>Float64</code></td></tr><tr><td style="text-align: right"><code>min_capacity(storage)</code></td><td style="text-align: right">Get minimum capacity</td><td style="text-align: right"><code>Float64</code></td></tr><tr><td style="text-align: right"><code>max_new_capacity(storage)</code></td><td style="text-align: right">Get maximum new capacity</td><td style="text-align: right"><code>Float64</code></td></tr><tr><td style="text-align: right"><code>capacity_size(storage)</code></td><td style="text-align: right">Get capacity unit size</td><td style="text-align: right"><code>Float64</code></td></tr><tr><td style="text-align: right"><code>new_capacity_track(storage)</code></td><td style="text-align: right">Get capacity additions by period</td><td style="text-align: right"><code>Dict{Int64,AffExpr}</code></td></tr><tr><td style="text-align: right"><code>new_capacity_track(storage, s)</code></td><td style="text-align: right">Get capacity additions for period s</td><td style="text-align: right"><code>Float64</code></td></tr><tr><td style="text-align: right"><code>retired_capacity_track(storage)</code></td><td style="text-align: right">Get retirements by period</td><td style="text-align: right"><code>Dict{Int64,AffExpr}</code></td></tr><tr><td style="text-align: right"><code>retired_capacity_track(storage, s)</code></td><td style="text-align: right">Get retirements for period s</td><td style="text-align: right"><code>Float64</code></td></tr><tr><td style="text-align: right"><code>new_units(storage)</code></td><td style="text-align: right">Get new unit variables</td><td style="text-align: right"><code>Union{Missing,JuMPVariable}</code></td></tr><tr><td style="text-align: right"><code>retired_units(storage)</code></td><td style="text-align: right">Get retired unit variables</td><td style="text-align: right"><code>Union{Missing,JuMPVariable}</code></td></tr></table><h3 id="Economic-Parameters-Methods"><a class="docs-heading-anchor" href="#Economic-Parameters-Methods">Economic Parameters Methods</a><a id="Economic-Parameters-Methods-1"></a><a class="docs-heading-anchor-permalink" href="#Economic-Parameters-Methods" title="Permalink"></a></h3><p>Methods for accessing economic parameters and costs.</p><table><tr><th style="text-align: right">Method</th><th style="text-align: right">Description</th><th style="text-align: right">Return Type</th></tr><tr><td style="text-align: right"><code>investment_cost(storage)</code></td><td style="text-align: right">Get investment cost per unit capacity</td><td style="text-align: right"><code>Float64</code></td></tr><tr><td style="text-align: right"><code>annualized_investment_cost(storage)</code></td><td style="text-align: right">Get annualized investment cost</td><td style="text-align: right"><code>Union{Nothing,Float64}</code></td></tr><tr><td style="text-align: right"><code>fixed_om_cost(storage)</code></td><td style="text-align: right">Get fixed O&amp;M cost</td><td style="text-align: right"><code>Float64</code></td></tr><tr><td style="text-align: right"><code>wacc(storage)</code></td><td style="text-align: right">Get weighted average cost of capital</td><td style="text-align: right"><code>Union{Missing,Float64}</code></td></tr><tr><td style="text-align: right"><code>lifetime(storage)</code></td><td style="text-align: right">Get asset lifetime</td><td style="text-align: right"><code>Int64</code></td></tr><tr><td style="text-align: right"><code>capital_recovery_period(storage)</code></td><td style="text-align: right">Get capital recovery period</td><td style="text-align: right"><code>Int64</code></td></tr><tr><td style="text-align: right"><code>retirement_period(storage)</code></td><td style="text-align: right">Get retirement period</td><td style="text-align: right"><code>Int64</code></td></tr></table><h3 id="Operational-Parameters-Methods"><a class="docs-heading-anchor" href="#Operational-Parameters-Methods">Operational Parameters Methods</a><a id="Operational-Parameters-Methods-1"></a><a class="docs-heading-anchor-permalink" href="#Operational-Parameters-Methods" title="Permalink"></a></h3><p>Methods for accessing operational constraints and characteristics.</p><table><tr><th style="text-align: right">Method</th><th style="text-align: right">Description</th><th style="text-align: right">Return Type</th></tr><tr><td style="text-align: right"><code>loss_fraction(storage)</code></td><td style="text-align: right">Get storage loss profile</td><td style="text-align: right"><code>Vector{Float64}</code></td></tr><tr><td style="text-align: right"><code>loss_fraction(storage, t)</code></td><td style="text-align: right">Get storage loss at timestep t</td><td style="text-align: right"><code>Float64</code></td></tr><tr><td style="text-align: right"><code>min_storage_level(storage)</code></td><td style="text-align: right">Get minimum storage level</td><td style="text-align: right"><code>Float64</code></td></tr><tr><td style="text-align: right"><code>max_storage_level(storage)</code></td><td style="text-align: right">Get maximum storage level</td><td style="text-align: right"><code>Float64</code></td></tr><tr><td style="text-align: right"><code>min_duration(storage)</code></td><td style="text-align: right">Get minimum storage duration</td><td style="text-align: right"><code>Float64</code></td></tr><tr><td style="text-align: right"><code>max_duration(storage)</code></td><td style="text-align: right">Get maximum storage duration</td><td style="text-align: right"><code>Float64</code></td></tr><tr><td style="text-align: right"><code>min_outflow_fraction(storage)</code></td><td style="text-align: right">Get minimum discharge rate</td><td style="text-align: right"><code>Float64</code></td></tr><tr><td style="text-align: right"><code>charge_discharge_ratio(storage)</code></td><td style="text-align: right">Get charge/discharge ratio</td><td style="text-align: right"><code>Float64</code></td></tr></table><h3 id="Long-Duration-Storage-Methods-(LongDurationStorage-only)"><a class="docs-heading-anchor" href="#Long-Duration-Storage-Methods-(LongDurationStorage-only)">Long Duration Storage Methods (LongDurationStorage only)</a><a id="Long-Duration-Storage-Methods-(LongDurationStorage-only)-1"></a><a class="docs-heading-anchor-permalink" href="#Long-Duration-Storage-Methods-(LongDurationStorage-only)" title="Permalink"></a></h3><p>Additional methods specific to long duration storage.</p><table><tr><th style="text-align: right">Method</th><th style="text-align: right">Description</th><th style="text-align: right">Return Type</th></tr><tr><td style="text-align: right"><code>storage_initial(storage)</code></td><td style="text-align: right">Get initial storage level variables</td><td style="text-align: right"><code>Union{JuMPVariable,Dict{Int64,Float64}}</code></td></tr><tr><td style="text-align: right"><code>storage_change(storage)</code></td><td style="text-align: right">Get storage change variables</td><td style="text-align: right"><code>Union{JuMPVariable,Dict{Int64,Float64}}</code></td></tr></table><h3 id="Balance-and-Constraint-Methods-(Inherited-from-AbstractVertex)"><a class="docs-heading-anchor" href="#Balance-and-Constraint-Methods-(Inherited-from-AbstractVertex)">Balance and Constraint Methods (Inherited from AbstractVertex)</a><a id="Balance-and-Constraint-Methods-(Inherited-from-AbstractVertex)-1"></a><a class="docs-heading-anchor-permalink" href="#Balance-and-Constraint-Methods-(Inherited-from-AbstractVertex)" title="Permalink"></a></h3><p>Methods for managing balance equations and constraints.</p><table><tr><th style="text-align: right">Method</th><th style="text-align: right">Description</th><th style="text-align: right">Return Type</th></tr><tr><td style="text-align: right"><code>balance_ids(storage)</code></td><td style="text-align: right">Get IDs of all balance equations</td><td style="text-align: right"><code>Vector{Symbol}</code></td></tr><tr><td style="text-align: right"><code>balance_data(storage, i)</code></td><td style="text-align: right">Get input data for balance equation i</td><td style="text-align: right"><code>Dict{Symbol,Float64}</code></td></tr><tr><td style="text-align: right"><code>get_balance(storage, i)</code></td><td style="text-align: right">Get balance equation expression for i</td><td style="text-align: right"><code>JuMP.Expression</code></td></tr><tr><td style="text-align: right"><code>get_balance(storage, i, t)</code></td><td style="text-align: right">Get balance equation expression for i at time t</td><td style="text-align: right"><code>JuMP.Expression</code></td></tr><tr><td style="text-align: right"><code>all_constraints(storage)</code></td><td style="text-align: right">Get all constraints applied to the storage</td><td style="text-align: right"><code>Vector{AbstractTypeConstraint}</code></td></tr><tr><td style="text-align: right"><code>all_constraints_types(storage)</code></td><td style="text-align: right">Get types of all constraints</td><td style="text-align: right"><code>Vector{DataType}</code></td></tr><tr><td style="text-align: right"><code>get_constraint_by_type(storage, constraint_type)</code></td><td style="text-align: right">Get constraint of specified type</td><td style="text-align: right"><code>AbstractTypeConstraint</code></td></tr></table><h3 id="Model-Building-Methods"><a class="docs-heading-anchor" href="#Model-Building-Methods">Model Building Methods</a><a id="Model-Building-Methods-1"></a><a class="docs-heading-anchor-permalink" href="#Model-Building-Methods" title="Permalink"></a></h3><p>Methods used internally during model construction.</p><table><tr><th style="text-align: right">Method</th><th style="text-align: right">Description</th><th style="text-align: right">Return Type</th></tr><tr><td style="text-align: right"><code>add_linking_variables!(storage, model)</code></td><td style="text-align: right">Add linking variables to JuMP model</td><td style="text-align: right"><code>Nothing</code></td></tr><tr><td style="text-align: right"><code>define_available_capacity!(storage, model)</code></td><td style="text-align: right">Define available capacity constraints</td><td style="text-align: right"><code>Nothing</code></td></tr><tr><td style="text-align: right"><code>planning_model!(storage, model)</code></td><td style="text-align: right">Add planning model constraints</td><td style="text-align: right"><code>Nothing</code></td></tr><tr><td style="text-align: right"><code>operation_model!(storage, model)</code></td><td style="text-align: right">Add operational model constraints</td><td style="text-align: right"><code>Nothing</code></td></tr><tr><td style="text-align: right"><code>compute_investment_costs!(storage, model)</code></td><td style="text-align: right">Calculate annualized investment costs</td><td style="text-align: right"><code>Nothing</code></td></tr><tr><td style="text-align: right"><code>compute_om_fixed_costs!(storage, model)</code></td><td style="text-align: right">Calculate fixed O&amp;M costs</td><td style="text-align: right"><code>Nothing</code></td></tr><tr><td style="text-align: right"><code>compute_fixed_costs!(storage, model)</code></td><td style="text-align: right">Calculate total fixed costs</td><td style="text-align: right"><code>Nothing</code></td></tr></table><h3 id="Factory-Methods"><a class="docs-heading-anchor" href="#Factory-Methods">Factory Methods</a><a id="Factory-Methods-1"></a><a class="docs-heading-anchor-permalink" href="#Factory-Methods" title="Permalink"></a></h3><p>Methods for creating storage components.</p><table><tr><th style="text-align: right">Method</th><th style="text-align: right">Description</th><th style="text-align: right">Return Type</th></tr><tr><td style="text-align: right"><code>make_storage(id, data, time_data, commodity)</code></td><td style="text-align: right">Create standard storage component</td><td style="text-align: right"><code>Storage{T}</code></td></tr><tr><td style="text-align: right"><code>make_long_duration_storage(id, data, time_data, commodity)</code></td><td style="text-align: right">Create long duration storage component</td><td style="text-align: right"><code>LongDurationStorage{T}</code></td></tr></table><h2 id="manual-storage-examples"><a class="docs-heading-anchor" href="#manual-storage-examples">Examples</a><a id="manual-storage-examples-1"></a><a class="docs-heading-anchor-permalink" href="#manual-storage-examples" title="Permalink"></a></h2><h3 id="Battery-Storage"><a class="docs-heading-anchor" href="#Battery-Storage">Battery Storage</a><a id="Battery-Storage-1"></a><a class="docs-heading-anchor-permalink" href="#Battery-Storage" title="Permalink"></a></h3><p>Battery Assets are modeled as a <code>Storage{Electricity}</code> component with charging and discharging <code>Edge{Electricity}</code>.</p><h4 id="Battery-Asset,-Standard-JSON-Input-Format"><a class="docs-heading-anchor" href="#Battery-Asset,-Standard-JSON-Input-Format">Battery Asset, Standard JSON Input Format</a><a id="Battery-Asset,-Standard-JSON-Input-Format-1"></a><a class="docs-heading-anchor-permalink" href="#Battery-Asset,-Standard-JSON-Input-Format" title="Permalink"></a></h4><p>As Assets with two <code>Edges</code> with capacity, the standard JSON inputs for Battery Assets are more complex to ensure Macro can parse similar fields for the charging and discharging <code>Edges</code>. As shown below, these Assets make greater use of prefixes to differentiate the <code>Edge</code> and <code>Storage</code> fields.</p><pre><code class="language-json hljs">{
    &quot;type&quot;: &quot;Battery&quot;,
    &quot;global_data&quot;: {
        
    },
    &quot;instance_data&quot;: [
        {
            &quot;id&quot;: &quot;battery_boston&quot;,
            &quot;location&quot;: &quot;boston&quot;,
            &quot;storage_can_retire&quot;: false,
            &quot;storage_investment_cost&quot;: 17013.88552,
            &quot;storage_fixed_om_cost&quot;: 4477.587766,
            &quot;storage_max_duration&quot;: 10,
            &quot;storage_min_duration&quot;: 1,
            &quot;discharge_can_retire&quot;: false,
            &quot;discharge_investment_cost&quot;: 26886.40679,
            &quot;discharge_fixed_om_cost&quot;: 7075.764437,
            &quot;discharge_variable_om_cost&quot;: 1,
            &quot;discharge_efficiency&quot;: 0.92,
            &quot;charge_variable_om_cost&quot;: 1,
            &quot;charge_efficiency&quot;: 0.92,
            &quot;storage_constraints&quot;: {
                &quot;StorageCapacityConstraint&quot;: true,
                &quot;StorageSymmetricCapacityConstraint&quot;: true,
                &quot;StorageMinDurationConstraint&quot;: true,
                &quot;StorageMaxDurationConstraint&quot;: true,
                &quot;BalanceConstraint&quot;: true
            },
            &quot;discharge_constraints&quot;: {
                &quot;CapacityConstraint&quot;: true,
                &quot;StorageDischargeLimitConstraint&quot;: true
            }
        }
    ]
}</code></pre><h4 id="Battery-Asset,-Advanced-JSON-Input-Format"><a class="docs-heading-anchor" href="#Battery-Asset,-Advanced-JSON-Input-Format">Battery Asset, Advanced JSON Input Format</a><a id="Battery-Asset,-Advanced-JSON-Input-Format-1"></a><a class="docs-heading-anchor-permalink" href="#Battery-Asset,-Advanced-JSON-Input-Format" title="Permalink"></a></h4><p>Using the advanced input format makes it easier to understand the structure of the Battery. This format still makes use of well-chosen defaults to reduce the number of fields which must be specified for each <code>Edge</code>.</p><pre><code class="language-json hljs">{
    &quot;type&quot;: &quot;Battery&quot;,
    &quot;global_data&quot;: {},
    &quot;instance_data&quot;: [
        {
            &quot;id&quot;: &quot;battery_boston&quot;,            
            &quot;edges&quot;: {
                &quot;discharge_edge&quot;: {
                    &quot;end_vertex&quot;: &quot;boston_elec&quot;,
                    &quot;existing_capacity&quot; : 0.0,
                    &quot;fixed_om_cost&quot; : 7075.764437,
                    &quot;investment_cost&quot;: 26886.40679,
                    &quot;variable_om_cost&quot;: 1,
                    &quot;efficiency&quot;: 0.92,
                    &quot;commodity&quot;: &quot;Electricity&quot;,
                    &quot;unidirectional&quot;: true,
                    &quot;has_capacity&quot;: true,
                    &quot;can_expand&quot;: true,
                    &quot;can_retire&quot;: false,
                    &quot;constraints&quot;: {
                        &quot;CapacityConstraint&quot;: true,
                        &quot;StorageDischargeLimitConstraint&quot;: true
                    }
                },
                &quot;charge_edge&quot;: {
                    &quot;start_vertex&quot;: &quot;boston_elec&quot;,
                    &quot;efficiency&quot;: 0.92,
                    &quot;variable_om_cost&quot;: 1,
                    &quot;commodity&quot;: &quot;Electricity&quot;,
                    &quot;unidirectional&quot;: true,
                    &quot;has_capacity&quot;: false
                }
            },
            &quot;storage&quot;:{
                &quot;existing_capacity&quot;: 0.0,
                &quot;fixed_om_cost&quot;: 4477.587766,
                &quot;investment_cost&quot;: 17013.88552,
                &quot;max_duration&quot;: 10,
                &quot;min_duration&quot;: 1,
                &quot;commodity&quot;: &quot;Electricity&quot;,
                &quot;can_expand&quot;: true,
                &quot;can_retire&quot;: false,
                &quot;constraints&quot;: {
                    &quot;StorageCapacityConstraint&quot;: true,
                    &quot;StorageSymmetricCapacityConstraint&quot;: true,
                    &quot;StorageMinDurationConstraint&quot;: true,
                    &quot;StorageMaxDurationConstraint&quot;: true,
                    &quot;BalanceConstraint&quot;: true
                }
            }
        },
    ]
}</code></pre><h4 id="Battery-Asset,-Mixed-JSON-Input-Format"><a class="docs-heading-anchor" href="#Battery-Asset,-Mixed-JSON-Input-Format">Battery Asset, Mixed JSON Input Format</a><a id="Battery-Asset,-Mixed-JSON-Input-Format-1"></a><a class="docs-heading-anchor-permalink" href="#Battery-Asset,-Mixed-JSON-Input-Format" title="Permalink"></a></h4><p>Some users may find it more straightforward to use some elements of the advanced format with the standard format. This works very well with JSON input files but can make CSV inputs difficult to read.</p><pre><code class="language-json hljs">{
    &quot;type&quot;: &quot;Battery&quot;,
    &quot;global_data&quot;: {},
    &quot;instance_data&quot;: [
        {
            &quot;id&quot;: &quot;battery_boston&quot;,
            &quot;location&quot;: &quot;boston&quot;,
            &quot;storage_can_retire&quot;: false,
            &quot;storage_investment_cost&quot;: 17013.88552,
            &quot;storage_fixed_om_cost&quot;: 4477.587766,
            &quot;storage_max_duration&quot;: 10,
            &quot;storage_min_duration&quot;: 1,
            &quot;storage_constraints&quot;: {
                &quot;StorageCapacityConstraint&quot;: true,
                &quot;StorageSymmetricCapacityConstraint&quot;: true,
                &quot;StorageMinDurationConstraint&quot;: true,
                &quot;StorageMaxDurationConstraint&quot;: true,
                &quot;BalanceConstraint&quot;: true
            },
            &quot;edges&quot;: {
                &quot;discharge_edge&quot;: {
                    &quot;existing_capacity&quot; : 0.0,
                    &quot;fixed_om_cost&quot; : 7075.764437,
                    &quot;investment_cost&quot;: 26886.40679,
                    &quot;variable_om_cost&quot;: 1,
                    &quot;efficiency&quot;: 0.92,
                    &quot;constraints&quot;: {
                        &quot;CapacityConstraint&quot;: true,
                        &quot;StorageDischargeLimitConstraint&quot;: true
                    }
                },
                &quot;charge_edge&quot;: {
                    &quot;efficiency&quot;: 0.92,
                    &quot;variable_om_cost&quot;: 1,
                }
            }
        }
    ]
}</code></pre><h3 id="Hydrogen-Storage"><a class="docs-heading-anchor" href="#Hydrogen-Storage">Hydrogen Storage</a><a id="Hydrogen-Storage-1"></a><a class="docs-heading-anchor-permalink" href="#Hydrogen-Storage" title="Permalink"></a></h3><p>Hydrogen storage Assets use the <code>GasStorage</code> Asset, which consists of a sequence of <code>Edges</code> and <code>Transforms</code> which allow a <code>Storage{Hydrogen}</code> to be charged and discharged, with the equipment powered by <code>Electricity</code>.</p><div class="mermaid">flowchart TD
    H((H2 Node))
    E((Electricity Node))
    subgraph GasStorage
        T1{{Charging Transformation}}
        S[H2 Storage]
        T2{{Discharging Transformation}}
        T1 --H2 Charge--&gt; S
        S --H2 Discharge--&gt; T2
    end
    H --H2 Charge--&gt; T1
    E --Charge Power--&gt; T1
    E --Discharge Power--&gt; T2
    T2 --H2 Discharge--&gt; H</div><p>Constructing this Asset requires internal and external <code>Edges</code>. Under our formulation, we have set the internal charge and discharge <code>Edges</code> to have capacity. The external <code>Edges</code> do not have capacities but their flows are limited by that of the internal <code>Edges</code> and the stoichiometric balances of the <code>Transformations</code>. We have also merged the two <code>Transformations</code> in the figure above and instead added a second balance constraint.</p><pre><code class="language-julia hljs">struct GasStorage{T} &lt;: AbstractAsset
    id::AssetId
    pump_transform::Transformation
    gas_storage::AbstractStorage{&lt;:T}
    charge_edge::Edge{&lt;:T}
    discharge_edge::Edge{&lt;:T}
    external_charge_edge::Edge{&lt;:T}
    external_discharge_edge::Edge{&lt;:T}
    charge_elec_edge::Edge{&lt;:Electricity}
    discharge_elec_edge::Edge{&lt;:Electricity}
end</code></pre><p>The following code snippets from the <code>GasStorage</code> <code>make()</code> function show part of how this Asset is implemented. We recommend reading the <a href="../../Guides/Modeler Guide/modeler_build_asset/#modeler_create_asset">guide on constructing Assets</a> for more details on how to create Assets in Macro.</p><pre><code class="language-julia hljs">function make(asset_type::Type{GasStorage}, data::AbstractDict{Symbol,Any}, system::System)
    # Assign an ID and setup the data handling
    id = AssetId(data[:id])
    @setup_data(asset_type, data, id)

    # Create the single Transformation
    pump_transform_key = :transforms
    @process_data(
        transform_data,
        data[pump_transform_key],
        [
            (data[pump_transform_key], key),
            (data[pump_transform_key], Symbol(&quot;transform_&quot;, key)),
            (data, Symbol(&quot;transform_&quot;, key)),
            (data, key),
        ],
    )
    pump_transform = Transformation(;
        id = Symbol(id, &quot;_&quot;, pump_transform_key),
        timedata = system.time_data[Symbol(transform_data[:timedata])],
        constraints = transform_data[:constraints],
    )

    # Process and create the Storage component
    gas_storage_key = :storage
    @process_data(
        storage_data,
        data[gas_storage_key],
        [
            (data[gas_storage_key], key),
            (data[gas_storage_key], Symbol(&quot;storage_&quot;, key)),
            (data, Symbol(&quot;storage_&quot;, key)),
        ],
    )

    # GasStorage is a parameterized type, so we need to define the commodity type
    commodity_symbol = Symbol(storage_data[:commodity])
    commodity = commodity_types()[commodity_symbol]

    # We will check whether the storage is long duration or not
    long_duration = get(storage_data, :long_duration, false)
    StorageType = long_duration ? LongDurationStorage : Storage
    
    # We will then create a Storage or LongDurationStorage component
    gas_storage = StorageType(
        Symbol(id, &quot;_&quot;, gas_storage_key),
        storage_data,
        system.time_data[commodity_symbol],
        commodity,
    )
    if long_duration
        lds_constraints = [LongDurationStorageImplicitMinMaxConstraint()]
        for c in lds_constraints
            if !(c in gas_storage.constraints)
                push!(gas_storage.constraints, c)
            end
        end
    end

    ## Electricity consumption of the gas storage

    # Create the Electricity edges for charging and discharging of the gas storage
    charge_elec_edge_key = :charge_elec_edge
    # ...
    charge_elec_edge = Edge(
        Symbol(id, &quot;_&quot;, charge_elec_edge_key),
        charge_elec_edge_data,
        system.time_data[:Electricity],
        Electricity,
        charge_elec_start_node,
        charge_elec_end_node,
    )

    discharge_elec_edge_key = :discharge_elec_edge
    # ...
    discharge_elec_edge = Edge(
        Symbol(id, &quot;_&quot;, discharge_elec_edge_key),
        discharge_elec_edge_data,
        system.time_data[:Electricity],
        Electricity,
        discharge_elec_start_node,
        discharge_elec_end_node,
    )

    ## Gas edges

    # We now create the internal and external gas charge and discharge edges
    charge_edge_key = :charge_edge
    # ...
    gas_storage_charge = Edge(
        Symbol(id, &quot;_&quot;, charge_edge_key),
        charge_edge_data,
        system.time_data[commodity_symbol],
        commodity,
        charge_start_node,
        charge_end_node,
    )

    discharge_edge_key = :discharge_edge
    # ...
    gas_storage_discharge = Edge(
        Symbol(id, &quot;_&quot;, discharge_edge_key),
        discharge_edge_data,
        system.time_data[commodity_symbol],
        commodity,
        discharge_start_node,
        discharge_end_node,
    )

    external_charge_edge_key = :external_charge_edge
    # ...
    external_charge_edge = Edge(
        Symbol(id, &quot;_&quot;, external_charge_edge_key),
        external_charge_edge_data,
        system.time_data[commodity_symbol],
        commodity,
        external_charge_start_node,
        external_charge_end_node,
    )

    external_discharge_edge_key = :external_discharge_edge
    # ...
    external_discharge_edge = Edge(
        Symbol(id, &quot;_&quot;, external_discharge_edge_key),
        external_discharge_edge_data,
        system.time_data[commodity_symbol],
        commodity,
        external_discharge_start_node,
        external_discharge_end_node,
    )

    # We specify the direct charge and discharge edges of the gas storage component
    gas_storage.discharge_edge = gas_storage_discharge
    gas_storage.charge_edge = gas_storage_charge
    
    # Set the gas balance across the gas storage, including any losses.
    gas_storage.balance_data = Dict(
        :storage =&gt; Dict(
            gas_storage_discharge.id =&gt; 1 / get(discharge_edge_data, :efficiency, 1.0),
            gas_storage_charge.id =&gt; get(charge_edge_data, :efficiency, 1.0),
        )
    )

    # Set the charging and discharging balances on the pump transformation.
    pump_transform.balance_data = Dict(
        :charge_electricity_consumption =&gt; Dict(
            #This is multiplied by -1 because they are both edges that enters storage, 
            #so we need to get one of them on the right side of the equality balance constraint    
            charge_elec_edge.id =&gt; -1.0,
            external_charge_edge.id =&gt; get(transform_data, :charge_electricity_consumption, 0.0), 
        ),
        :discharge_electricity_consumption =&gt; Dict(
            discharge_elec_edge.id =&gt; 1.0,
            external_discharge_edge.id =&gt; get(transform_data, :discharge_electricity_consumption, 0.0),
        ),
        :external_charge_balance =&gt; Dict(
            external_charge_edge.id =&gt; 1.0,
            gas_storage_charge.id =&gt; 1.0,
        ),
        :external_discharge_balance =&gt; Dict(
            external_discharge_edge.id =&gt; 1.0,
            gas_storage_discharge.id =&gt; 1.0,
        ),
    )

    # Create the GasStorage Asset using the constructed components
    return GasStorage(
        id,
        pump_transform,
        gas_storage,
        gas_storage_charge,
        gas_storage_discharge,
        external_charge_edge,
        external_discharge_edge,
        charge_elec_edge,
        discharge_elec_edge
    )
end</code></pre><h4 id="Hydrogen-Storage-Asset,-Standard-JSON-Input-Format"><a class="docs-heading-anchor" href="#Hydrogen-Storage-Asset,-Standard-JSON-Input-Format">Hydrogen Storage Asset, Standard JSON Input Format</a><a id="Hydrogen-Storage-Asset,-Standard-JSON-Input-Format-1"></a><a class="docs-heading-anchor-permalink" href="#Hydrogen-Storage-Asset,-Standard-JSON-Input-Format" title="Permalink"></a></h4><pre><code class="language-json hljs">{
    &quot;type&quot;: &quot;GasStorage&quot;,
    &quot;global_data&quot;: {},
    &quot;instance_data&quot;: {
        &quot;id&quot;: &quot;above_ground_storage_boston&quot;,
        &quot;location&quot;: &quot;boston&quot;,
        &quot;timedata&quot;: &quot;Hydrogen&quot;,
        &quot;charge_electricity_consumption&quot;: 0.01,
        &quot;discharge_electricity_consumption&quot;: 0.02,
        &quot;storage_commodity&quot;: &quot;Hydrogen&quot;,
        &quot;storage_long_duration&quot;: true,
        &quot;discharge_can_retire&quot;: false,
        &quot;discharge_existing_capacity&quot;: 0,
        &quot;discharge_investment_cost&quot;: 0.0,
        &quot;discharge_efficiency&quot;: 1.0,
        &quot;discharge_ramp_up_fraction&quot;: 1,
        &quot;discharge_ramp_down_fraction&quot;: 1,
        &quot;charge_can_retire&quot;: false,
        &quot;charge_existing_capacity&quot;: 0,
        &quot;charge_investment_cost&quot;: 3219.24,
        &quot;charge_efficiency&quot;: 1.0,
        &quot;storage_can_retire&quot;: false,
        &quot;storage_investment_cost&quot;: 873.01,
        &quot;storage_fixed_om_cost&quot;: 28.76,
        &quot;storage_loss_fraction&quot;: 0.0,
        &quot;storage_min_storage_level&quot;: 0.3,
        &quot;storage_constraints&quot;: {
            &quot;BalanceConstraint&quot;: true,
            &quot;StorageCapacityConstraint&quot;: true,
            &quot;MinStorageLevelConstraint&quot;: true
        },
        &quot;discharge_constraints&quot;: {
            &quot;RampingLimitConstraint&quot;: true
        }
    }
}</code></pre><h4 id="Hydrogen-Storage-Asset,-Advanced-JSON-Input-Format"><a class="docs-heading-anchor" href="#Hydrogen-Storage-Asset,-Advanced-JSON-Input-Format">Hydrogen Storage Asset, Advanced JSON Input Format</a><a id="Hydrogen-Storage-Asset,-Advanced-JSON-Input-Format-1"></a><a class="docs-heading-anchor-permalink" href="#Hydrogen-Storage-Asset,-Advanced-JSON-Input-Format" title="Permalink"></a></h4><pre><code class="language-json hljs">{
    &quot;type&quot;: &quot;GasStorage&quot;,
    &quot;global_data&quot;: {},
    &quot;instance_data&quot;: [
        {
            &quot;id&quot;: &quot;SE_Above_ground_storage&quot;,
            &quot;transforms&quot;: {
                &quot;timedata&quot;: &quot;Hydrogen&quot;,
                &quot;charge_electricity_consumption&quot;: 0.01,
                &quot;discharge_electricity_consumption&quot;: 0.02
            },
            &quot;storage&quot;: {
                &quot;commodity&quot;: &quot;Hydrogen&quot;,
                &quot;can_expand&quot;: true,
                &quot;can_retire&quot;: false,
                &quot;long_duration&quot;: true,
                &quot;investment_cost&quot;: 873.01,
                &quot;fixed_om_cost&quot;: 28.76,
                &quot;loss_fraction&quot;: 0.0,
                &quot;min_storage_level&quot;: 0.3,
                &quot;constraints&quot;: {
                    &quot;StorageCapacityConstraint&quot;: true,
                    &quot;BalanceConstraint&quot;: true,
                    &quot;MinStorageLevelConstraint&quot;: true,
                    &quot;LongDurationStorageImplicitMinMaxConstraint&quot;: true
                }
            },
            &quot;edges&quot;: {
                &quot;discharge_edge&quot;: {
                    &quot;type&quot;: &quot;Hydrogen&quot;,
                    &quot;unidirectional&quot;: true,
                    &quot;can_expand&quot;: true,
                    &quot;can_retire&quot;: false,
                    &quot;has_capacity&quot;: true,
                    &quot;efficiency&quot;: 1.0,
                    &quot;ramp_up_fraction&quot;: 1,
                    &quot;ramp_down_fraction&quot;: 1,
                    &quot;constraints&quot;: {
                        &quot;CapacityConstraint&quot;: true,
                        &quot;RampingLimitConstraint&quot;: true
                    }
                },
                &quot;charge_edge&quot;: {
                    &quot;type&quot;: &quot;Hydrogen&quot;,
                    &quot;unidirectional&quot;: true,
                    &quot;has_capacity&quot;: true,
                    &quot;can_expand&quot;: true,
                    &quot;can_retire&quot;: false,
                    &quot;investment_cost&quot;: 3219.24,
                    &quot;efficiency&quot;: 1.0,
                    &quot;constraints&quot;: {
                        &quot;CapacityConstraint&quot;: true
                    }
                },
                &quot;external_discharge_edge&quot;: {
                    &quot;end_vertex&quot;: &quot;boston_h2&quot;,
                    &quot;type&quot;: &quot;Hydrogen&quot;,
                    &quot;unidirectional&quot;: true,
                    &quot;has_capacity&quot;: false
                },
                &quot;external_charge_edge&quot;:{
                    &quot;start_vertex&quot;: &quot;boston_h2&quot;,
                    &quot;type&quot;: &quot;Hydrogen&quot;,
                    &quot;unidirectional&quot;: true,
                    &quot;has_capacity&quot;: false
                },
                &quot;discharge_elec_edge&quot;: {
                    &quot;start_vertex&quot;: &quot;boston_elec&quot;,
                    &quot;type&quot;: &quot;Electricity&quot;,
                    &quot;unidirectional&quot;: true,
                    &quot;has_capacity&quot;: false
                },
                &quot;charge_elec_edge&quot;: {
                    &quot;start_vertex&quot;: &quot;boston_elec&quot;,
                    &quot;type&quot;: &quot;Electricity&quot;,
                    &quot;unidirectional&quot;: true,
                    &quot;has_capacity&quot;: false
                }
            }
        }
    ]
}</code></pre><h2 id="See-Also"><a class="docs-heading-anchor" href="#See-Also">See Also</a><a id="See-Also-1"></a><a class="docs-heading-anchor-permalink" href="#See-Also" title="Permalink"></a></h2><ul><li><a href="../Edges/#Edges">Edges</a> - Components that connect Vertices and carry flows</li><li><a href="../Transformations/#Transformations">Transformations</a> - Processes that transform flows of several Commodities</li><li><a href="../Nodes/#Nodes">Nodes</a> - Network nodes that allow for import and export of commodities</li><li><a href="../Vertices/#Vertices">Vertices</a> - Network nodes that edges connect</li><li><a href="../Assets/#Assets">Assets</a> - Higher-level components made from edges, nodes, storage, and transformations</li><li><a href="../Commodities/#Commodities">Commodities</a> - Types of resources stored by Commodities</li><li><a href="../TimeData/#Time-Data">Time Data</a> - Temporal modeling framework</li><li><a href="../Constraints/#Constraints">Constraints</a> - Additional constraints for Storage and other components</li></ul><script type="module">import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.esm.min.mjs';
mermaid.initialize({
    startOnLoad: true,
    theme: "neutral"
});
</script></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../Nodes/">« Nodes</a><a class="docs-footer-nextpage" href="../Transformations/">Transformations »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.14.1 on <span class="colophon-date" title="Thursday 18 September 2025 14:52">Thursday 18 September 2025</span>. Using Julia version 1.11.7.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
