<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Adding Assets constraints · Macro</title><meta name="title" content="Adding Assets constraints · Macro"/><meta property="og:title" content="Adding Assets constraints · Macro"/><meta property="twitter:title" content="Adding Assets constraints · Macro"/><meta name="description" content="Documentation for Macro."/><meta property="og:description" content="Documentation for Macro."/><meta property="twitter:description" content="Documentation for Macro."/><meta property="og:url" content="https://macroenergy.github.io/Macro/stable/Guides/User Guide/user_asset_constraints/"/><meta property="twitter:url" content="https://macroenergy.github.io/Macro/stable/Guides/User Guide/user_asset_constraints/"/><link rel="canonical" href="https://macroenergy.github.io/Macro/stable/Guides/User Guide/user_asset_constraints/"/><script data-outdated-warner src="../../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../../assets/documenter.js"></script><script src="../../../search_index.js"></script><script src="../../../siteinfo.js"></script><script src="../../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../../">Macro</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><input class="collapse-toggle" id="menuitem-1" type="checkbox"/><label class="tocitem" for="menuitem-1"><span class="docs-label">Welcome to Macro</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../">Introduction</a></li><li><a class="tocitem" href="../../../table_of_contents/">Table of contents</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2" type="checkbox"/><label class="tocitem" for="menuitem-2"><span class="docs-label">Getting Started</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../Getting Started/1_overview/">Overview</a></li><li><a class="tocitem" href="../../../Getting Started/2_installation/">Installation</a></li><li><a class="tocitem" href="../../../Getting Started/4_macro_repo_contents/">What&#39;s Included With Macro</a></li><li><a class="tocitem" href="../../../Getting Started/3_first_run/">First Run</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3" type="checkbox"/><label class="tocitem" for="menuitem-3"><span class="docs-label">Tutorials</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../Tutorials/tutorials_introduction/">Introduction</a></li><li><a class="tocitem" href="../../../Tutorials/0_getting_started/">Getting Started</a></li><li><a class="tocitem" href="../../../Tutorials/1_running_macro/">Running Macro</a></li><li><a class="tocitem" href="../../../Tutorials/2_multisector_modelling/">Multisector Modelling</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4" type="checkbox" checked/><label class="tocitem" for="menuitem-4"><span class="docs-label">Guides</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../guides_introduction/">Introduction</a></li><li><input class="collapse-toggle" id="menuitem-4-2" type="checkbox" checked/><label class="tocitem" for="menuitem-4-2"><span class="docs-label">User Guide</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../user_build_system/">Create a System</a></li><li><a class="tocitem" href="../user_add_commodity/">Adding Commodities</a></li><li><a class="tocitem" href="../user_add_node/">Adding Nodes</a></li><li><a class="tocitem" href="../user_add_location/">Adding Locations</a></li><li><a class="tocitem" href="../user_add_asset/">Adding Assets</a></li><li><a class="tocitem" href="../user_policy_constraints/">Adding Policy constraints</a></li><li class="is-active"><a class="tocitem" href>Adding Assets constraints</a><ul class="internal"><li><a class="tocitem" href="#Balance-Constraint"><span>Balance Constraint</span></a></li><li><a class="tocitem" href="#Capacity-Constraint"><span>Capacity Constraint</span></a></li><li><a class="tocitem" href="#Maximum-Capacity"><span>Maximum Capacity</span></a></li><li><a class="tocitem" href="#Minimum-Capacity"><span>Minimum Capacity</span></a></li><li><a class="tocitem" href="#Minimum-Flow-Constraint"><span>Minimum Flow Constraint</span></a></li><li><a class="tocitem" href="#Minimum-Up/Down-Time-(Unit-Commitment)"><span>Minimum Up/Down Time (Unit Commitment)</span></a></li><li><a class="tocitem" href="#Must-Run-Constraint"><span>Must Run Constraint</span></a></li><li><a class="tocitem" href="#Ramping-Limit-Constraint-(RampUp/RampDown)"><span>Ramping Limit Constraint (RampUp/RampDown)</span></a></li><li><a class="tocitem" href="#Storage-Capacity-Constraint"><span>Storage Capacity Constraint</span></a></li><li><a class="tocitem" href="#Maximum-Storage-Level"><span>Maximum Storage Level</span></a></li><li><a class="tocitem" href="#Minimum-Storage-Level"><span>Minimum Storage Level</span></a></li><li><a class="tocitem" href="#Storage-Charge/Discharge-Ratio"><span>Storage Charge/Discharge Ratio</span></a></li><li><a class="tocitem" href="#Storage-Discharge-Limit-Constraint"><span>Storage Discharge Limit Constraint</span></a></li><li><a class="tocitem" href="#Storage-Maximum/Minimum-Duration-Constraint"><span>Storage Maximum/Minimum Duration Constraint</span></a></li><li><a class="tocitem" href="#Storage-Symmetric-Capacity-Constraint"><span>Storage Symmetric Capacity Constraint</span></a></li><li><a class="tocitem" href="#Minimum-Storage-Outflow"><span>Minimum Storage Outflow</span></a></li><li><a class="tocitem" href="#Long-Duration-Storage-Implicit-Min/Max-Constraint"><span>Long Duration Storage Implicit Min/Max Constraint</span></a></li></ul></li><li><a class="tocitem" href="../user_settings/">Configuring Settings</a></li><li><a class="tocitem" href="../user_run_model/">Running Models</a></li><li><a class="tocitem" href="../user_write_results/">Writing Results</a></li><li><a class="tocitem" href="../user_multiperiod/">Using Multi-Period Models</a></li><li><a class="tocitem" href="../user_using_asset_libary/">Exploring the Asset library</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4-3" type="checkbox"/><label class="tocitem" for="menuitem-4-3"><span class="docs-label">Modeler Guide</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Modeler Guide/modeler_introduction/">Introduction</a></li><li><a class="tocitem" href="../../Modeler Guide/modeler_es_graph/">Energy System Graph-Based Representation</a></li><li><a class="tocitem" href="../../Modeler Guide/modeler_build_sectors/">Creating a New Sector</a></li><li><a class="tocitem" href="../../Modeler Guide/modeler_build_asset/">Creating a New Asset</a></li><li><a class="tocitem" href="../../Modeler Guide/modeler_create_example_case/">Creating a New Example Case</a></li><li><a class="tocitem" href="../../Modeler Guide/modeler_workflow/">Suggested Development Workflow</a></li><li><a class="tocitem" href="../../Modeler Guide/modeler_debugging_testing/">Debugging and Testing Tips</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4-4" type="checkbox"/><label class="tocitem" for="menuitem-4-4"><span class="docs-label">Developer Guide</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Developer Guide/dev_create_constraint/">Creating a Constraint</a></li><li><a class="tocitem" href="../../Developer Guide/2_type_hierarchy/">Type Hierarchy</a></li></ul></li></ul></li><li><input class="collapse-toggle" id="menuitem-5" type="checkbox"/><label class="tocitem" for="menuitem-5"><span class="docs-label">Manual</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../Manual/manual_introduction/">Introduction</a></li><li><a class="tocitem" href="../../../Manual/Inputs/">Inputs</a></li><li><a class="tocitem" href="../../../Manual/Outputs/">Outputs</a></li><li><a class="tocitem" href="../../../Manual/System/">System</a></li><li><a class="tocitem" href="../../../Manual/Sectors/">Sectors</a></li><li><a class="tocitem" href="../../../Manual/Edges/">Edges</a></li><li><a class="tocitem" href="../../../Manual/Nodes/">Nodes</a></li><li><a class="tocitem" href="../../../Manual/Storage/">Storage</a></li><li><a class="tocitem" href="../../../Manual/Transforms/">Transforms</a></li><li><a class="tocitem" href="../../../Manual/Locations/">Locations</a></li><li><a class="tocitem" href="../../../Manual/assets/1_introduction/">Assets</a></li><li><input class="collapse-toggle" id="menuitem-5-12" type="checkbox"/><label class="tocitem" for="menuitem-5-12"><span class="docs-label">Asset Library</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../Manual/assets/battery/">Battery</a></li><li><a class="tocitem" href="../../../Manual/assets/beccselectricity/">BECCS Electricity</a></li><li><a class="tocitem" href="../../../Manual/assets/beccshydrogen/">BECCS Hydrogen</a></li><li><a class="tocitem" href="../../../Manual/assets/electricdac/">Electric DAC</a></li><li><a class="tocitem" href="../../../Manual/assets/electrolyzer/">Electrolyzer</a></li><li><a class="tocitem" href="../../../Manual/assets/fuelcell/">Fuel Cell</a></li><li><a class="tocitem" href="../../../Manual/assets/gasstorage/">Gas Storage</a></li><li><a class="tocitem" href="../../../Manual/assets/hydrogenline/">Hydrogen Line</a></li><li><a class="tocitem" href="../../../Manual/assets/hydropower/">Hydro Reservoir</a></li><li><a class="tocitem" href="../../../Manual/assets/mustrun/">Must Run</a></li><li><a class="tocitem" href="../../../Manual/assets/natgasdaq/">Natural Gas DAC</a></li><li><a class="tocitem" href="../../../Manual/assets/transmissionlink/">Transmission Link</a></li><li><a class="tocitem" href="../../../Manual/assets/thermalhydrogen/">Thermal Hydrogen Plant (with and without CCS)</a></li><li><a class="tocitem" href="../../../Manual/assets/thermalpower/">Thermal Power Plant (with and without CCS)</a></li><li><a class="tocitem" href="../../../Manual/assets/vre/">Variable Renewable Energy resources (VRE)</a></li></ul></li><li><a class="tocitem" href="../../../Manual/Model/">Model</a></li><li><a class="tocitem" href="../../../Manual/Financial_assumptions/">Financial Assumptions</a></li><li><a class="tocitem" href="../../../Manual/Multi_period_accounting/">Multi-Period Accounting</a></li></ul></li><li><a class="tocitem" href="../../../how_to_contribute/">How to contribute</a></li><li><input class="collapse-toggle" id="menuitem-7" type="checkbox"/><label class="tocitem" for="menuitem-7"><span class="docs-label">References</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../References/1_introduction/">Introduction</a></li><li><a class="tocitem" href="../../../References/2_reading_input/">Reading input data</a></li><li><a class="tocitem" href="../../../References/3_macro_objects/">Macro Objects</a></li><li><a class="tocitem" href="../../../References/4_writing_output/">Writing output data</a></li><li><a class="tocitem" href="../../../References/5_utilities/">Utilities</a></li><li><a class="tocitem" href="../../../References/ref_download_examples/">Downloading examples</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Guides</a></li><li><a class="is-disabled">User Guide</a></li><li class="is-active"><a href>Adding Assets constraints</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Adding Assets constraints</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/macroenergy/MacroEnergy.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/macroenergy/MacroEnergy.jl/blob/main/docs/src/Guides/User Guide/user_asset_constraints.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Adding-Asset-Constraints-to-a-System"><a class="docs-heading-anchor" href="#Adding-Asset-Constraints-to-a-System">Adding Asset Constraints to a System</a><a id="Adding-Asset-Constraints-to-a-System-1"></a><a class="docs-heading-anchor-permalink" href="#Adding-Asset-Constraints-to-a-System" title="Permalink"></a></h1><p>One of Macro&#39;s most powerful features is the ability to enable and disable constraints through input switches without modifying the source code. </p><p>This guide documents all available constraints and explains how to enable them in your system.</p><div class="admonition is-success" id="Important-Attribute-Prefixes-43d18eec120d0cbb"><header class="admonition-header">Important - Attribute Prefixes<a class="admonition-anchor" href="#Important-Attribute-Prefixes-43d18eec120d0cbb" title="Permalink"></a></header><div class="admonition-body"><p>The <strong>prefix</strong> before <code>_constraints</code> (and all other attributes) in the JSON input file varies depending on the component of the asset that the constraint is applied to. Some examples are:</p><ul><li><code>transform_constraints</code>: constraints on the conversion component of an asset</li><li><code>storage_constraints</code>: constraints on the storage component of an asset</li><li><code>elec_constraints</code>: constraints on the power input/output component of an asset</li><li><code>discharge_constraints</code>: constraints on the discharging component of an asset</li><li>etc.</li></ul><p>Throughout this guide, we show examples with different prefixes to illustrate this variety. When implementing constraints for your specific asset, make sure to review <a href="https://github.com/macroenergy/MacroEnergy.jl/tree/main/ExampleSystems/eastern_us_three_zones_reduced/assets">this example case</a> or the asset definition in the <a href="../../../Manual/assets/1_introduction/#Macro-Asset-Library">Macro Asset Library</a> to make sure you use the correct prefix for your asset type.</p></div></div><h2 id="Balance-Constraint"><a class="docs-heading-anchor" href="#Balance-Constraint">Balance Constraint</a><a id="Balance-Constraint-1"></a><a class="docs-heading-anchor-permalink" href="#Balance-Constraint" title="Permalink"></a></h2><p><em>Note: Enabled by default in all assets in the <a href="../../../Manual/assets/1_introduction/#Macro-Asset-Library">Macro Asset Library</a></em></p><p>The balance constraint ensures that the sum of inflows and outflows at any component of an asset equals zero at each time step.</p><div class="admonition is-info" id="Formulation-570bccfb3f4a40ed"><header class="admonition-header">Formulation<a class="admonition-anchor" href="#Formulation-570bccfb3f4a40ed" title="Permalink"></a></header><div class="admonition-body"><p class="math-container">\[\begin{aligned}
    \sum_{i \in \text{inflows}} \text{flow(i, t)} - \sum_{o \in \text{outflows}} \text{flow(o, t)} = 0
\end{aligned}\]</p></div></div><p>While enabled by default in all assets in the <a href="../../../Manual/assets/1_introduction/#Macro-Asset-Library">Macro Asset Library</a>, the user can explicitly enable or disable it by adding these lines to their asset&#39;s JSON input file:</p><pre><code class="language-json hljs">{
    &quot;transform_constraints&quot;: {
        &quot;BalanceConstraint&quot;: true/false
    },
    &quot;storage_constraints&quot;: {
        &quot;BalanceConstraint&quot;: true/false
    }
}</code></pre><h2 id="Capacity-Constraint"><a class="docs-heading-anchor" href="#Capacity-Constraint">Capacity Constraint</a><a id="Capacity-Constraint-1"></a><a class="docs-heading-anchor-permalink" href="#Capacity-Constraint" title="Permalink"></a></h2><p><em>Note: Enabled by default in all assets in the <a href="../../../Manual/assets/1_introduction/#Macro-Asset-Library">Macro Asset Library</a></em></p><p>The capacity constraint ensures that the <strong>flow</strong> of a commodity through an edge of an asset (e.g, power output) does not exceed the nameplate capacity (multiplied by its availability factor).</p><div class="admonition is-info" id="Formulation-Assets-without-unit-commitment-3f34e8bebb19af80"><header class="admonition-header">Formulation - Assets without unit commitment<a class="admonition-anchor" href="#Formulation-Assets-without-unit-commitment-3f34e8bebb19af80" title="Permalink"></a></header><div class="admonition-body"><p>For unidirectional edges, the constraint takes this form:</p><p class="math-container">\[\begin{aligned}
    \text{flow(e, t)} \leq \text{availability(e, t)} \times \text{capacity(e)}
\end{aligned}\]</p><p>For bidirectional edges:</p><p class="math-container">\[\begin{aligned}
    \text{sign(e)} \times \text{flow(e, t)} \leq \text{availability(e, t)} \times \text{capacity(e)}
\end{aligned}\]</p><p>where <code>sign(e)</code> is the sign of the flow of the edge, which is <code>1</code> for positive flows and <code>-1</code> for negative flows.</p></div></div><div class="admonition is-info" id="Formulation-Assets-with-unit-commitment-c5be672627f30e75"><header class="admonition-header">Formulation - Assets with unit commitment<a class="admonition-anchor" href="#Formulation-Assets-with-unit-commitment-c5be672627f30e75" title="Permalink"></a></header><div class="admonition-body"><p>Unidirectional edges:</p><p class="math-container">\[\begin{aligned}
    \sum_{t \in \text{time\_interval(e)}} \text{flow(e, t)} \leq \text{availability(e, t)} \times \text{capacity(e)} \times \text{ucommit(e, t)}
\end{aligned}\]</p><p>Bidirectional edges:</p><p class="math-container">\[\begin{aligned}
    \text{sign(e)} \times \text{flow(e, t)} \leq \text{availability(e, t)} \times \text{capacity(e)} \times \text{ucommit(e, t)}
\end{aligned}\]</p><p>where <code>sign(e)</code> is the sign of the flow of the edge, which is <code>1</code> for positive flows and <code>-1</code> for negative flows.</p></div></div><p>The capacity constraint is enabled by default in all assets in the <a href="../../../Manual/assets/1_introduction/#Macro-Asset-Library">Macro Asset Library</a>. The user can enable/disable it by adding these lines to their asset&#39;s JSON input file:</p><pre><code class="language-json hljs">{
    &quot;elec_constraints&quot;: {
        &quot;CapacityConstraint&quot;: true/false
    }
}</code></pre><p>As a reminder, users can define the availability as a time series in the asset&#39;s JSON input file using the following format:</p><ul><li><strong>Vector of numbers</strong></li></ul><pre><code class="language-json hljs">{
    &quot;availability&quot;: [0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9]
}</code></pre><ul><li><strong>Column in a CSV file</strong></li></ul><pre><code class="language-json hljs">{
    &quot;availability&quot;: {
        &quot;timeseries&quot;: {
            &quot;path&quot;: &quot;system/availability.csv&quot;,
            &quot;header&quot;: &quot;&lt;asset_id&gt;&quot;
        }
    }
}</code></pre><h2 id="Maximum-Capacity"><a class="docs-heading-anchor" href="#Maximum-Capacity">Maximum Capacity</a><a id="Maximum-Capacity-1"></a><a class="docs-heading-anchor-permalink" href="#Maximum-Capacity" title="Permalink"></a></h2><p>The maximum capacity constraint enforces that the <strong>capacity</strong> of an edge or storage of an asset does not exceed the <code>max_capacity</code> attribute as specified in the JSON input file.</p><div class="admonition is-info" id="Formulation-e6379dba465beefa"><header class="admonition-header">Formulation<a class="admonition-anchor" href="#Formulation-e6379dba465beefa" title="Permalink"></a></header><div class="admonition-body"><p class="math-container">\[\begin{aligned}
    \text{capacity(y)} \leq \text{max\_capacity(y)}
\end{aligned}\]</p><p>where <code>y</code> is the edge or storage of the asset.</p></div></div><p>To enable this constraint:</p><ol><li>Add the <code>MaxCapacityConstraint</code> to the list of constraints in the JSON input file of the asset and set it to <code>true</code>.</li><li>Add a value to the <code>max_capacity</code> attribute of the asset.</li></ol><pre><code class="language-json hljs">{
    &quot;elec_constraints&quot;: {
        &quot;MaxCapacityConstraint&quot;: true
    },
    &quot;max_capacity&quot;: 27760
}</code></pre><h2 id="Minimum-Capacity"><a class="docs-heading-anchor" href="#Minimum-Capacity">Minimum Capacity</a><a id="Minimum-Capacity-1"></a><a class="docs-heading-anchor-permalink" href="#Minimum-Capacity" title="Permalink"></a></h2><p>The minimum capacity constraint enforces that the <strong>capacity</strong> of an edge or storage of an asset is greater than or equal to the <code>min_capacity</code> attribute as specified in the JSON input file.</p><div class="admonition is-info" id="Formulation-6f599c2fddb3ab43"><header class="admonition-header">Formulation<a class="admonition-anchor" href="#Formulation-6f599c2fddb3ab43" title="Permalink"></a></header><div class="admonition-body"><p class="math-container">\[\begin{aligned}
    \text{capacity(y)} \geq \text{min\_capacity(y)}
\end{aligned}\]</p><p>where <code>y</code> is the edge or storage of the asset.</p></div></div><p>To enable this constraint:</p><ol><li>Add the <code>MinCapacityConstraint</code> to the list of constraints in the JSON input file of the asset and set it to <code>true</code>.</li><li>Add a value to the <code>min_capacity</code> attribute of the asset.</li></ol><pre><code class="language-json hljs">{
    &quot;elec_constraints&quot;: {
        &quot;MinCapacityConstraint&quot;: true
    },
    &quot;min_capacity&quot;: 100
}</code></pre><h2 id="Minimum-Flow-Constraint"><a class="docs-heading-anchor" href="#Minimum-Flow-Constraint">Minimum Flow Constraint</a><a id="Minimum-Flow-Constraint-1"></a><a class="docs-heading-anchor-permalink" href="#Minimum-Flow-Constraint" title="Permalink"></a></h2><p>The minimum flow constraint enforces that the <strong>flow</strong> of a commodity in an edge does not exceed a user-defined fraction of the capacity of the edge (specified using the <code>min_flow_fraction</code> attribute).</p><div class="admonition is-info" id="Formulation-fb421cb4f74d77c2"><header class="admonition-header">Formulation<a class="admonition-anchor" href="#Formulation-fb421cb4f74d77c2" title="Permalink"></a></header><div class="admonition-body"><p class="math-container">\[\begin{aligned}
    \text{flow(e, t)} \geq \text{min\_flow\_fraction(e)} \times \text{capacity(e)}
\end{aligned}\]</p><p>where <code>e</code> is the edge of the asset.</p><p>In the case of edges with unit commitment, the constraint becomes:</p><p class="math-container">\[\begin{aligned}
    \text{flow(e, t)} \geq \text{min\_flow\_fraction(e)} \times \text{capacity\_size(e)} \times \text{ucommit(e, t)}
\end{aligned}\]</p><p>where <code>e</code> is the edge of the asset, and where <code>capacity_size(e)*ucommit(e, t)</code> is the total capacity of the edge that is available at time <code>t</code>.</p></div></div><p>To enable this constraint:</p><ol><li>Add the <code>MinFlowConstraint</code> to the list of constraints in the JSON input file of the asset and set it to <code>true</code>.</li><li>Add a value to the <code>min_flow_fraction</code> attribute of the asset.</li></ol><pre><code class="language-json hljs">{
    &quot;elec_constraints&quot;: {
        &quot;MinFlowConstraint&quot;: true
    },
    &quot;min_flow_fraction&quot;: 0.5
}</code></pre><div class="admonition is-warning" id="Unidirectional-Edges-Only-c669bd8211f5a398"><header class="admonition-header">Unidirectional Edges Only<a class="admonition-anchor" href="#Unidirectional-Edges-Only-c669bd8211f5a398" title="Permalink"></a></header><div class="admonition-body"><p>This constraint is available only for unidirectional edges.</p></div></div><h2 id="Minimum-Up/Down-Time-(Unit-Commitment)"><a class="docs-heading-anchor" href="#Minimum-Up/Down-Time-(Unit-Commitment)">Minimum Up/Down Time (Unit Commitment)</a><a id="Minimum-Up/Down-Time-(Unit-Commitment)-1"></a><a class="docs-heading-anchor-permalink" href="#Minimum-Up/Down-Time-(Unit-Commitment)" title="Permalink"></a></h2><p>The minimum up/down time constraint enforces that edges with unit commitment must be on/off for a minimum number of time steps (specified using the <code>min_up_time</code>/<code>min_down_time</code> attribute).</p><div class="admonition is-info" id="Formulation-65d57804c4faf0aa"><header class="admonition-header">Formulation<a class="admonition-anchor" href="#Formulation-65d57804c4faf0aa" title="Permalink"></a></header><div class="admonition-body"><p class="math-container">\[\begin{aligned}
    \text{ucommit(e, t)} \geq \sum_{h=0}^{\text{min\_up\_time(e)}-1} \text{ustart(e, t-h)}
\end{aligned}\]</p><p class="math-container">\[\begin{aligned}
    \frac{\text{capacity(e)}}{\text{capacity\_size(e)}} - \text{ucommit(e, t)} \geq \sum_{h=0}^{\text{min\_down\_time(e)}-1} \text{ushut(e, t-h)}
\end{aligned}\]</p><p>where <code>e</code> is the edge of the asset. </p></div></div><p>To enable this constraint:</p><ol><li>Add the <code>MinUpTimeConstraint</code>/<code>MinDownTimeConstraint</code> to the list of constraints in the JSON input file of the asset and set it to <code>true</code>.</li><li>Add a value to the <code>min_up_time</code>/<code>min_down_time</code> attribute of the asset.</li></ol><pre><code class="language-json hljs">{
    &quot;elec_constraints&quot;: {
        &quot;MinUpTimeConstraint&quot;: true,
        &quot;MinDownTimeConstraint&quot;: true
    },
    &quot;min_up_time&quot;: 6,
    &quot;min_down_time&quot;: 6
}</code></pre><div class="admonition is-warning" id="Min-up/down-time-duration-subperiods-8abbbc8492d046fd"><header class="admonition-header">Min up/down time duration - subperiods<a class="admonition-anchor" href="#Min-up/down-time-duration-subperiods-8abbbc8492d046fd" title="Permalink"></a></header><div class="admonition-body"><p>This constraint will throw an error if the minimum up/down time is longer than the length of one subperiod.</p></div></div><h2 id="Must-Run-Constraint"><a class="docs-heading-anchor" href="#Must-Run-Constraint">Must Run Constraint</a><a id="Must-Run-Constraint-1"></a><a class="docs-heading-anchor-permalink" href="#Must-Run-Constraint" title="Permalink"></a></h2><p>The must run constraint forces an edge to operate at its full capacity (adjusted by availability) at all times.</p><div class="admonition is-info" id="Formulation-ccdf8949bcf8cdaf"><header class="admonition-header">Formulation<a class="admonition-anchor" href="#Formulation-ccdf8949bcf8cdaf" title="Permalink"></a></header><div class="admonition-body"><p class="math-container">\[\begin{aligned}
    \text{flow(e, t)} = \text{availability(e, t)} \times \text{capacity(e)}
\end{aligned}\]</p><p>where <code>e</code> is the edge of the asset.</p></div></div><p>To enable this constraint:</p><ol><li>Add the <code>MustRunConstraint</code> to the list of constraints in the JSON input file of the asset and set it to <code>true</code>.</li><li>(optional) Add a time series with the availability of the edge.</li></ol><pre><code class="language-json hljs">{
    &quot;elec_constraints&quot;: {
        &quot;MustRunConstraint&quot;: true
    },
    &quot;availability&quot;: {
        &quot;timeseries&quot;: {
            &quot;path&quot;: &quot;system/availability.csv&quot;,
            &quot;header&quot;: &quot;&lt;asset_id&gt;&quot;
        }
    }
}</code></pre><div class="admonition is-warning" id="Must-run-constraint-8b62d16d737e6f0d"><header class="admonition-header">Must run constraint<a class="admonition-anchor" href="#Must-run-constraint-8b62d16d737e6f0d" title="Permalink"></a></header><div class="admonition-body"><p>This constraint is available only for unidirectional edges.</p></div></div><h2 id="Ramping-Limit-Constraint-(RampUp/RampDown)"><a class="docs-heading-anchor" href="#Ramping-Limit-Constraint-(RampUp/RampDown)">Ramping Limit Constraint (RampUp/RampDown)</a><a id="Ramping-Limit-Constraint-(RampUp/RampDown)-1"></a><a class="docs-heading-anchor-permalink" href="#Ramping-Limit-Constraint-(RampUp/RampDown)" title="Permalink"></a></h2><p>The ramping limits constraint restricts how quickly the <strong>flow</strong> through an edge can change between consecutive time steps. The maximum rate of change is defined as a fraction of the edge&#39;s capacity (<code>ramp_up_fraction</code>/<code>ramp_down_fraction</code>).</p><div class="admonition is-info" id="Formulation-Assets-without-unit-commitment-5209d2535fbddb22"><header class="admonition-header">Formulation - Assets without unit commitment<a class="admonition-anchor" href="#Formulation-Assets-without-unit-commitment-5209d2535fbddb22" title="Permalink"></a></header><div class="admonition-body"><p class="math-container">\[\begin{aligned}
    \text{flow(e, t)} - \text{flow(e, t-1)} \leq \text{ramp\_up\_fraction(e)} \times \text{capacity(e)}
\end{aligned}\]</p><p class="math-container">\[\begin{aligned}
    \text{flow(e, t-1)} - \text{flow(e, t)} \leq \text{ramp\_down\_fraction(e)} \times \text{capacity(e)}
\end{aligned}\]</p></div></div><div class="admonition is-info" id="Formulation-Assets-with-unit-commitment-cb1b61e52b2d0d09"><header class="admonition-header">Formulation - Assets with unit commitment<a class="admonition-anchor" href="#Formulation-Assets-with-unit-commitment-cb1b61e52b2d0d09" title="Permalink"></a></header><div class="admonition-body"><p class="math-container">\[\begin{aligned}
    \text{flow(e, t)} - \text{flow(e, t-1)} - \text{ramp\_up\_fraction(e)} \times \text{capacity\_size(e)} \times (\text{ucommit(e, t)} - \text{ustart(e, t)}) + \text{min(availability(e, t), max(min\_flow\_fraction(e), ramp\_up\_fraction(e)))} \times \text{capacity\_size(e)} \times \text{ustart(e, t)} - \text{min\_flow\_fraction(e)} \times \text{capacity\_size(e)} \times \text{ushut(e, t)} \leq 0
\end{aligned}\]</p><p class="math-container">\[\begin{aligned}
    \text{flow(e, t-1)} - \text{flow(e, t)} - \text{ramp\_down\_fraction(e)} \times \text{capacity\_size(e)} \times (\text{ucommit(e, t)} - \text{ustart(e, t)}) - \text{min\_flow\_fraction(e)} \times \text{capacity\_size(e)} \times \text{ustart(e, t)} + \text{min(availability(e, t), max(min\_flow\_fraction(e), ramp\_down\_fraction(e)))} \times \text{capacity\_size(e)} \times \text{ushut(e, t)} \leq 0
\end{aligned}\]</p></div></div><p>To enable this constraint:</p><ol><li>Add the <code>RampingLimitConstraint</code> to the list of constraints in the JSON input file of the asset and set it to <code>true</code>.</li><li>Add a value to the <code>ramp_up_fraction</code>/<code>ramp_down_fraction</code> attribute of the asset.</li></ol><pre><code class="language-json hljs">{
    &quot;elec_constraints&quot;: {
        &quot;RampingLimitConstraint&quot;: true
    },
    &quot;ramp_up_fraction&quot;: 0.6,
    &quot;ramp_down_fraction&quot;: 0.6
}</code></pre><h2 id="Storage-Capacity-Constraint"><a class="docs-heading-anchor" href="#Storage-Capacity-Constraint">Storage Capacity Constraint</a><a id="Storage-Capacity-Constraint-1"></a><a class="docs-heading-anchor-permalink" href="#Storage-Capacity-Constraint" title="Permalink"></a></h2><p><em>Note: Enabled by default for batteries and gas storage assets</em></p><p>This constraint ensures that the <strong>storage level</strong> of a storage component of an asset never exceeds its total energy capacity.</p><div class="admonition is-info" id="Formulation-aa06e01e9a601101"><header class="admonition-header">Formulation<a class="admonition-anchor" href="#Formulation-aa06e01e9a601101" title="Permalink"></a></header><div class="admonition-body"><p class="math-container">\[\begin{aligned}
    \text{storage\_level(g, t)} \leq \text{capacity(g)}
\end{aligned}\]</p><p>where <code>g</code> is the storage of the asset.</p></div></div><p>As mentioned above, this constraint is enabled by default for batteries and gas storage assets. To enable/disable this constraint for other assets, use the following:</p><ol><li>Add the <code>StorageCapacityConstraint</code> to the list of constraints in the JSON input file of the asset and set it to <code>true</code>.</li></ol><pre><code class="language-json hljs">{
    &quot;storage_constraints&quot;: {
        &quot;StorageCapacityConstraint&quot;: true
    }
}</code></pre><h2 id="Maximum-Storage-Level"><a class="docs-heading-anchor" href="#Maximum-Storage-Level">Maximum Storage Level</a><a id="Maximum-Storage-Level-1"></a><a class="docs-heading-anchor-permalink" href="#Maximum-Storage-Level" title="Permalink"></a></h2><p>The maximum storage level constraint enforces that the <strong>storage level</strong> of a storage component of an asset does not exceed the <code>capacity</code> times the <code>max_storage_level</code> attribute as specified in the JSON input file.</p><div class="admonition is-info" id="Formulation-9117e39dbf34c3d3"><header class="admonition-header">Formulation<a class="admonition-anchor" href="#Formulation-9117e39dbf34c3d3" title="Permalink"></a></header><div class="admonition-body"><p class="math-container">\[\begin{aligned}
    \text{storage\_level(g, t)} \leq \text{max\_storage\_level(g)} \times \text{capacity(g)}
\end{aligned}\]</p><p>where <code>g</code> is the storage of the asset.</p></div></div><p>To enable this constraint:</p><ol><li>Add the <code>MaxStorageLevelConstraint</code> to the list of constraints in the JSON input file of the asset and set it to <code>true</code>.</li><li>Add a value to the <code>max_storage_level</code> attribute of the asset.</li></ol><pre><code class="language-json hljs">{
    &quot;storage_constraints&quot;: {
        &quot;MaxStorageLevelConstraint&quot;: true
    },
    &quot;max_storage_level&quot;: 1
}</code></pre><h2 id="Minimum-Storage-Level"><a class="docs-heading-anchor" href="#Minimum-Storage-Level">Minimum Storage Level</a><a id="Minimum-Storage-Level-1"></a><a class="docs-heading-anchor-permalink" href="#Minimum-Storage-Level" title="Permalink"></a></h2><p>The minimum storage level constraint enforces that the <strong>storage level</strong> of a storage component of an asset does not exceed the <code>capacity</code> times the <code>min_storage_level</code> attribute as specified in the JSON input file.   </p><div class="admonition is-info" id="Formulation-dcb515e30155326"><header class="admonition-header">Formulation<a class="admonition-anchor" href="#Formulation-dcb515e30155326" title="Permalink"></a></header><div class="admonition-body"><p class="math-container">\[\begin{aligned}
    \text{storage\_level(g, t)} \geq \text{min\_storage\_level(g)} \times \text{capacity(g)}
\end{aligned}\]</p><p>where <code>g</code> is the storage of the asset.</p></div></div><p>To enable this constraint:</p><ol><li>Add the <code>MinStorageLevelConstraint</code> to the list of constraints in the JSON input file of the asset and set it to <code>true</code>.</li><li>Add a value to the <code>min_storage_level</code> attribute of the asset.</li></ol><pre><code class="language-json hljs">{
    &quot;storage_constraints&quot;: {
        &quot;MinStorageLevelConstraint&quot;: true
    },
    &quot;min_storage_level&quot;: 0.3
}</code></pre><h2 id="Storage-Charge/Discharge-Ratio"><a class="docs-heading-anchor" href="#Storage-Charge/Discharge-Ratio">Storage Charge/Discharge Ratio</a><a id="Storage-Charge/Discharge-Ratio-1"></a><a class="docs-heading-anchor-permalink" href="#Storage-Charge/Discharge-Ratio" title="Permalink"></a></h2><p>The storage charge/discharge ratio constraint links the capacity of the charging edge to the capacity of the discharging edge through the <code>charge_discharge_ratio</code> input parameter.</p><div class="admonition is-info" id="Formulation-cf6c56a76406f88a"><header class="admonition-header">Formulation<a class="admonition-anchor" href="#Formulation-cf6c56a76406f88a" title="Permalink"></a></header><div class="admonition-body"><p class="math-container">\[\begin{aligned}
    \text{charge\_discharge\_ratio} \times \text{capacity(discharge\_edge)} = \text{capacity(charge\_edge)}
\end{aligned}\]</p></div></div><p>To enable this constraint:</p><ol><li>Add the <code>StorageChargeDischargeRatioConstraint</code> to the list of constraints in the JSON input file of the asset and set it to <code>true</code>.</li><li>Add a value to the <code>charge_discharge_ratio</code> attribute of the asset.</li></ol><pre><code class="language-json hljs">{
    &quot;storage_constraints&quot;: {
        &quot;StorageChargeDischargeRatioConstraint&quot;: true
    },
    &quot;storage_charge_discharge_ratio&quot;: 0.5
}</code></pre><div class="admonition is-warning" id="Constraint-Application-Scope-81eec9ec628c050c"><header class="admonition-header">Constraint Application Scope<a class="admonition-anchor" href="#Constraint-Application-Scope-81eec9ec628c050c" title="Permalink"></a></header><div class="admonition-body"><p>As noted above, this constraint is applied to the storage component of the asset, not to the individual charging and discharging edges.</p></div></div><h2 id="Storage-Discharge-Limit-Constraint"><a class="docs-heading-anchor" href="#Storage-Discharge-Limit-Constraint">Storage Discharge Limit Constraint</a><a id="Storage-Discharge-Limit-Constraint-1"></a><a class="docs-heading-anchor-permalink" href="#Storage-Discharge-Limit-Constraint" title="Permalink"></a></h2><p><em>Note: Enabled by default for batteries.</em></p><p>The storage discharge limit constraint ensures that the flow through a discharging edge (adjusted for efficiency) cannot exceed the storage level from the previous time step.</p><div class="admonition is-info" id="Formulation-f49c6c8436e5d2d8"><header class="admonition-header">Formulation<a class="admonition-anchor" href="#Formulation-f49c6c8436e5d2d8" title="Permalink"></a></header><div class="admonition-body"><p class="math-container">\[\begin{aligned}
   \frac{\text{flow(discharge\_edge, t)}}{\text{efficiency(discharge\_edge)}} \leq \text{storage\_level(t-1)}
\end{aligned}\]</p></div></div><p>To enable this constraint:</p><ol><li>Add the <code>StorageDischargeLimitConstraint</code> to the list of constraints in the JSON input file of the asset and set it to <code>true</code>.</li></ol><pre><code class="language-json hljs">{
    &quot;discharge_constraints&quot;: {
        &quot;StorageDischargeLimitConstraint&quot;: true
    }
}</code></pre><div class="admonition is-warning" id="Constraint-Application-Scope-4cdab69f127ba13"><header class="admonition-header">Constraint Application Scope<a class="admonition-anchor" href="#Constraint-Application-Scope-4cdab69f127ba13" title="Permalink"></a></header><div class="admonition-body"><p>This constraint is applied to discharging edges only.</p></div></div><h2 id="Storage-Maximum/Minimum-Duration-Constraint"><a class="docs-heading-anchor" href="#Storage-Maximum/Minimum-Duration-Constraint">Storage Maximum/Minimum Duration Constraint</a><a id="Storage-Maximum/Minimum-Duration-Constraint-1"></a><a class="docs-heading-anchor-permalink" href="#Storage-Maximum/Minimum-Duration-Constraint" title="Permalink"></a></h2><p>This constraint limits the maximum/minimum energy capacity that can be stored relative to the discharging capacity. The limit is specified in the <code>max_duration</code>/<code>min_duration</code> attribute as a number of time steps.</p><div class="admonition is-info" id="Formulation-cccdfebd9cb93dba"><header class="admonition-header">Formulation<a class="admonition-anchor" href="#Formulation-cccdfebd9cb93dba" title="Permalink"></a></header><div class="admonition-body"><p class="math-container">\[\begin{aligned}
    \text{capacity(storage)} \leq \text{max\_duration} \times \text{capacity(discharge\_edge)}
\end{aligned}\]</p><p class="math-container">\[\begin{aligned}
    \text{capacity(storage)} \geq \text{min\_duration} \times \text{capacity(discharge\_edge)}
\end{aligned}\]</p></div></div><p>To enable this constraint:</p><ol><li>Add the <code>StorageMaxDurationConstraint</code>/<code>StorageMinDurationConstraint</code> to the list of constraints in the JSON input file of the asset and set it to <code>true</code>.</li><li>Add a value to the <code>storage_max_duration</code>/<code>storage_min_duration</code> attribute of the asset.</li></ol><pre><code class="language-json hljs">{
    &quot;storage_constraints&quot;: {
        &quot;StorageMaximumDurationConstraint&quot;: true
    },
    &quot;storage_max_duration&quot;: 10,
    &quot;storage_min_duration&quot;: 1
}</code></pre><h2 id="Storage-Symmetric-Capacity-Constraint"><a class="docs-heading-anchor" href="#Storage-Symmetric-Capacity-Constraint">Storage Symmetric Capacity Constraint</a><a id="Storage-Symmetric-Capacity-Constraint-1"></a><a class="docs-heading-anchor-permalink" href="#Storage-Symmetric-Capacity-Constraint" title="Permalink"></a></h2><p>This constraint ensures that for symmetric storage systems, the maximum simultaneous charge and discharge cannot exceed the capacity of the discharging edge.</p><div class="admonition is-info" id="Formulation-301bd6f1b8546c3e"><header class="admonition-header">Formulation<a class="admonition-anchor" href="#Formulation-301bd6f1b8546c3e" title="Permalink"></a></header><div class="admonition-body"><p class="math-container">\[\begin{aligned}
    \text{flow(e\_discharge, t)} + \text{flow(e\_charge, t)} \leq \text{capacity(e\_discharge)}
\end{aligned}\]</p></div></div><p>To enable this constraint:</p><ol><li>Add the <code>StorageSymmetricCapacityConstraint</code> to the list of constraints in the JSON input file of the asset and set it to <code>true</code>.</li></ol><pre><code class="language-json hljs">{
    &quot;discharge_constraints&quot;: {
        &quot;StorageSymmetricCapacityConstraint&quot;: true
    }
}</code></pre><div class="admonition is-warning" id="Constraint-Application-Scope-4c8f056887ee83a3"><header class="admonition-header">Constraint Application Scope<a class="admonition-anchor" href="#Constraint-Application-Scope-4c8f056887ee83a3" title="Permalink"></a></header><div class="admonition-body"><p>This constraint is applied to the discharging edge of the asset.</p></div></div><h2 id="Minimum-Storage-Outflow"><a class="docs-heading-anchor" href="#Minimum-Storage-Outflow">Minimum Storage Outflow</a><a id="Minimum-Storage-Outflow-1"></a><a class="docs-heading-anchor-permalink" href="#Minimum-Storage-Outflow" title="Permalink"></a></h2><div class="admonition is-warning" id="HydroRes-Assets-Only-6840100c03996f1d"><header class="admonition-header">HydroRes Assets Only<a class="admonition-anchor" href="#HydroRes-Assets-Only-6840100c03996f1d" title="Permalink"></a></header><div class="admonition-body"><p>This constraint is specifically designed for <code>HydroRes</code> assets. A warning will be issued otherwise.</p><p><strong>Tip</strong>: If the discharge edge is the only outflow, use the <code>MinFlowConstraint</code> on the discharge edge instead.</p></div></div><p>The minimum storage outflow constraint enforces that the sum of the flow through the spillage edge and the discharge edge does not exceed a user-defined fraction of the capacity of the discharge edge (<code>min_outflow_fraction</code> attribute).</p><div class="admonition is-info" id="Formulation-2478b51bd00379be"><header class="admonition-header">Formulation<a class="admonition-anchor" href="#Formulation-2478b51bd00379be" title="Permalink"></a></header><div class="admonition-body"><p class="math-container">\[\begin{aligned}
    \text{flow(spillage\_edge, t)} + \text{flow(discharge\_edge, t)} \geq \text{min\_outflow\_fraction} \times \text{capacity(discharge\_edge)}
\end{aligned}\]</p></div></div><p>To enable this constraint:</p><ol><li>Add the <code>MinStorageOutflowConstraint</code> to the list of constraints in the JSON input file of the asset and set it to <code>true</code>.</li><li>Add a value to the <code>min_outflow_fraction</code> attribute of the asset.</li></ol><pre><code class="language-json hljs">{
    &quot;storage_constraints&quot;: {
        &quot;MinStorageOutflowConstraint&quot;: true
    },
    &quot;min_outflow_fraction&quot;: 0.1
}</code></pre><h2 id="Long-Duration-Storage-Implicit-Min/Max-Constraint"><a class="docs-heading-anchor" href="#Long-Duration-Storage-Implicit-Min/Max-Constraint">Long Duration Storage Implicit Min/Max Constraint</a><a id="Long-Duration-Storage-Implicit-Min/Max-Constraint-1"></a><a class="docs-heading-anchor-permalink" href="#Long-Duration-Storage-Implicit-Min/Max-Constraint" title="Permalink"></a></h2><p><em>Note: Enabled by default for batteries, gas storage, and hydro reservoirs when <code>long_duration</code> is set to <code>true</code> in the asset JSON input file.</em></p><p>This set of constraints manages storage levels for <strong>long duration storage systems</strong> when modeling representative periods. The implementation is based on the paper: &quot;Improved formulation for long-duration storage in capacity expansion models using representative periods&quot; by Federico Parolin, Paolo Colbertaldo, and Ruaridh Macdonald, 2024 (<a href="https://doi.org/10.48550/arXiv.2409.19079">arXiv:2409.19079</a>). For detailed information about the constraint formulation, please refer to the paper.</p><p>This constraint is enabled by default for batteries, gas storage, and hydro reservoirs when <code>long_duration</code> is set to <code>true</code> in the asset JSON input file. To enable/disable this constraint for other assets, use the following:</p><ol><li>Add the <code>LongDurationStorageImplicitMinMaxConstraint</code> to the list of constraints in the JSON input file of the asset and set it to <code>true</code>.</li></ol><pre><code class="language-json hljs">{
    &quot;storage_long_duration&quot;: true,
    &quot;storage_constraints&quot;: {
        &quot;LongDurationStorageImplicitMinMaxConstraint&quot;: true/false
    }
}</code></pre><script type="module">import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.esm.min.mjs';
mermaid.initialize({
    startOnLoad: true,
    theme: "neutral"
});
</script></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../user_policy_constraints/">« Adding Policy constraints</a><a class="docs-footer-nextpage" href="../user_settings/">Configuring Settings »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.13.0 on <span class="colophon-date" title="Wednesday 25 June 2025 02:17">Wednesday 25 June 2025</span>. Using Julia version 1.11.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
